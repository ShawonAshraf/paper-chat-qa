"use strict";var yv=Object.create;var Wi=Object.defineProperty;var Ev=Object.getOwnPropertyDescriptor;var gv=Object.getOwnPropertyNames;var _v=Object.getPrototypeOf,bv=Object.prototype.hasOwnProperty;var q=(r,e)=>()=>(r&&(e=r(r=0)),e);var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),At=(r,e)=>{for(var t in e)Wi(r,t,{get:e[t],enumerable:!0})},rh=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of gv(e))!bv.call(r,i)&&i!==t&&Wi(r,i,{get:()=>e[i],enumerable:!(n=Ev(e,i))||n.enumerable});return r};var Sr=(r,e,t)=>(t=r!=null?yv(_v(r)):{},rh(e||!r||!r.__esModule?Wi(t,"default",{value:r,enumerable:!0}):t,r)),be=r=>rh(Wi({},"__esModule",{value:!0}),r);function nh(){return process.env.CI==="true"||process.env.TF_BUILD==="true"||process.env.GITHUB_ACTIONS==="true"||process.env.BUILDKITE==="true"||process.env.CIRCLECI==="true"||process.env.CIRRUS_CI==="true"||process.env.TRAVIS==="true"||!!process.env["bamboo.buildKey"]||!!process.env.CODEBUILD_BUILD_ID||!!process.env.GITLAB_CI||!!process.env.HEROKU_TEST_RUN_ID||!!process.env.BUILD_ID||!!process.env.BUILD_BUILDID||!!process.env.TEAMCITY_VERSION}var ih=q(()=>{"use strict"});var ch=E(($N,pa)=>{"use strict";var vv=require("fs"),sh=require("path"),Sv=require("os");function oh(r){console.log(`[dotenv][DEBUG] ${r}`)}var wv=`
`,Rv=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,Tv=/\\n/g,xv=/\r\n|\n|\r/;function ah(r,e){let t=!!(e&&e.debug),n={};return r.toString().split(xv).forEach(function(i,s){let o=i.match(Rv);if(o!=null){let a=o[1],c=o[2]||"",l=c.length-1,u=c[0]==='"'&&c[l]==='"';c[0]==="'"&&c[l]==="'"||u?(c=c.substring(1,l),u&&(c=c.replace(Tv,wv))):c=c.trim(),n[a]=c}else t&&oh(`did not match key and value when parsing line ${s+1}: ${i}`)}),n}function Ov(r){return r[0]==="~"?sh.join(Sv.homedir(),r.slice(1)):r}function Cv(r){let e=sh.resolve(process.cwd(),".env"),t="utf8",n=!1;r&&(r.path!=null&&(e=Ov(r.path)),r.encoding!=null&&(t=r.encoding),r.debug!=null&&(n=!0));try{let i=ah(vv.readFileSync(e,{encoding:t}),{debug:n});return Object.keys(i).forEach(function(s){Object.prototype.hasOwnProperty.call(process.env,s)?n&&oh(`"${s}" is already defined in \`process.env\` and will not be overwritten`):process.env[s]=i[s]}),{parsed:i}}catch(i){return{error:i}}}pa.exports.config=Cv;pa.exports.parse=ah});var uh=E((Kn,ma)=>{"use strict";(function(r,e){typeof Kn=="object"&&typeof ma=="object"?ma.exports=e(require("child_process"),require("crypto")):typeof define=="function"&&define.amd?define(["child_process","crypto"],e):typeof Kn=="object"?Kn["electron-machine-id"]=e(require("child_process"),require("crypto")):r["electron-machine-id"]=e(r.child_process,r.crypto)})(Kn,function(r,e){return function(t){function n(s){if(i[s])return i[s].exports;var o=i[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var i={};return n.m=t,n.c=i,n.p="",n(0)}([function(t,n,i){t.exports=i(34)},function(t,n,i){var s=i(29)("wks"),o=i(33),a=i(2).Symbol,c=typeof a=="function",l=t.exports=function(u){return s[u]||(s[u]=c&&a[u]||(c?a:o)("Symbol."+u))};l.store=s},function(t,n){var i=t.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=i)},function(t,n,i){var s=i(9);t.exports=function(o){if(!s(o))throw TypeError(o+" is not an object!");return o}},function(t,n,i){t.exports=!i(24)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(t,n,i){var s=i(12),o=i(17);t.exports=i(4)?function(a,c,l){return s.f(a,c,o(1,l))}:function(a,c,l){return a[c]=l,a}},function(t,n){var i=t.exports={version:"2.4.0"};typeof __e=="number"&&(__e=i)},function(t,n,i){var s=i(14);t.exports=function(o,a,c){if(s(o),a===void 0)return o;switch(c){case 1:return function(l){return o.call(a,l)};case 2:return function(l,u){return o.call(a,l,u)};case 3:return function(l,u,f){return o.call(a,l,u,f)}}return function(){return o.apply(a,arguments)}}},function(t,n){var i={}.hasOwnProperty;t.exports=function(s,o){return i.call(s,o)}},function(t,n){t.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},function(t,n){t.exports={}},function(t,n){var i={}.toString;t.exports=function(s){return i.call(s).slice(8,-1)}},function(t,n,i){var s=i(3),o=i(26),a=i(32),c=Object.defineProperty;n.f=i(4)?Object.defineProperty:function(l,u,f){if(s(l),u=a(u,!0),s(f),o)try{return c(l,u,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported!");return"value"in f&&(l[u]=f.value),l}},function(t,n,i){var s=i(42),o=i(15);t.exports=function(a){return s(o(a))}},function(t,n){t.exports=function(i){if(typeof i!="function")throw TypeError(i+" is not a function!");return i}},function(t,n){t.exports=function(i){if(i==null)throw TypeError("Can't call method on  "+i);return i}},function(t,n,i){var s=i(9),o=i(2).document,a=s(o)&&s(o.createElement);t.exports=function(c){return a?o.createElement(c):{}}},function(t,n){t.exports=function(i,s){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:s}}},function(t,n,i){var s=i(12).f,o=i(8),a=i(1)("toStringTag");t.exports=function(c,l,u){c&&!o(c=u?c:c.prototype,a)&&s(c,a,{configurable:!0,value:l})}},function(t,n,i){var s=i(29)("keys"),o=i(33);t.exports=function(a){return s[a]||(s[a]=o(a))}},function(t,n){var i=Math.ceil,s=Math.floor;t.exports=function(o){return isNaN(o=+o)?0:(o>0?s:i)(o)}},function(t,n,i){var s=i(11),o=i(1)("toStringTag"),a=s(function(){return arguments}())=="Arguments",c=function(l,u){try{return l[u]}catch{}};t.exports=function(l){var u,f,h;return l===void 0?"Undefined":l===null?"Null":typeof(f=c(u=Object(l),o))=="string"?f:a?s(u):(h=s(u))=="Object"&&typeof u.callee=="function"?"Arguments":h}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,i){var s=i(2),o=i(6),a=i(7),c=i(5),l="prototype",u=function(f,h,d){var m,b,p,w=f&u.F,k=f&u.G,x=f&u.S,C=f&u.P,L=f&u.B,O=f&u.W,z=k?o:o[h]||(o[h]={}),G=z[l],I=k?s:x?s[h]:(s[h]||{})[l];k&&(d=h);for(m in d)b=!w&&I&&I[m]!==void 0,b&&m in z||(p=b?I[m]:d[m],z[m]=k&&typeof I[m]!="function"?d[m]:L&&b?a(p,s):O&&I[m]==p?function(N){var j=function(X,V,J){if(this instanceof N){switch(arguments.length){case 0:return new N;case 1:return new N(X);case 2:return new N(X,V)}return new N(X,V,J)}return N.apply(this,arguments)};return j[l]=N[l],j}(p):C&&typeof p=="function"?a(Function.call,p):p,C&&((z.virtual||(z.virtual={}))[m]=p,f&u.R&&G&&!G[m]&&c(G,m,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,n){t.exports=function(i){try{return!!i()}catch{return!0}}},function(t,n,i){t.exports=i(2).document&&document.documentElement},function(t,n,i){t.exports=!i(4)&&!i(24)(function(){return Object.defineProperty(i(16)("div"),"a",{get:function(){return 7}}).a!=7})},function(t,n,i){"use strict";var s=i(28),o=i(23),a=i(57),c=i(5),l=i(8),u=i(10),f=i(45),h=i(18),d=i(52),m=i(1)("iterator"),b=!([].keys&&"next"in[].keys()),p="@@iterator",w="keys",k="values",x=function(){return this};t.exports=function(C,L,O,z,G,I,N){f(O,L,z);var j,X,V,J=function(A){if(!b&&A in U)return U[A];switch(A){case w:return function(){return new O(this,A)};case k:return function(){return new O(this,A)}}return function(){return new O(this,A)}},B=L+" Iterator",K=G==k,$=!1,U=C.prototype,H=U[m]||U[p]||G&&U[G],le=H||J(G),Re=G?K?J("entries"):le:void 0,R=L=="Array"&&U.entries||H;if(R&&(V=d(R.call(new C)),V!==Object.prototype&&(h(V,B,!0),s||l(V,m)||c(V,m,x))),K&&H&&H.name!==k&&($=!0,le=function(){return H.call(this)}),s&&!N||!b&&!$&&U[m]||c(U,m,le),u[L]=le,u[B]=x,G)if(j={values:K?le:J(k),keys:I?le:J(w),entries:Re},N)for(X in j)X in U||a(U,X,j[X]);else o(o.P+o.F*(b||$),L,j);return j}},function(t,n){t.exports=!0},function(t,n,i){var s=i(2),o="__core-js_shared__",a=s[o]||(s[o]={});t.exports=function(c){return a[c]||(a[c]={})}},function(t,n,i){var s,o,a,c=i(7),l=i(41),u=i(25),f=i(16),h=i(2),d=h.process,m=h.setImmediate,b=h.clearImmediate,p=h.MessageChannel,w=0,k={},x="onreadystatechange",C=function(){var O=+this;if(k.hasOwnProperty(O)){var z=k[O];delete k[O],z()}},L=function(O){C.call(O.data)};m&&b||(m=function(O){for(var z=[],G=1;arguments.length>G;)z.push(arguments[G++]);return k[++w]=function(){l(typeof O=="function"?O:Function(O),z)},s(w),w},b=function(O){delete k[O]},i(11)(d)=="process"?s=function(O){d.nextTick(c(C,O,1))}:p?(o=new p,a=o.port2,o.port1.onmessage=L,s=c(a.postMessage,a,1)):h.addEventListener&&typeof postMessage=="function"&&!h.importScripts?(s=function(O){h.postMessage(O+"","*")},h.addEventListener("message",L,!1)):s=x in f("script")?function(O){u.appendChild(f("script"))[x]=function(){u.removeChild(this),C.call(O)}}:function(O){setTimeout(c(C,O,1),0)}),t.exports={set:m,clear:b}},function(t,n,i){var s=i(20),o=Math.min;t.exports=function(a){return a>0?o(s(a),9007199254740991):0}},function(t,n,i){var s=i(9);t.exports=function(o,a){if(!s(o))return o;var c,l;if(a&&typeof(c=o.toString)=="function"&&!s(l=c.call(o))||typeof(c=o.valueOf)=="function"&&!s(l=c.call(o))||!a&&typeof(c=o.toString)=="function"&&!s(l=c.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(t,n){var i=0,s=Math.random();t.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++i+s).toString(36))}},function(t,n,i){"use strict";function s(x){return x&&x.__esModule?x:{default:x}}function o(){return process.platform!=="win32"?"":process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"mixed":"native"}function a(x){return(0,m.createHash)("sha256").update(x).digest("hex")}function c(x){switch(p){case"darwin":return x.split("IOPlatformUUID")[1].split(`
`)[0].replace(/\=|\s+|\"/gi,"").toLowerCase();case"win32":return x.toString().split("REG_SZ")[1].replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"linux":return x.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"freebsd":return x.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();default:throw new Error("Unsupported platform: "+process.platform)}}function l(x){var C=c((0,d.execSync)(k[p]).toString());return x?C:a(C)}function u(x){return new h.default(function(C,L){return(0,d.exec)(k[p],{},function(O,z,G){if(O)return L(new Error("Error while obtaining machine id: "+O.stack));var I=c(z.toString());return C(x?I:a(I))})})}Object.defineProperty(n,"__esModule",{value:!0});var f=i(35),h=s(f);n.machineIdSync=l,n.machineId=u;var d=i(70),m=i(71),b=process,p=b.platform,w={native:"%windir%\\System32",mixed:"%windir%\\sysnative\\cmd.exe /c %windir%\\System32"},k={darwin:"ioreg -rd1 -c IOPlatformExpertDevice",win32:w[o()]+"\\REG.exe QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",linux:"( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :",freebsd:"kenv -q smbios.system.uuid || sysctl -n kern.hostuuid"}},function(t,n,i){t.exports={default:i(36),__esModule:!0}},function(t,n,i){i(66),i(68),i(69),i(67),t.exports=i(6).Promise},function(t,n){t.exports=function(){}},function(t,n){t.exports=function(i,s,o,a){if(!(i instanceof s)||a!==void 0&&a in i)throw TypeError(o+": incorrect invocation!");return i}},function(t,n,i){var s=i(13),o=i(31),a=i(62);t.exports=function(c){return function(l,u,f){var h,d=s(l),m=o(d.length),b=a(f,m);if(c&&u!=u){for(;m>b;)if(h=d[b++],h!=h)return!0}else for(;m>b;b++)if((c||b in d)&&d[b]===u)return c||b||0;return!c&&-1}}},function(t,d,i){var s=i(7),o=i(44),a=i(43),c=i(3),l=i(31),u=i(64),f={},h={},d=t.exports=function(m,b,p,w,k){var x,C,L,O,z=k?function(){return m}:u(m),G=s(p,w,b?2:1),I=0;if(typeof z!="function")throw TypeError(m+" is not iterable!");if(a(z)){for(x=l(m.length);x>I;I++)if(O=b?G(c(C=m[I])[0],C[1]):G(m[I]),O===f||O===h)return O}else for(L=z.call(m);!(C=L.next()).done;)if(O=o(L,G,C.value,b),O===f||O===h)return O};d.BREAK=f,d.RETURN=h},function(t,n){t.exports=function(i,s,o){var a=o===void 0;switch(s.length){case 0:return a?i():i.call(o);case 1:return a?i(s[0]):i.call(o,s[0]);case 2:return a?i(s[0],s[1]):i.call(o,s[0],s[1]);case 3:return a?i(s[0],s[1],s[2]):i.call(o,s[0],s[1],s[2]);case 4:return a?i(s[0],s[1],s[2],s[3]):i.call(o,s[0],s[1],s[2],s[3])}return i.apply(o,s)}},function(t,n,i){var s=i(11);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(o){return s(o)=="String"?o.split(""):Object(o)}},function(t,n,i){var s=i(10),o=i(1)("iterator"),a=Array.prototype;t.exports=function(c){return c!==void 0&&(s.Array===c||a[o]===c)}},function(t,n,i){var s=i(3);t.exports=function(o,a,c,l){try{return l?a(s(c)[0],c[1]):a(c)}catch(f){var u=o.return;throw u!==void 0&&s(u.call(o)),f}}},function(t,n,i){"use strict";var s=i(49),o=i(17),a=i(18),c={};i(5)(c,i(1)("iterator"),function(){return this}),t.exports=function(l,u,f){l.prototype=s(c,{next:o(1,f)}),a(l,u+" Iterator")}},function(t,n,i){var s=i(1)("iterator"),o=!1;try{var a=[7][s]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch{}t.exports=function(c,l){if(!l&&!o)return!1;var u=!1;try{var f=[7],h=f[s]();h.next=function(){return{done:u=!0}},f[s]=function(){return h},c(f)}catch{}return u}},function(t,n){t.exports=function(i,s){return{value:s,done:!!i}}},function(t,n,i){var s=i(2),o=i(30).set,a=s.MutationObserver||s.WebKitMutationObserver,c=s.process,l=s.Promise,u=i(11)(c)=="process";t.exports=function(){var f,h,d,m=function(){var k,x;for(u&&(k=c.domain)&&k.exit();f;){x=f.fn,f=f.next;try{x()}catch(C){throw f?d():h=void 0,C}}h=void 0,k&&k.enter()};if(u)d=function(){c.nextTick(m)};else if(a){var b=!0,p=document.createTextNode("");new a(m).observe(p,{characterData:!0}),d=function(){p.data=b=!b}}else if(l&&l.resolve){var w=l.resolve();d=function(){w.then(m)}}else d=function(){o.call(s,m)};return function(k){var x={fn:k,next:void 0};h&&(h.next=x),f||(f=x,d()),h=x}}},function(t,n,i){var s=i(3),o=i(50),a=i(22),c=i(19)("IE_PROTO"),l=function(){},u="prototype",f=function(){var h,d=i(16)("iframe"),m=a.length,b=">";for(d.style.display="none",i(25).appendChild(d),d.src="javascript:",h=d.contentWindow.document,h.open(),h.write("<script>document.F=Object</script"+b),h.close(),f=h.F;m--;)delete f[u][a[m]];return f()};t.exports=Object.create||function(h,d){var m;return h!==null?(l[u]=s(h),m=new l,l[u]=null,m[c]=h):m=f(),d===void 0?m:o(m,d)}},function(t,n,i){var s=i(12),o=i(3),a=i(54);t.exports=i(4)?Object.defineProperties:function(c,l){o(c);for(var u,f=a(l),h=f.length,d=0;h>d;)s.f(c,u=f[d++],l[u]);return c}},function(t,n,i){var s=i(55),o=i(17),a=i(13),c=i(32),l=i(8),u=i(26),f=Object.getOwnPropertyDescriptor;n.f=i(4)?f:function(h,d){if(h=a(h),d=c(d,!0),u)try{return f(h,d)}catch{}if(l(h,d))return o(!s.f.call(h,d),h[d])}},function(t,n,i){var s=i(8),o=i(63),a=i(19)("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(l){return l=o(l),s(l,a)?l[a]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?c:null}},function(t,n,i){var s=i(8),o=i(13),a=i(39)(!1),c=i(19)("IE_PROTO");t.exports=function(l,u){var f,h=o(l),d=0,m=[];for(f in h)f!=c&&s(h,f)&&m.push(f);for(;u.length>d;)s(h,f=u[d++])&&(~a(m,f)||m.push(f));return m}},function(t,n,i){var s=i(53),o=i(22);t.exports=Object.keys||function(a){return s(a,o)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,i){var s=i(5);t.exports=function(o,a,c){for(var l in a)c&&o[l]?o[l]=a[l]:s(o,l,a[l]);return o}},function(t,n,i){t.exports=i(5)},function(t,n,i){var s=i(9),o=i(3),a=function(c,l){if(o(c),!s(l)&&l!==null)throw TypeError(l+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(c,l,u){try{u=i(7)(Function.call,i(51).f(Object.prototype,"__proto__").set,2),u(c,[]),l=!(c instanceof Array)}catch{l=!0}return function(f,h){return a(f,h),l?f.__proto__=h:u(f,h),f}}({},!1):void 0),check:a}},function(t,n,i){"use strict";var s=i(2),o=i(6),a=i(12),c=i(4),l=i(1)("species");t.exports=function(u){var f=typeof o[u]=="function"?o[u]:s[u];c&&f&&!f[l]&&a.f(f,l,{configurable:!0,get:function(){return this}})}},function(t,n,i){var s=i(3),o=i(14),a=i(1)("species");t.exports=function(c,l){var u,f=s(c).constructor;return f===void 0||(u=s(f)[a])==null?l:o(u)}},function(t,n,i){var s=i(20),o=i(15);t.exports=function(a){return function(c,l){var u,f,h=String(o(c)),d=s(l),m=h.length;return d<0||d>=m?a?"":void 0:(u=h.charCodeAt(d),u<55296||u>56319||d+1===m||(f=h.charCodeAt(d+1))<56320||f>57343?a?h.charAt(d):u:a?h.slice(d,d+2):(u-55296<<10)+(f-56320)+65536)}}},function(t,n,i){var s=i(20),o=Math.max,a=Math.min;t.exports=function(c,l){return c=s(c),c<0?o(c+l,0):a(c,l)}},function(t,n,i){var s=i(15);t.exports=function(o){return Object(s(o))}},function(t,n,i){var s=i(21),o=i(1)("iterator"),a=i(10);t.exports=i(6).getIteratorMethod=function(c){if(c!=null)return c[o]||c["@@iterator"]||a[s(c)]}},function(t,n,i){"use strict";var s=i(37),o=i(47),a=i(10),c=i(13);t.exports=i(27)(Array,"Array",function(l,u){this._t=c(l),this._i=0,this._k=u},function(){var l=this._t,u=this._k,f=this._i++;return!l||f>=l.length?(this._t=void 0,o(1)):u=="keys"?o(0,f):u=="values"?o(0,l[f]):o(0,[f,l[f]])},"values"),a.Arguments=a.Array,s("keys"),s("values"),s("entries")},function(t,n){},function(t,n,i){"use strict";var s,o,a,c=i(28),l=i(2),u=i(7),f=i(21),h=i(23),d=i(9),m=(i(3),i(14)),b=i(38),p=i(40),w=(i(58).set,i(60)),k=i(30).set,x=i(48)(),C="Promise",L=l.TypeError,z=l.process,O=l[C],z=l.process,G=f(z)=="process",I=function(){},N=!!function(){try{var R=O.resolve(1),A=(R.constructor={})[i(1)("species")]=function(S){S(I,I)};return(G||typeof PromiseRejectionEvent=="function")&&R.then(I)instanceof A}catch{}}(),j=function(R,A){return R===A||R===O&&A===a},X=function(R){var A;return!(!d(R)||typeof(A=R.then)!="function")&&A},V=function(R){return j(O,R)?new J(R):new o(R)},J=o=function(R){var A,S;this.promise=new R(function(W,de){if(A!==void 0||S!==void 0)throw L("Bad Promise constructor");A=W,S=de}),this.resolve=m(A),this.reject=m(S)},B=function(R){try{R()}catch(A){return{error:A}}},K=function(R,A){if(!R._n){R._n=!0;var S=R._c;x(function(){for(var W=R._v,de=R._s==1,Nt=0,ct=function(Et){var _e,Yr,vr=de?Et.ok:Et.fail,Pe=Et.resolve,Vt=Et.reject,y=Et.domain;try{vr?(de||(R._h==2&&H(R),R._h=1),vr===!0?_e=W:(y&&y.enter(),_e=vr(W),y&&y.exit()),_e===Et.promise?Vt(L("Promise-chain cycle")):(Yr=X(_e))?Yr.call(_e,Pe,Vt):Pe(_e)):Vt(W)}catch(_){Vt(_)}};S.length>Nt;)ct(S[Nt++]);R._c=[],R._n=!1,A&&!R._h&&$(R)})}},$=function(R){k.call(l,function(){var A,S,W,de=R._v;if(U(R)&&(A=B(function(){G?z.emit("unhandledRejection",de,R):(S=l.onunhandledrejection)?S({promise:R,reason:de}):(W=l.console)&&W.error&&W.error("Unhandled promise rejection",de)}),R._h=G||U(R)?2:1),R._a=void 0,A)throw A.error})},U=function(R){if(R._h==1)return!1;for(var A,S=R._a||R._c,W=0;S.length>W;)if(A=S[W++],A.fail||!U(A.promise))return!1;return!0},H=function(R){k.call(l,function(){var A;G?z.emit("rejectionHandled",R):(A=l.onrejectionhandled)&&A({promise:R,reason:R._v})})},le=function(R){var A=this;A._d||(A._d=!0,A=A._w||A,A._v=R,A._s=2,A._a||(A._a=A._c.slice()),K(A,!0))},Re=function(R){var A,S=this;if(!S._d){S._d=!0,S=S._w||S;try{if(S===R)throw L("Promise can't be resolved itself");(A=X(R))?x(function(){var W={_w:S,_d:!1};try{A.call(R,u(Re,W,1),u(le,W,1))}catch(de){le.call(W,de)}}):(S._v=R,S._s=1,K(S,!1))}catch(W){le.call({_w:S,_d:!1},W)}}};N||(O=function(R){b(this,O,C,"_h"),m(R),s.call(this);try{R(u(Re,this,1),u(le,this,1))}catch(A){le.call(this,A)}},s=function(R){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},s.prototype=i(56)(O.prototype,{then:function(R,A){var S=V(w(this,O));return S.ok=typeof R!="function"||R,S.fail=typeof A=="function"&&A,S.domain=G?z.domain:void 0,this._c.push(S),this._a&&this._a.push(S),this._s&&K(this,!1),S.promise},catch:function(R){return this.then(void 0,R)}}),J=function(){var R=new s;this.promise=R,this.resolve=u(Re,R,1),this.reject=u(le,R,1)}),h(h.G+h.W+h.F*!N,{Promise:O}),i(18)(O,C),i(59)(C),a=i(6)[C],h(h.S+h.F*!N,C,{reject:function(R){var A=V(this),S=A.reject;return S(R),A.promise}}),h(h.S+h.F*(c||!N),C,{resolve:function(R){if(R instanceof O&&j(R.constructor,this))return R;var A=V(this),S=A.resolve;return S(R),A.promise}}),h(h.S+h.F*!(N&&i(46)(function(R){O.all(R).catch(I)})),C,{all:function(R){var A=this,S=V(A),W=S.resolve,de=S.reject,Nt=B(function(){var ct=[],Et=0,_e=1;p(R,!1,function(Yr){var vr=Et++,Pe=!1;ct.push(void 0),_e++,A.resolve(Yr).then(function(Vt){Pe||(Pe=!0,ct[vr]=Vt,--_e||W(ct))},de)}),--_e||W(ct)});return Nt&&de(Nt.error),S.promise},race:function(R){var A=this,S=V(A),W=S.reject,de=B(function(){p(R,!1,function(Nt){A.resolve(Nt).then(S.resolve,W)})});return de&&W(de.error),S.promise}})},function(t,n,i){"use strict";var s=i(61)(!0);i(27)(String,"String",function(o){this._t=String(o),this._i=0},function(){var o,a=this._t,c=this._i;return c>=a.length?{value:void 0,done:!0}:(o=s(a,c),this._i+=o.length,{value:o,done:!1})})},function(t,n,i){i(65);for(var s=i(2),o=i(5),a=i(10),c=i(1)("toStringTag"),l=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var f=l[u],h=s[f],d=h&&h.prototype;d&&!d[c]&&o(d,c,f),a[f]=a.Array}},function(t,n){t.exports=require("child_process")},function(t,n){t.exports=require("crypto")}])})});var lh={};At(lh,{configureLightClientRequire:()=>Iv,configuredPaths:()=>wr,lightClientRequire:()=>ie});function Iv(r){wr=r,ie=function(e){if(wr.length===0)throw new Error("Light client require must have paths configured with `configureLightClientRequire`.");let t;try{t=require.resolve(e,{paths:r})}catch(n){throw process.env.NX_VERBOSE_LOGGING==="true"&&console.error(`Was not able to require.resolve module ${e} from the following paths: ${r}. This may be expected.`),n}try{return require(t)}catch(n){throw process.env.NX_VERBOSE_LOGGING==="true"&&console.error(`Was not able require module ${e} from path ${t}. This may be expected. `),n}}}var ie,wr,Rr=q(()=>{"use strict";wr=[]});var Y=E(Tr=>{"use strict";Rr();try{try{let{output:r}=ie("nx/src/utils/output"),e;try{e=ie("nx/src/utils/app-root").workspaceRoot}catch{e=ie("nx/src/utils/workspace-root").workspaceRoot}Tr.workspaceRoot=e,Tr.output=r}catch{let{output:e}=ie("@nrwl/workspace/src/utilities/output"),{appRootPath:t}=ie("@nrwl/tao/src/utils/app-root");Tr.workspaceRoot=t,Tr.output=e}}catch{let e=t=>{var n;return`${t.title}

${(n=t.bodyLines)==null?void 0:n.join(`
`)}`};Tr.output={note:t=>console.info(e(t)),error:t=>console.error(e(t)),warn:t=>console.warn(e(t)),success:t=>console.log(e(t)),addVerticalSeparator:()=>"",addNewline:()=>console.log(`
`)},Tr.workspaceRoot=process.cwd()}});function ut(r){return!!r}function gh(){return process.env.NX_INVOKED_BY_RUNNER==="true"||process.env.NX_CLOUD==="false"}function tt(){try{return(0,ya.execSync)("git rev-parse HEAD",{stdio:"pipe"}).toString().trim()}catch{return}}function Yi(){try{return(0,ya.execSync)("git rev-parse --symbolic-full-name HEAD",{stdio:"pipe"}).toString().trim()}catch{return}}function kv(){try{let r=(0,dh.readFileSync)((0,Xi.join)(Dv,"nx-cloud.env"));return Nv.parse(r)}catch{return{}}}function Lv(){let r=kv();Dt=process.env.NX_CLOUD_AUTH_TOKEN||process.env.NX_CLOUD_ACCESS_TOKEN||r.NX_CLOUD_AUTH_TOKEN||r.NX_CLOUD_ACCESS_TOKEN,xr=process.env.NX_CLOUD_ENCRYPTION_KEY||r.NX_CLOUD_ENCRYPTION_KEY,P=process.env.NX_VERBOSE_LOGGING==="true"||r.NX_VERBOSE_LOGGING==="true",gt=process.env.NX_CLOUD_NO_TIMEOUTS==="true"||r.NX_CLOUD_NO_TIMEOUTS==="true"}function je(){return _h()}function _h(){return process.env.NX_CI_EXECUTION_ID!==void 0?process.env.NX_CI_EXECUTION_ID:process.env.NX_RUN_GROUP!==void 0?process.env.NX_RUN_GROUP:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_WORKFLOW_ID?process.env.CIRCLE_WORKFLOW_ID:process.env.TRAVIS_BUILD_ID!==void 0?process.env.TRAVIS_BUILD_ID:process.env.GITHUB_ACTIONS&&process.env.GITHUB_RUN_ID?`${process.env.GITHUB_RUN_ID}-${process.env.GITHUB_RUN_ATTEMPT}`:process.env.BUILD_BUILDID?process.env.BUILD_BUILDID:process.env.BITBUCKET_BUILD_NUMBER!==void 0?process.env.BITBUCKET_BUILD_NUMBER:process.env.VERCEL_GIT_COMMIT_SHA!==void 0?process.env.VERCEL_GIT_COMMIT_SHA:process.env.CI_PIPELINE_ID?process.env.CI_PIPELINE_ID:process.env.BUILD_TAG?process.env.BUILD_TAG:null}function Te(){return process.env.NX_CI_EXECUTION_ENV??""}function ve(){if(process.env.NX_RUN_GROUP!==void 0)return process.env.NX_RUN_GROUP;let r=_h();return r?Te()?`${r}-${Te()}`:r:tt()}function me(){if(process.env.NX_BRANCH!==void 0)return process.env.NX_BRANCH;if(process.env.CIRCLECI!==void 0){if(process.env.CIRCLE_PR_NUMBER!==void 0)return process.env.CIRCLE_PR_NUMBER;if(process.env.CIRCLE_PULL_REQUEST!==void 0){let r=process.env.CIRCLE_PULL_REQUEST.split("/");return r[r.length-1]}else if(process.env.CIRCLE_BRANCH!==void 0)return process.env.CIRCLE_BRANCH}if(process.env.TRAVIS_PULL_REQUEST!==void 0)return process.env.TRAVIS_PULL_REQUEST;if(process.env.GITHUB_ACTIONS){if(process.env.GITHUB_REF){let r=process.env.GITHUB_REF.match(/refs\/pull\/(\d+)\/merge/);if(r)return r[1]}return process.env.GITHUB_HEAD_REF??""}return process.env.BITBUCKET_PR_ID!==void 0?process.env.BITBUCKET_PR_ID:process.env.VERCEL_GIT_COMMIT_REF!==void 0?process.env.VERCEL_GIT_COMMIT_REF:process.env.CI_MERGE_REQUEST_IID?process.env.CI_MERGE_REQUEST_IID:process.env.CI_COMMIT_BRANCH?process.env.CI_COMMIT_BRANCH:process.env.GIT_BRANCH?process.env.GIT_BRANCH:null}function Jr(){let r=require("os"),e=(0,hh.createHash)("md5");return e.update(Av()),{machineId:e.digest("base64"),platform:r.platform(),version:r.version?r.version():"",cpuCores:r.cpus().length}}function Ji(){let r=(0,Xi.parse)(process.argv[1]).name,e=`${process.argv.slice(2).join(" ")}`;return`${r} ${e}`}function bh(r){let e=Uv(),t={};return r=="auto"?t=e:r&&r.split(",").map(n=>n.trim()).forEach(n=>{e[n]&&(t[n]=e[n])}),Object.keys(e).filter(n=>n.startsWith("NX_")).forEach(n=>{t[n]=e[n]}),P&&(fh.note({title:"Environment variables passed to cloud:",bodyLines:Object.keys(t)}),fh.addNewline()),t}function Uv(){let r={};for(let e of Object.keys(process.env))e!=null&&!Pv.includes(e)&&process.env[e]&&(r[e]=process.env[e]);return r}var ya,hh,dh,Xi,Nv,Av,fh,Dv,Yn,Ea,ga,Jn,ph,Zn,Wt,_a,mh,yh,Ki,Eh,Dt,xr,P,gt,Pv,re=q(()=>{"use strict";ya=require("child_process"),hh=require("crypto"),dh=require("fs"),Xi=require("path");ih();Nv=ch(),{machineIdSync:Av}=uh(),{output:fh,workspaceRoot:Dv}=Y(),Yn=9999999,Ea=process.env.NX_CLOUD_AGENT_TIMEOUT_MS?Number(process.env.NX_CLOUD_AGENT_TIMEOUT_MS):36e5,ga=process.env.NX_CLOUD_ORCHESTRATOR_TIMEOUT_MS?Number(process.env.NX_CLOUD_ORCHESTRATOR_TIMEOUT_MS):36e5,Jn=1e3*1e3*1e4,ph=process.env.NX_CLOUD_UNLIMITED_OUTPUT==="true",Zn=1e3*1e3*300,Wt=166,_a=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT?Number(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT):null,mh=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE!="false",yh=process.env.NX_CLOUD_FORCE_METRICS==="true",Ki=process.env.NX_CLOUD_NUMBER_OF_RETRIES?Number(process.env.NX_CLOUD_NUMBER_OF_RETRIES):nh()?10:1,Eh=process.env.NX_NO_CLOUD==="true";Lv();Pv=["PWD","HOME","SHELL","LOGNAME","UID","HOSTNAME","MAIL","EDITOR","LANG","TEMP","PATH","TERM","USER","COMMAND_MODE","TMPDIR","TERMINAL_EMULATOR","TERM_SESSION_ID","OLDPWD","MANPATH","PAGER","LESS","LSCOLORS","PNPM_HOME","ZSH","GOPATH","GOROOT","NVM_DIR","NVM_BIN","NVM_INC"]});function Ge(r){return new Promise(e=>{setTimeout(()=>e(null),r)})}var Zr=q(()=>{"use strict"});var ba=E((KN,vh)=>{"use strict";vh.exports=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}}});var Me=E((YN,Rh)=>{"use strict";var Mv=ba(),Or=Object.prototype.toString;function wa(r){return Or.call(r)==="[object Array]"}function va(r){return typeof r>"u"}function Fv(r){return r!==null&&!va(r)&&r.constructor!==null&&!va(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function qv(r){return Or.call(r)==="[object ArrayBuffer]"}function Bv(r){return typeof FormData<"u"&&r instanceof FormData}function jv(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function Gv(r){return typeof r=="string"}function $v(r){return typeof r=="number"}function Sh(r){return r!==null&&typeof r=="object"}function Zi(r){if(Or.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function Hv(r){return Or.call(r)==="[object Date]"}function zv(r){return Or.call(r)==="[object File]"}function Vv(r){return Or.call(r)==="[object Blob]"}function wh(r){return Or.call(r)==="[object Function]"}function Wv(r){return Sh(r)&&wh(r.pipe)}function Xv(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function Kv(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Yv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ra(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),wa(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function Sa(){var r={};function e(i,s){Zi(r[s])&&Zi(i)?r[s]=Sa(r[s],i):Zi(i)?r[s]=Sa({},i):wa(i)?r[s]=i.slice():r[s]=i}for(var t=0,n=arguments.length;t<n;t++)Ra(arguments[t],e);return r}function Jv(r,e,t){return Ra(e,function(i,s){t&&typeof i=="function"?r[s]=Mv(i,t):r[s]=i}),r}function Zv(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}Rh.exports={isArray:wa,isArrayBuffer:qv,isBuffer:Fv,isFormData:Bv,isArrayBufferView:jv,isString:Gv,isNumber:$v,isObject:Sh,isPlainObject:Zi,isUndefined:va,isDate:Hv,isFile:zv,isBlob:Vv,isFunction:wh,isStream:Wv,isURLSearchParams:Xv,isStandardBrowserEnv:Yv,forEach:Ra,merge:Sa,extend:Jv,trim:Kv,stripBOM:Zv}});var Qi=E((JN,xh)=>{"use strict";var Qr=Me();function Th(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}xh.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Qr.isURLSearchParams(t))i=t.toString();else{var s=[];Qr.forEach(t,function(c,l){c===null||typeof c>"u"||(Qr.isArray(c)?l=l+"[]":c=[c],Qr.forEach(c,function(f){Qr.isDate(f)?f=f.toISOString():Qr.isObject(f)&&(f=JSON.stringify(f)),s.push(Th(l)+"="+Th(f))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var Ch=E((ZN,Oh)=>{"use strict";var Qv=Me();function es(){this.handlers=[]}es.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};es.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};es.prototype.forEach=function(e){Qv.forEach(this.handlers,function(n){n!==null&&e(n)})};Oh.exports=es});var Nh=E((QN,Ih)=>{"use strict";var eS=Me();Ih.exports=function(e,t){eS.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})}});var ts=E((eA,Ah)=>{"use strict";Ah.exports=function(e,t,n,i,s){return e.config=t,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var rs=E((tA,Dh)=>{"use strict";var tS=ts();Dh.exports=function(e,t,n,i,s){var o=new Error(e);return tS(o,t,n,i,s)}});var Ta=E((rA,kh)=>{"use strict";var rS=rs();kh.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(rS("Request failed with status code "+n.status,n.config,null,n.request,n))}});var Ph=E((nA,Lh)=>{"use strict";var ns=Me();Lh.exports=ns.isStandardBrowserEnv()?function(){return{write:function(t,n,i,s,o,a){var c=[];c.push(t+"="+encodeURIComponent(n)),ns.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),ns.isString(s)&&c.push("path="+s),ns.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Mh=E((iA,Uh)=>{"use strict";Uh.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var qh=E((sA,Fh)=>{"use strict";Fh.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var xa=E((oA,Bh)=>{"use strict";var nS=Mh(),iS=qh();Bh.exports=function(e,t){return e&&!nS(t)?iS(e,t):t}});var Gh=E((aA,jh)=>{"use strict";var Oa=Me(),sS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];jh.exports=function(e){var t={},n,i,s;return e&&Oa.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=Oa.trim(a.substr(0,s)).toLowerCase(),i=Oa.trim(a.substr(s+1)),n){if(t[n]&&sS.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var zh=E((cA,Hh)=>{"use strict";var $h=Me();Hh.exports=$h.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(s){var o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(o){var a=$h.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Wh=E((uA,Vh)=>{"use strict";var is=Me(),oS=Ta(),aS=Ph(),cS=Qi(),uS=xa(),lS=Gh(),fS=zh(),Ca=rs();Vh.exports=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,a=e.responseType;is.isFormData(s)&&delete o["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(l+":"+u)}var f=uS(e.baseURL,e.url);c.open(e.method.toUpperCase(),cS(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function h(){if(c){var m="getAllResponseHeaders"in c?lS(c.getAllResponseHeaders()):null,b=!a||a==="text"||a==="json"?c.responseText:c.response,p={data:b,status:c.status,statusText:c.statusText,headers:m,config:e,request:c};oS(n,i,p),c=null}}if("onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(h)},c.onabort=function(){c&&(i(Ca("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(Ca("Network Error",e,null,c)),c=null},c.ontimeout=function(){var b="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(b=e.timeoutErrorMessage),i(Ca(b,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},is.isStandardBrowserEnv()){var d=(e.withCredentials||fS(f))&&e.xsrfCookieName?aS.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}"setRequestHeader"in c&&is.forEach(o,function(b,p){typeof s>"u"&&p.toLowerCase()==="content-type"?delete o[p]:c.setRequestHeader(p,b)}),is.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&a!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(b){c&&(c.abort(),i(b),c=null)}),s||(s=null),c.send(s)})}});var Kh=E((lA,Xh)=>{"use strict";var en=1e3,tn=en*60,rn=tn*60,Cr=rn*24,hS=Cr*7,dS=Cr*365.25;Xh.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return pS(r);if(t==="number"&&isFinite(r))return e.long?yS(r):mS(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function pS(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*dS;case"weeks":case"week":case"w":return t*hS;case"days":case"day":case"d":return t*Cr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*rn;case"minutes":case"minute":case"mins":case"min":case"m":return t*tn;case"seconds":case"second":case"secs":case"sec":case"s":return t*en;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function mS(r){var e=Math.abs(r);return e>=Cr?Math.round(r/Cr)+"d":e>=rn?Math.round(r/rn)+"h":e>=tn?Math.round(r/tn)+"m":e>=en?Math.round(r/en)+"s":r+"ms"}function yS(r){var e=Math.abs(r);return e>=Cr?ss(r,e,Cr,"day"):e>=rn?ss(r,e,rn,"hour"):e>=tn?ss(r,e,tn,"minute"):e>=en?ss(r,e,en,"second"):r+" ms"}function ss(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Ia=E((fA,Yh)=>{"use strict";function ES(r){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=i,t.enabled=o,t.humanize=Kh(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=e;function t(u){let f,h=null,d,m;function b(...p){if(!b.enabled)return;let w=b,k=Number(new Date),x=k-(f||k);w.diff=x,w.prev=f,w.curr=k,f=k,p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let C=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(O,z)=>{if(O==="%%")return"%";C++;let G=t.formatters[z];if(typeof G=="function"){let I=p[C];O=G.call(w,I),p.splice(C,1),C--}return O}),t.formatArgs.call(w,p),(w.log||t.log).apply(w,p)}return b.namespace=u,b.useColors=t.useColors(),b.color=t.selectColor(u),b.extend=n,b.destroy=t.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==t.namespaces&&(d=t.namespaces,m=t.enabled(u)),m),set:p=>{h=p}}),typeof t.init=="function"&&t.init(b),b}function n(u,f){let h=t(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let f,h=(typeof u=="string"?u:"").split(/[\s,]+/),d=h.length;for(f=0;f<d;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...t.names.map(a),...t.skips.map(a).map(f=>"-"+f)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=t.skips.length;f<h;f++)if(t.skips[f].test(u))return!1;for(f=0,h=t.names.length;f<h;f++)if(t.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Yh.exports=ES});var Jh=E((Ke,os)=>{"use strict";Ke.formatArgs=_S;Ke.save=bS;Ke.load=vS;Ke.useColors=gS;Ke.storage=SS();Ke.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ke.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gS(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function _S(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+os.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Ke.log=console.debug||console.log||(()=>{});function bS(r){try{r?Ke.storage.setItem("debug",r):Ke.storage.removeItem("debug")}catch{}}function vS(){let r;try{r=Ke.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function SS(){try{return localStorage}catch{}}os.exports=Ia()(Ke);var{formatters:wS}=os.exports;wS.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Qh=E((hA,Zh)=>{"use strict";Zh.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var rd=E((dA,td)=>{"use strict";var RS=require("os"),ed=require("tty"),rt=Qh(),{env:ye}=process,Xt;rt("no-color")||rt("no-colors")||rt("color=false")||rt("color=never")?Xt=0:(rt("color")||rt("colors")||rt("color=true")||rt("color=always"))&&(Xt=1);"FORCE_COLOR"in ye&&(ye.FORCE_COLOR==="true"?Xt=1:ye.FORCE_COLOR==="false"?Xt=0:Xt=ye.FORCE_COLOR.length===0?1:Math.min(parseInt(ye.FORCE_COLOR,10),3));function Na(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Aa(r,e){if(Xt===0)return 0;if(rt("color=16m")||rt("color=full")||rt("color=truecolor"))return 3;if(rt("color=256"))return 2;if(r&&!e&&Xt===void 0)return 0;let t=Xt||0;if(ye.TERM==="dumb")return t;if(process.platform==="win32"){let n=RS.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ye)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ye)||ye.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in ye)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ye.TEAMCITY_VERSION)?1:0;if(ye.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ye){let n=parseInt((ye.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ye.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ye.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ye.TERM)||"COLORTERM"in ye?1:t}function TS(r){let e=Aa(r,r&&r.isTTY);return Na(e)}td.exports={supportsColor:TS,stdout:Na(Aa(!0,ed.isatty(1))),stderr:Na(Aa(!0,ed.isatty(2)))}});var id=E((Se,cs)=>{"use strict";var xS=require("tty"),as=require("util");Se.init=kS;Se.log=NS;Se.formatArgs=CS;Se.save=AS;Se.load=DS;Se.useColors=OS;Se.destroy=as.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Se.colors=[6,2,3,4,5,1];try{let r=rd();r&&(r.stderr||r).level>=2&&(Se.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Se.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function OS(){return"colors"in Se.inspectOpts?!!Se.inspectOpts.colors:xS.isatty(process.stderr.fd)}function CS(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+cs.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=IS()+e+" "+r[0]}function IS(){return Se.inspectOpts.hideDate?"":new Date().toISOString()+" "}function NS(...r){return process.stderr.write(as.format(...r)+`
`)}function AS(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function DS(){return process.env.DEBUG}function kS(r){r.inspectOpts={};let e=Object.keys(Se.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=Se.inspectOpts[e[t]]}cs.exports=Ia()(Se);var{formatters:nd}=cs.exports;nd.o=function(r){return this.inspectOpts.colors=this.useColors,as.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};nd.O=function(r){return this.inspectOpts.colors=this.useColors,as.inspect(r,this.inspectOpts)}});var sd=E((pA,Da)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Da.exports=Jh():Da.exports=id()});var ad=E((mA,od)=>{"use strict";var Qn;od.exports=function(){if(!Qn){try{Qn=sd()("follow-redirects")}catch{}typeof Qn!="function"&&(Qn=function(){})}Qn.apply(null,arguments)}});var Ba=E((yA,qa)=>{"use strict";var Ir=require("url"),ka=Ir.URL,LS=require("http"),PS=require("https"),Pa=require("stream").Writable,ld=require("assert"),fd=ad(),Ua=["abort","aborted","connect","error","socket","timeout"],Ma=Object.create(null);Ua.forEach(function(r){Ma[r]=function(e,t,n){this._redirectable.emit(r,e,t,n)}});var US=ti("ERR_INVALID_URL","Invalid URL",TypeError),cd=ti("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),MS=ti("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),FS=ti("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),qS=ti("ERR_STREAM_WRITE_AFTER_END","write after end"),BS=Pa.prototype.destroy||dd;function $e(r,e){Pa.call(this),this._sanitizeOptions(r),this._options=r,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var t=this;this._onNativeResponse=function(n){t._processResponse(n)},this._performRequest()}$e.prototype=Object.create(Pa.prototype);$e.prototype.abort=function(){Fa(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};$e.prototype.destroy=function(r){return Fa(this._currentRequest,r),BS.call(this,r),this};$e.prototype.write=function(r,e,t){if(this._ending)throw new qS;if(!Nr(r)&&!GS(r))throw new TypeError("data should be a string, Buffer or Uint8Array");if(ei(e)&&(t=e,e=null),r.length===0){t&&t();return}this._requestBodyLength+r.length<=this._options.maxBodyLength?(this._requestBodyLength+=r.length,this._requestBodyBuffers.push({data:r,encoding:e}),this._currentRequest.write(r,e,t)):(this.emit("error",new FS),this.abort())};$e.prototype.end=function(r,e,t){if(ei(r)?(t=r,r=e=null):ei(e)&&(t=e,e=null),!r)this._ended=this._ending=!0,this._currentRequest.end(null,null,t);else{var n=this,i=this._currentRequest;this.write(r,e,function(){n._ended=!0,i.end(null,null,t)}),this._ending=!0}};$e.prototype.setHeader=function(r,e){this._options.headers[r]=e,this._currentRequest.setHeader(r,e)};$e.prototype.removeHeader=function(r){delete this._options.headers[r],this._currentRequest.removeHeader(r)};$e.prototype.setTimeout=function(r,e){var t=this;function n(o){o.setTimeout(r),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.emit("timeout"),s()},r),n(o)}function s(){t._timeout&&(clearTimeout(t._timeout),t._timeout=null),t.removeListener("abort",s),t.removeListener("error",s),t.removeListener("response",s),t.removeListener("close",s),e&&t.removeListener("timeout",e),t.socket||t._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(r){$e.prototype[r]=function(e,t){return this._currentRequest[r](e,t)}});["aborted","connection","socket"].forEach(function(r){Object.defineProperty($e.prototype,r,{get:function(){return this._currentRequest[r]}})});$e.prototype._sanitizeOptions=function(r){if(r.headers||(r.headers={}),r.host&&(r.hostname||(r.hostname=r.host),delete r.host),!r.pathname&&r.path){var e=r.path.indexOf("?");e<0?r.pathname=r.path:(r.pathname=r.path.substring(0,e),r.search=r.path.substring(e))}};$e.prototype._performRequest=function(){var r=this._options.protocol,e=this._options.nativeProtocols[r];if(!e){this.emit("error",new TypeError("Unsupported protocol "+r));return}if(this._options.agents){var t=r.slice(0,-1);this._options.agent=this._options.agents[t]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of Ua)n.on(i,Ma[i]);if(this._currentUrl=/^\//.test(this._options.path)?Ir.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(l){if(n===o._currentRequest)if(l)o.emit("error",l);else if(s<a.length){var u=a[s++];n.finished||n.write(u.data,u.encoding,c)}else o._ended&&n.end()})()}};$e.prototype._processResponse=function(r){var e=r.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:r.headers,statusCode:e});var t=r.headers.location;if(!t||this._options.followRedirects===!1||e<300||e>=400){r.responseUrl=this._currentUrl,r.redirects=this._redirects,this.emit("response",r),this._requestBodyBuffers=[];return}if(Fa(this._currentRequest),r.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new MS);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:r.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],La(/^content-/i,this._options.headers));var o=La(/^host$/i,this._options.headers),a=Ir.parse(this._currentUrl),c=o||a.host,l=/^\w+:/.test(t)?this._currentUrl:Ir.format(Object.assign(a,{host:c})),u;try{u=Ir.resolve(l,t)}catch(m){this.emit("error",new cd({cause:m}));return}fd("redirecting to",u),this._isRedirect=!0;var f=Ir.parse(u);if(Object.assign(this._options,f),(f.protocol!==a.protocol&&f.protocol!=="https:"||f.host!==c&&!jS(f.host,c))&&La(/^(?:authorization|cookie)$/i,this._options.headers),ei(i)){var h={headers:r.headers,statusCode:e},d={url:l,method:s,headers:n};try{i(this._options,h,d)}catch(m){this.emit("error",m);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(m){this.emit("error",new cd({cause:m}))}};function hd(r){var e={maxRedirects:21,maxBodyLength:10485760},t={};return Object.keys(r).forEach(function(n){var i=n+":",s=t[i]=r[n],o=e[n]=Object.create(s);function a(l,u,f){if(Nr(l)){var h;try{h=ud(new ka(l))}catch{h=Ir.parse(l)}if(!Nr(h.protocol))throw new US({input:l});l=h}else ka&&l instanceof ka?l=ud(l):(f=u,u=l,l={protocol:i});return ei(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=t,!Nr(u.host)&&!Nr(u.hostname)&&(u.hostname="::1"),ld.equal(u.protocol,i,"protocol mismatch"),fd("options",u),new $e(u,f)}function c(l,u,f){var h=o.request(l,u,f);return h.end(),h}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function dd(){}function ud(r){var e={protocol:r.protocol,hostname:r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,hash:r.hash,search:r.search,pathname:r.pathname,path:r.pathname+r.search,href:r.href};return r.port!==""&&(e.port=Number(r.port)),e}function La(r,e){var t;for(var n in e)r.test(n)&&(t=e[n],delete e[n]);return t===null||typeof t>"u"?void 0:String(t).trim()}function ti(r,e,t){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=r,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(t||Error),n.prototype.constructor=n,n.prototype.name="Error ["+r+"]",n}function Fa(r,e){for(var t of Ua)r.removeListener(t,Ma[t]);r.on("error",dd),r.destroy(e)}function jS(r,e){ld(Nr(r)&&Nr(e));var t=r.length-e.length-1;return t>0&&r[t]==="."&&r.endsWith(e)}function Nr(r){return typeof r=="string"||r instanceof String}function ei(r){return typeof r=="function"}function GS(r){return typeof r=="object"&&"length"in r}qa.exports=hd({http:LS,https:PS});qa.exports.wrap=hd});var ja=E((EA,$S)=>{$S.exports={name:"axios",version:"0.21.2",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var _d=E((gA,gd)=>{"use strict";var ri=Me(),pd=Ta(),HS=xa(),zS=Qi(),VS=require("http"),WS=require("https"),XS=Ba().http,KS=Ba().https,md=require("url"),YS=require("zlib"),JS=ja(),us=rs(),Ga=ts(),yd=/https:?/;function Ed(r,e,t){if(r.hostname=e.host,r.host=e.host,r.port=e.port,r.path=t,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");r.headers["Proxy-Authorization"]="Basic "+n}r.beforeRedirect=function(s){s.headers.host=s.host,Ed(s,e,s.href)}}gd.exports=function(e){return new Promise(function(n,i){var s=function(U){n(U)},o=function(U){i(U)},a=e.data,c=e.headers;if("User-Agent"in c||"user-agent"in c?!c["User-Agent"]&&!c["user-agent"]&&(delete c["User-Agent"],delete c["user-agent"]):c["User-Agent"]="axios/"+JS.version,a&&!ri.isStream(a)){if(!Buffer.isBuffer(a))if(ri.isArrayBuffer(a))a=Buffer.from(new Uint8Array(a));else if(ri.isString(a))a=Buffer.from(a,"utf-8");else return o(us("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));c["Content-Length"]=a.length}var l=void 0;if(e.auth){var u=e.auth.username||"",f=e.auth.password||"";l=u+":"+f}var h=HS(e.baseURL,e.url),d=md.parse(h),m=d.protocol||"http:";if(!l&&d.auth){var b=d.auth.split(":"),p=b[0]||"",w=b[1]||"";l=p+":"+w}l&&delete c.Authorization;var k=yd.test(m),x=k?e.httpsAgent:e.httpAgent,C={path:zS(d.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:c,agent:x,agents:{http:e.httpAgent,https:e.httpsAgent},auth:l};e.socketPath?C.socketPath=e.socketPath:(C.hostname=d.hostname,C.port=d.port);var L=e.proxy;if(!L&&L!==!1){var O=m.slice(0,-1)+"_proxy",z=process.env[O]||process.env[O.toUpperCase()];if(z){var G=md.parse(z),I=process.env.no_proxy||process.env.NO_PROXY,N=!0;if(I){var j=I.split(",").map(function(U){return U.trim()});N=!j.some(function(U){return U?U==="*"||U[0]==="."&&d.hostname.substr(d.hostname.length-U.length)===U?!0:d.hostname===U:!1})}if(N&&(L={host:G.hostname,port:G.port,protocol:G.protocol},G.auth)){var X=G.auth.split(":");L.auth={username:X[0],password:X[1]}}}}L&&(C.headers.host=d.hostname+(d.port?":"+d.port:""),Ed(C,L,m+"//"+d.hostname+(d.port?":"+d.port:"")+C.path));var V,J=k&&(L?yd.test(L.protocol):!0);e.transport?V=e.transport:e.maxRedirects===0?V=J?WS:VS:(e.maxRedirects&&(C.maxRedirects=e.maxRedirects),V=J?KS:XS),e.maxBodyLength>-1&&(C.maxBodyLength=e.maxBodyLength);var B=V.request(C,function(U){if(!B.aborted){var H=U,le=U.req||B;if(U.statusCode!==204&&le.method!=="HEAD"&&e.decompress!==!1)switch(U.headers["content-encoding"]){case"gzip":case"compress":case"deflate":H=H.pipe(YS.createUnzip()),delete U.headers["content-encoding"];break}var Re={status:U.statusCode,statusText:U.statusMessage,headers:U.headers,config:e,request:le};if(e.responseType==="stream")Re.data=H,pd(s,o,Re);else{var R=[],A=0;H.on("data",function(W){R.push(W),A+=W.length,e.maxContentLength>-1&&A>e.maxContentLength&&(H.destroy(),o(us("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,le)))}),H.on("error",function(W){B.aborted||o(Ga(W,e,null,le))}),H.on("end",function(){var W=Buffer.concat(R);e.responseType!=="arraybuffer"&&(W=W.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(W=ri.stripBOM(W))),Re.data=W,pd(s,o,Re)})}}});if(B.on("error",function(U){B.aborted&&U.code!=="ERR_FR_TOO_MANY_REDIRECTS"||o(Ga(U,e,null,B))}),e.timeout){var K=parseInt(e.timeout,10);if(isNaN(K)){o(us("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",B));return}B.setTimeout(K,function(){B.abort(),o(us("timeout of "+K+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",B))})}e.cancelToken&&e.cancelToken.promise.then(function(U){B.aborted||(B.abort(),o(U))}),ri.isStream(a)?a.on("error",function(U){o(Ga(U,e,null,B))}).pipe(B):B.end(a)})}});var fs=E((_A,Sd)=>{"use strict";var Fe=Me(),bd=Nh(),ZS=ts(),QS={"Content-Type":"application/x-www-form-urlencoded"};function vd(r,e){!Fe.isUndefined(r)&&Fe.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function ew(){var r;return typeof XMLHttpRequest<"u"?r=Wh():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=_d()),r}var ls={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:ew(),transformRequest:[function(e,t){return bd(t,"Accept"),bd(t,"Content-Type"),Fe.isFormData(e)||Fe.isArrayBuffer(e)||Fe.isBuffer(e)||Fe.isStream(e)||Fe.isFile(e)||Fe.isBlob(e)?e:Fe.isArrayBufferView(e)?e.buffer:Fe.isURLSearchParams(e)?(vd(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Fe.isObject(e)||t&&t["Content-Type"]==="application/json"?(vd(t,"application/json"),JSON.stringify(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Fe.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?ZS(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};ls.headers={common:{Accept:"application/json, text/plain, */*"}};Fe.forEach(["delete","get","head"],function(e){ls.headers[e]={}});Fe.forEach(["post","put","patch"],function(e){ls.headers[e]=Fe.merge(QS)});Sd.exports=ls});var Rd=E((bA,wd)=>{"use strict";var tw=Me(),rw=fs();wd.exports=function(e,t,n){var i=this||rw;return tw.forEach(n,function(o){e=o.call(i,e,t)}),e}});var $a=E((vA,Td)=>{"use strict";Td.exports=function(e){return!!(e&&e.__CANCEL__)}});var Cd=E((SA,Od)=>{"use strict";var xd=Me(),Ha=Rd(),nw=$a(),iw=fs();function za(r){r.cancelToken&&r.cancelToken.throwIfRequested()}Od.exports=function(e){za(e),e.headers=e.headers||{},e.data=Ha.call(e,e.data,e.headers,e.transformRequest),e.headers=xd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),xd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||iw.adapter;return t(e).then(function(i){return za(e),i.data=Ha.call(e,i.data,i.headers,e.transformResponse),i},function(i){return nw(i)||(za(e),i&&i.response&&(i.response.data=Ha.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var Va=E((wA,Id)=>{"use strict";var xe=Me();Id.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(h,d){return xe.isPlainObject(h)&&xe.isPlainObject(d)?xe.merge(h,d):xe.isPlainObject(d)?xe.merge({},d):xe.isArray(d)?d.slice():d}function l(h){xe.isUndefined(t[h])?xe.isUndefined(e[h])||(n[h]=c(void 0,e[h])):n[h]=c(e[h],t[h])}xe.forEach(i,function(d){xe.isUndefined(t[d])||(n[d]=c(void 0,t[d]))}),xe.forEach(s,l),xe.forEach(o,function(d){xe.isUndefined(t[d])?xe.isUndefined(e[d])||(n[d]=c(void 0,e[d])):n[d]=c(void 0,t[d])}),xe.forEach(a,function(d){d in t?n[d]=c(e[d],t[d]):d in e&&(n[d]=c(void 0,e[d]))});var u=i.concat(s).concat(o).concat(a),f=Object.keys(e).concat(Object.keys(t)).filter(function(d){return u.indexOf(d)===-1});return xe.forEach(f,l),n}});var Ld=E((RA,kd)=>{"use strict";var Ad=ja(),Wa={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){Wa[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var Nd={},sw=Ad.version.split(".");function Dd(r,e){for(var t=e?e.split("."):sw,n=r.split("."),i=0;i<3;i++){if(t[i]>n[i])return!0;if(t[i]<n[i])return!1}return!1}Wa.transitional=function(e,t,n){var i=t&&Dd(t);function s(o,a){return"[Axios v"+Ad.version+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,c){if(e===!1)throw new Error(s(a," has been removed in "+t));return i&&!Nd[a]&&(Nd[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,c):!0}};function ow(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=r[s],c=a===void 0||o(a,s,r);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(t!==!0)throw Error("Unknown option "+s)}}kd.exports={isOlderVersion:Dd,assertOptions:ow,validators:Wa}});var Bd=E((TA,qd)=>{"use strict";var Md=Me(),aw=Qi(),Pd=Ch(),Ud=Cd(),hs=Va(),Fd=Ld(),nn=Fd.validators;function ni(r){this.defaults=r,this.interceptors={request:new Pd,response:new Pd}}ni.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=hs(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Fd.assertOptions(t,{silentJSONParsing:nn.transitional(nn.boolean,"1.0.0"),forcedJSONParsing:nn.transitional(nn.boolean,"1.0.0"),clarifyTimeoutError:nn.transitional(nn.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(i=i&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var s=[];this.interceptors.response.forEach(function(h){s.push(h.fulfilled,h.rejected)});var o;if(!i){var a=[Ud,void 0];for(Array.prototype.unshift.apply(a,n),a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(f){u(f);break}}try{o=Ud(c)}catch(f){return Promise.reject(f)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};ni.prototype.getUri=function(e){return e=hs(this.defaults,e),aw(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Md.forEach(["delete","get","head","options"],function(e){ni.prototype[e]=function(t,n){return this.request(hs(n||{},{method:e,url:t,data:(n||{}).data}))}});Md.forEach(["post","put","patch"],function(e){ni.prototype[e]=function(t,n,i){return this.request(hs(i||{},{method:e,url:t,data:n}))}});qd.exports=ni});var Ka=E((xA,jd)=>{"use strict";function Xa(r){this.message=r}Xa.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Xa.prototype.__CANCEL__=!0;jd.exports=Xa});var $d=E((OA,Gd)=>{"use strict";var cw=Ka();function ds(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;r(function(i){t.reason||(t.reason=new cw(i),e(t.reason))})}ds.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ds.source=function(){var e,t=new ds(function(i){e=i});return{token:t,cancel:e}};Gd.exports=ds});var zd=E((CA,Hd)=>{"use strict";Hd.exports=function(e){return function(n){return e.apply(null,n)}}});var Wd=E((IA,Vd)=>{"use strict";Vd.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var Yd=E((NA,Ya)=>{"use strict";var Xd=Me(),uw=ba(),ps=Bd(),lw=Va(),fw=fs();function Kd(r){var e=new ps(r),t=uw(ps.prototype.request,e);return Xd.extend(t,ps.prototype,e),Xd.extend(t,e),t}var lt=Kd(fw);lt.Axios=ps;lt.create=function(e){return Kd(lw(lt.defaults,e))};lt.Cancel=Ka();lt.CancelToken=$d();lt.isCancel=$a();lt.all=function(e){return Promise.all(e)};lt.spread=zd();lt.isAxiosError=Wd();Ya.exports=lt;Ya.exports.default=lt});var Ja=E((AA,Jd)=>{"use strict";Jd.exports=Yd()});function Oe(r,e=1e4){let t=s=>s,n=process.env.NX_CLOUD_API||r.url||"https://cloud.nx.app",i=Dt?Dt:r.accessToken;if(!i)throw new Error("Unable to authenticate. Either define accessToken in nx.json or set the NX_CLOUD_ACCESS_TOKEN env variable.");if(r.customProxyConfigPath){let{nxCloudProxyConfig:s}=require((0,Zd.join)(process.cwd(),r.customProxyConfigPath));t=s??t}return hw.create(t({baseURL:n,timeout:gt?Yn:e,headers:{authorization:i,"Nx-Cloud-Client-Version":r.clientVersion||"unknown"}}))}async function ec(r,e){let t=new Date,n=await e();return P&&console.log(`${r}: ${new Date().getTime()-t.getTime()}`),n}async function ce(r,e=Ki){try{return await r()}catch(t){let n=t.response&&t.response.status||t.code;(n===401||n===403)&&(e=0);let i=t.response?t.response.data.message?t.response.data.message:t.response.data:t.message;if(e===0)throw typeof i!="string"&&(i=t.message),P&&Za.note({title:`Connection to Nx Cloud failed with status code ${n}`,bodyLines:[`${n}: ${i}`]}),new Qa("failure",dw(n),t);if(n==429){if(!ms){let s=1e4+(Ki+1-e)*6e4*Math.random();Za.note({title:`Received Code ${n}. ${i} Retrying in ${s}ms.`}),ms=Ge(s)}await ms,ms=null}else{let s=1e3+(Ki+1-e)*4e3*Math.random();P&&Za.note({title:`Received Code ${n}. Retrying in ${s}ms.`}),await Ge(s)}return ce(r,e-1)}}function dw(r){let e=`${r}:`;switch(r){case 403:return`${e} Access to resource is not authorized.`;case 404:return`${e} Cannot find requested resource.`;case 500:return`${e} Unexpected server error.`;case"ECONNABORTED":case"ETIMEOUT":return`${e} Connection timed out, check for other network problems.`;case"ECONNRESET":return`${e} The connection to Nx Cloud was closed suddenly.`;case"ECONNREFUSED":return`${e} Cannot connect to server. Please check that you have the correct server address and port number.`;case"ENOTFOUND":return`${e} DNS error due to invalid host. Are you accessing Nx Cloud from a network proxy?`;case"SELF_SIGNED_CERT_IN_CHAIN":return`${e} Found a self-signed cert in certificate chain. Ensure you have verified trust for all certs in your network.`;default:return`${e} Unable to connect to Nx Cloud.`}}var Zd,Za,hw,Qa,ms,_t=q(()=>{"use strict";Zd=require("path");re();Zr();({output:Za}=Y()),hw=Ja(),Qa=class{constructor(e,t,n){this.type=e;this.message=t;this.axiosException=n}};ms=null});function Kt(r){pw()?(process.stdout.write(`   ${tc(r)}`),bt.addNewline(),bt.addNewline()):mw()?(bt.addNewline(),process.stdout.write(`${tc(r)}`),bt.addNewline(),bt.addNewline()):(process.stdout.write(`  ${tc(r)}`),bt.addNewline(),bt.addNewline())}function pw(){try{return ie("nx/src/tasks-runner/life-cycles/dynamic-run-many-terminal-output-life-cycle"),!0}catch{try{return ie("@nrwl/workspace/src/tasks-runner/life-cycles/dynamic-run-many-terminal-output-life-cycle"),!0}catch{return!1}}}function tc(r){let e;if(typeof bt.dim=="function")return bt.dim(r);try{return bt.colors.gray(r)}catch{return r}}function mw(){return process.argv.indexOf("run-many")===-1&&process.argv.indexOf("affected")===-1}var bt,ii=q(()=>{"use strict";Rr();({output:bt}=Y())});var rc,Qd,Ce,ne,Ie,yw,Ew,sn,kt=q(()=>{"use strict";rc=require("perf_hooks");_t();re();ii();Qd=[],Ce=r=>{let e=rc.performance.now();return{recordMetric:n=>{let i=rc.performance.now();n.durationMs=i-e,n.entryType=r,Qd.push(n)}}},ne=r=>{var e;return{success:((e=r==null?void 0:r.status)==null?void 0:e.toString().startsWith("2"))??!1,statusCode:(r==null?void 0:r.status)??-1}},Ie={success:!1,statusCode:-1},yw=.1,Ew=.01,sn=r=>{let e;me()?e=yw:e=Ew;try{return yh||Math.random()<e?(P&&Kt("Submitting runner metrics for this run."),Oe(r).post("/nx-cloud/save-metrics",{entries:Qd}).catch(n=>{})):Promise.resolve()}catch{}}});function ys(r){return r[r.length-1]==="/"?r.substr(0,r.length-1):r}var nc=q(()=>{"use strict"});var gw,Yt,Es=q(()=>{"use strict";_t();({output:gw}=Y()),Yt=class{constructor(e){this.apiAxiosInstance=Oe(e)}async reportError(e){try{await ce(()=>this.apiAxiosInstance.post("/nx-cloud/report-client-error",{message:e}))}catch(t){gw.warn({title:`Unable to record the following error: '${e}'`,bodyLines:[t.message]})}}}});var an,on,Jt,gs=q(()=>{"use strict";an=require("crypto"),on=require("fs"),Jt=class{constructor(e){e&&(this.encryptionKey=this.to32bytes(e))}to32bytes(e){let t=e;for(;t.length<32;)t+=e;return Buffer.from(t).slice(0,32)}hasEncryption(){return!!this.encryptionKey}encryptFile(e){let t=(0,an.randomBytes)(16),n=(0,an.createCipheriv)("aes-256-cbc",this.encryptionKey,t),i=(0,on.readFileSync)(e),s=n.update(i),o=Buffer.concat([t,s,n.final()]);(0,on.writeFileSync)(e,o)}decryptFile(e){let t=(0,on.readFileSync)(e);try{let n=(0,an.createDecipheriv)("aes-256-cbc",this.encryptionKey,t.slice(0,16)),i=t.slice(16),s=n.update(i),o=Buffer.concat([s,n.final()]);(0,on.writeFileSync)(e,o)}catch{throw new Error("Could not decrypt the artifact. Please check your encryption key.")}}}});var cn=E((zA,tp)=>{"use strict";var ep=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);tp.exports=r=>r?Object.keys(r).map(e=>[ep.has(e)?ep.get(e):e,r[e]]).reduce((e,t)=>(e[t[0]]=t[1],e),Object.create(null)):{}});var ln=E((VA,lp)=>{"use strict";var rp=typeof process=="object"&&process?process:{stdout:null,stderr:null},_w=require("events"),np=require("stream"),ip=require("string_decoder").StringDecoder,Lt=Symbol("EOF"),Pt=Symbol("maybeEmitEnd"),Zt=Symbol("emittedEnd"),_s=Symbol("emittingEnd"),si=Symbol("emittedError"),bs=Symbol("closed"),sp=Symbol("read"),vs=Symbol("flush"),op=Symbol("flushChunk"),He=Symbol("encoding"),Ut=Symbol("decoder"),Ss=Symbol("flowing"),oi=Symbol("paused"),un=Symbol("resume"),Ee=Symbol("bufferLength"),ic=Symbol("bufferPush"),sc=Symbol("bufferShift"),Ne=Symbol("objectMode"),Ae=Symbol("destroyed"),oc=Symbol("emitData"),ap=Symbol("emitEnd"),ac=Symbol("emitEnd2"),Mt=Symbol("async"),ai=r=>Promise.resolve().then(r),cp=global._MP_NO_ITERATOR_SYMBOLS_!=="1",bw=cp&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),vw=cp&&Symbol.iterator||Symbol("iterator not implemented"),Sw=r=>r==="end"||r==="finish"||r==="prefinish",ww=r=>r instanceof ArrayBuffer||typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,Rw=r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),ws=class{constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[un](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},cc=class extends ws{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=i=>t.emit("error",i),e.on("error",this.proxyErrors)}};lp.exports=class up extends np{constructor(e){super(),this[Ss]=!1,this[oi]=!1,this.pipes=[],this.buffer=[],this[Ne]=e&&e.objectMode||!1,this[Ne]?this[He]=null:this[He]=e&&e.encoding||null,this[He]==="buffer"&&(this[He]=null),this[Mt]=e&&!!e.async||!1,this[Ut]=this[He]?new ip(this[He]):null,this[Lt]=!1,this[Zt]=!1,this[_s]=!1,this[bs]=!1,this[si]=null,this.writable=!0,this.readable=!0,this[Ee]=0,this[Ae]=!1}get bufferLength(){return this[Ee]}get encoding(){return this[He]}set encoding(e){if(this[Ne])throw new Error("cannot set encoding in objectMode");if(this[He]&&e!==this[He]&&(this[Ut]&&this[Ut].lastNeed||this[Ee]))throw new Error("cannot change encoding");this[He]!==e&&(this[Ut]=e?new ip(e):null,this.buffer.length&&(this.buffer=this.buffer.map(t=>this[Ut].write(t)))),this[He]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ne]}set objectMode(e){this[Ne]=this[Ne]||!!e}get async(){return this[Mt]}set async(e){this[Mt]=this[Mt]||!!e}write(e,t,n){if(this[Lt])throw new Error("write after end");if(this[Ae])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(n=t,t="utf8"),t||(t="utf8");let i=this[Mt]?ai:s=>s();return!this[Ne]&&!Buffer.isBuffer(e)&&(Rw(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):ww(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Ne]?(this.flowing&&this[Ee]!==0&&this[vs](!0),this.flowing?this.emit("data",e):this[ic](e),this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing):e.length?(typeof e=="string"&&!(t===this[He]&&!this[Ut].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[He]&&(e=this[Ut].write(e)),this.flowing&&this[Ee]!==0&&this[vs](!0),this.flowing?this.emit("data",e):this[ic](e),this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing):(this[Ee]!==0&&this.emit("readable"),n&&i(n),this.flowing)}read(e){if(this[Ae])return null;if(this[Ee]===0||e===0||e>this[Ee])return this[Pt](),null;this[Ne]&&(e=null),this.buffer.length>1&&!this[Ne]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Ee])]);let t=this[sp](e||null,this.buffer[0]);return this[Pt](),t}[sp](e,t){return e===t.length||e===null?this[sc]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[Ee]-=e),this.emit("data",t),!this.buffer.length&&!this[Lt]&&this.emit("drain"),t}end(e,t,n){return typeof e=="function"&&(n=e,e=null),typeof t=="function"&&(n=t,t="utf8"),e&&this.write(e,t),n&&this.once("end",n),this[Lt]=!0,this.writable=!1,(this.flowing||!this[oi])&&this[Pt](),this}[un](){this[Ae]||(this[oi]=!1,this[Ss]=!0,this.emit("resume"),this.buffer.length?this[vs]():this[Lt]?this[Pt]():this.emit("drain"))}resume(){return this[un]()}pause(){this[Ss]=!1,this[oi]=!0}get destroyed(){return this[Ae]}get flowing(){return this[Ss]}get paused(){return this[oi]}[ic](e){this[Ne]?this[Ee]+=1:this[Ee]+=e.length,this.buffer.push(e)}[sc](){return this.buffer.length&&(this[Ne]?this[Ee]-=1:this[Ee]-=this.buffer[0].length),this.buffer.shift()}[vs](e){do;while(this[op](this[sc]()));!e&&!this.buffer.length&&!this[Lt]&&this.emit("drain")}[op](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,t){if(this[Ae])return;let n=this[Zt];return t=t||{},e===rp.stdout||e===rp.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this.pipes.push(t.proxyErrors?new cc(this,e,t):new ws(this,e,t)),this[Mt]?ai(()=>this[un]()):this[un]()),e}unpipe(e){let t=this.pipes.find(n=>n.dest===e);t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let n=super.on(e,t);return e==="data"&&!this.pipes.length&&!this.flowing?this[un]():e==="readable"&&this[Ee]!==0?super.emit("readable"):Sw(e)&&this[Zt]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[si]&&(this[Mt]?ai(()=>t.call(this,this[si])):t.call(this,this[si])),n}get emittedEnd(){return this[Zt]}[Pt](){!this[_s]&&!this[Zt]&&!this[Ae]&&this.buffer.length===0&&this[Lt]&&(this[_s]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[bs]&&this.emit("close"),this[_s]=!1)}emit(e,t,...n){if(e!=="error"&&e!=="close"&&e!==Ae&&this[Ae])return;if(e==="data")return t?this[Mt]?ai(()=>this[oc](t)):this[oc](t):!1;if(e==="end")return this[ap]();if(e==="close"){if(this[bs]=!0,!this[Zt]&&!this[Ae])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[si]=t;let s=super.emit("error",t);return this[Pt](),s}else if(e==="resume"){let s=super.emit("resume");return this[Pt](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,t,...n);return this[Pt](),i}[oc](e){for(let n of this.pipes)n.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[Pt](),t}[ap](){this[Zt]||(this[Zt]=!0,this.readable=!1,this[Mt]?ai(()=>this[ac]()):this[ac]())}[ac](){if(this[Ut]){let t=this[Ut].end();if(t){for(let n of this.pipes)n.dest.write(t);super.emit("data",t)}}for(let t of this.pipes)t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Ne]||(e.dataLength=0);let t=this.promise();return this.on("data",n=>{e.push(n),this[Ne]||(e.dataLength+=n.length)}),t.then(()=>e)}concat(){return this[Ne]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ne]?Promise.reject(new Error("cannot concat in objectMode")):this[He]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(Ae,()=>t(new Error("stream destroyed"))),this.on("error",n=>t(n)),this.on("end",()=>e())})}[bw](){return{next:()=>{let t=this.read();if(t!==null)return Promise.resolve({done:!1,value:t});if(this[Lt])return Promise.resolve({done:!0});let n=null,i=null,s=l=>{this.removeListener("data",o),this.removeListener("end",a),i(l)},o=l=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[Lt]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(Ae,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[vw](){return{next:()=>{let t=this.read();return{value:t,done:t===null}}}}destroy(e){return this[Ae]?(e?this.emit("error",e):this.emit(Ae),this):(this[Ae]=!0,this.buffer.length=0,this[Ee]=0,typeof this.close=="function"&&!this[bs]&&this.close(),e?this.emit("error",e):this.emit(Ae),this)}static isStream(e){return!!e&&(e instanceof up||e instanceof np||e instanceof _w&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var hp=E((WA,fp)=>{"use strict";var Tw=require("zlib").constants||{ZLIB_VERNUM:4736};fp.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Tw))});var Rc=E(Ye=>{"use strict";var dc=require("assert"),Qt=require("buffer").Buffer,mp=require("zlib"),Ar=Ye.constants=hp(),xw=ln(),dp=Qt.concat,Dr=Symbol("_superWrite"),hn=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Ow=Symbol("opts"),ci=Symbol("flushFlag"),pp=Symbol("finishFlushFlag"),wc=Symbol("fullFlushFlag"),se=Symbol("handle"),Rs=Symbol("onError"),fn=Symbol("sawError"),uc=Symbol("level"),lc=Symbol("strategy"),fc=Symbol("ended"),XA=Symbol("_defaultFullFlush"),Ts=class extends xw{constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[fn]=!1,this[fc]=!1,this[Ow]=e,this[ci]=e.flush,this[pp]=e.finishFlush;try{this[se]=new mp[t](e)}catch(n){throw new hn(n)}this[Rs]=n=>{this[fn]||(this[fn]=!0,this.close(),this.emit("error",n))},this[se].on("error",n=>this[Rs](new hn(n))),this.once("end",()=>this.close)}close(){this[se]&&(this[se].close(),this[se]=null,this.emit("close"))}reset(){if(!this[fn])return dc(this[se],"zlib binding closed"),this[se].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[wc]),this.write(Object.assign(Qt.alloc(0),{[ci]:e})))}end(e,t,n){return e&&this.write(e,t),this.flush(this[pp]),this[fc]=!0,super.end(null,null,n)}get ended(){return this[fc]}write(e,t,n){if(typeof t=="function"&&(n=t,t="utf8"),typeof e=="string"&&(e=Qt.from(e,t)),this[fn])return;dc(this[se],"zlib binding closed");let i=this[se]._handle,s=i.close;i.close=()=>{};let o=this[se].close;this[se].close=()=>{},Qt.concat=l=>l;let a;try{let l=typeof e[ci]=="number"?e[ci]:this[ci];a=this[se]._processChunk(e,l),Qt.concat=dp}catch(l){Qt.concat=dp,this[Rs](new hn(l))}finally{this[se]&&(this[se]._handle=i,i.close=s,this[se].close=o,this[se].removeAllListeners("error"))}this[se]&&this[se].on("error",l=>this[Rs](new hn(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Dr](Qt.from(a[0]));for(let l=1;l<a.length;l++)c=this[Dr](a[l])}else c=this[Dr](Qt.from(a));return n&&n(),c}[Dr](e){return super.write(e)}},Ft=class extends Ts{constructor(e,t){e=e||{},e.flush=e.flush||Ar.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Ar.Z_FINISH,super(e,t),this[wc]=Ar.Z_FULL_FLUSH,this[uc]=e.level,this[lc]=e.strategy}params(e,t){if(!this[fn]){if(!this[se])throw new Error("cannot switch params when binding is closed");if(!this[se].params)throw new Error("not supported in this implementation");if(this[uc]!==e||this[lc]!==t){this.flush(Ar.Z_SYNC_FLUSH),dc(this[se],"zlib binding closed");let n=this[se].flush;this[se].flush=(i,s)=>{this.flush(i),s()};try{this[se].params(e,t)}finally{this[se].flush=n}this[se]&&(this[uc]=e,this[lc]=t)}}}},pc=class extends Ft{constructor(e){super(e,"Deflate")}},mc=class extends Ft{constructor(e){super(e,"Inflate")}},hc=Symbol("_portable"),yc=class extends Ft{constructor(e){super(e,"Gzip"),this[hc]=e&&!!e.portable}[Dr](e){return this[hc]?(this[hc]=!1,e[9]=255,super[Dr](e)):super[Dr](e)}},Ec=class extends Ft{constructor(e){super(e,"Gunzip")}},gc=class extends Ft{constructor(e){super(e,"DeflateRaw")}},_c=class extends Ft{constructor(e){super(e,"InflateRaw")}},bc=class extends Ft{constructor(e){super(e,"Unzip")}},xs=class extends Ts{constructor(e,t){e=e||{},e.flush=e.flush||Ar.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Ar.BROTLI_OPERATION_FINISH,super(e,t),this[wc]=Ar.BROTLI_OPERATION_FLUSH}},vc=class extends xs{constructor(e){super(e,"BrotliCompress")}},Sc=class extends xs{constructor(e){super(e,"BrotliDecompress")}};Ye.Deflate=pc;Ye.Inflate=mc;Ye.Gzip=yc;Ye.Gunzip=Ec;Ye.DeflateRaw=gc;Ye.InflateRaw=_c;Ye.Unzip=bc;typeof mp.BrotliCompress=="function"?(Ye.BrotliCompress=vc,Ye.BrotliDecompress=Sc):Ye.BrotliCompress=Ye.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var dn=E((JA,yp)=>{"use strict";var Cw=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;yp.exports=Cw!=="win32"?r=>r:r=>r&&r.replace(/\\/g,"/")});var Os=E((QA,Ep)=>{"use strict";var Iw=ln(),Tc=dn(),xc=Symbol("slurp");Ep.exports=class extends Iw{constructor(e,t,n){switch(super(),this.pause(),this.extended=t,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Tc(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Tc(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[xc](t),n&&this[xc](n,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-t),this.blockRemain=Math.max(0,i-t),this.ignore?!0:n>=t?super.write(e):super.write(e.slice(0,n))}[xc](e,t){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(t&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?Tc(e[n]):e[n])}}});var Oc=E(Cs=>{"use strict";Cs.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Cs.code=new Map(Array.from(Cs.name).map(r=>[r[1],r[0]]))});var vp=E((tD,bp)=>{"use strict";var Nw=(r,e)=>{if(Number.isSafeInteger(r))r<0?Dw(r,e):Aw(r,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Aw=(r,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=r&255,r=Math.floor(r/256)},Dw=(r,e)=>{e[0]=255;var t=!1;r=r*-1;for(var n=e.length;n>1;n--){var i=r&255;r=Math.floor(r/256),t?e[n-1]=gp(i):i===0?e[n-1]=0:(t=!0,e[n-1]=_p(i))}},kw=r=>{let e=r[0],t=e===128?Pw(r.slice(1,r.length)):e===255?Lw(r):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t},Lw=r=>{for(var e=r.length,t=0,n=!1,i=e-1;i>-1;i--){var s=r[i],o;n?o=gp(s):s===0?o=s:(n=!0,o=_p(s)),o!==0&&(t-=o*Math.pow(256,e-i-1))}return t},Pw=r=>{for(var e=r.length,t=0,n=e-1;n>-1;n--){var i=r[n];i!==0&&(t+=i*Math.pow(256,e-n-1))}return t},gp=r=>(255^r)&255,_p=r=>(255^r)+1&255;bp.exports={encode:Nw,parse:kw}});var mn=E((rD,wp)=>{"use strict";var Cc=Oc(),pn=require("path").posix,Sp=vp(),Ic=Symbol("slurp"),Je=Symbol("type"),Dc=class{constructor(e,t,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Je]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,t||0,n,i):e&&this.set(e)}decode(e,t,n,i){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=kr(e,t,100),this.mode=er(e,t+100,8),this.uid=er(e,t+108,8),this.gid=er(e,t+116,8),this.size=er(e,t+124,12),this.mtime=Nc(e,t+136,12),this.cksum=er(e,t+148,12),this[Ic](n),this[Ic](i,!0),this[Je]=kr(e,t+156,1),this[Je]===""&&(this[Je]="0"),this[Je]==="0"&&this.path.substr(-1)==="/"&&(this[Je]="5"),this[Je]==="5"&&(this.size=0),this.linkpath=kr(e,t+157,100),e.slice(t+257,t+265).toString()==="ustar\x0000")if(this.uname=kr(e,t+265,32),this.gname=kr(e,t+297,32),this.devmaj=er(e,t+329,8),this.devmin=er(e,t+337,8),e[t+475]!==0){let o=kr(e,t+345,155);this.path=o+"/"+this.path}else{let o=kr(e,t+345,130);o&&(this.path=o+"/"+this.path),this.atime=Nc(e,t+476,12),this.ctime=Nc(e,t+488,12)}let s=8*32;for(let o=t;o<t+148;o++)s+=e[o];for(let o=t+156;o<t+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[Ic](e,t){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(t&&n==="path")&&(this[n]=e[n])}encode(e,t){if(e||(e=this.block=Buffer.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=Uw(this.path||"",n),s=i[0],o=i[1];this.needPax=i[2],this.needPax=Lr(e,t,100,s)||this.needPax,this.needPax=tr(e,t+100,8,this.mode)||this.needPax,this.needPax=tr(e,t+108,8,this.uid)||this.needPax,this.needPax=tr(e,t+116,8,this.gid)||this.needPax,this.needPax=tr(e,t+124,12,this.size)||this.needPax,this.needPax=Ac(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[Je].charCodeAt(0),this.needPax=Lr(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=Lr(e,t+265,32,this.uname)||this.needPax,this.needPax=Lr(e,t+297,32,this.gname)||this.needPax,this.needPax=tr(e,t+329,8,this.devmaj)||this.needPax,this.needPax=tr(e,t+337,8,this.devmin)||this.needPax,this.needPax=Lr(e,t+345,n,o)||this.needPax,e[t+475]!==0?this.needPax=Lr(e,t+345,155,o)||this.needPax:(this.needPax=Lr(e,t+345,130,o)||this.needPax,this.needPax=Ac(e,t+476,12,this.atime)||this.needPax,this.needPax=Ac(e,t+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=t;c<t+148;c++)a+=e[c];for(let c=t+156;c<t+512;c++)a+=e[c];return this.cksum=a,tr(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let t in e)e[t]!==null&&e[t]!==void 0&&(this[t]=e[t])}get type(){return Cc.name.get(this[Je])||this[Je]}get typeKey(){return this[Je]}set type(e){Cc.code.has(e)?this[Je]=Cc.code.get(e):this[Je]=e}},Uw=(r,e)=>{let n=r,i="",s,o=pn.parse(r).root||".";if(Buffer.byteLength(n)<100)s=[n,i,!1];else{i=pn.dirname(n),n=pn.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(i)<=e?s=[n.substr(0,99),i,!0]:(n=pn.join(pn.basename(i),n),i=pn.dirname(i));while(i!==o&&!s);s||(s=[r.substr(0,99),"",!0])}return s},kr=(r,e,t)=>r.slice(e,e+t).toString("utf8").replace(/\0.*/,""),Nc=(r,e,t)=>Mw(er(r,e,t)),Mw=r=>r===null?null:new Date(r*1e3),er=(r,e,t)=>r[e]&128?Sp.parse(r.slice(e,e+t)):qw(r,e,t),Fw=r=>isNaN(r)?null:r,qw=(r,e,t)=>Fw(parseInt(r.slice(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),Bw={12:8589934591,8:2097151},tr=(r,e,t,n)=>n===null?!1:n>Bw[t]||n<0?(Sp.encode(n,r.slice(e,e+t)),!0):(jw(r,e,t,n),!1),jw=(r,e,t,n)=>r.write(Gw(n,t),e,t,"ascii"),Gw=(r,e)=>$w(Math.floor(r).toString(8),e),$w=(r,e)=>(r.length===e-1?r:new Array(e-r.length-1).join("0")+r+" ")+"\0",Ac=(r,e,t,n)=>n===null?!1:tr(r,e,t,n.getTime()/1e3),Hw=new Array(156).join("\0"),Lr=(r,e,t,n)=>n===null?!1:(r.write(n+Hw,e,t,"utf8"),n.length!==Buffer.byteLength(n)||n.length>t);wp.exports=Dc});var Is=E((nD,Rp)=>{"use strict";var zw=mn(),Vw=require("path"),ui=class{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){let e=this.encodeBody();if(e==="")return null;let t=Buffer.byteLength(e),n=512*Math.ceil(1+t/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new zw({path:("PaxHeader/"+Vw.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,t,"utf8");for(let s=t+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let t=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+t+`
`,i=Buffer.byteLength(n),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+n}};ui.parse=(r,e,t)=>new ui(Ww(Xw(r),e),t);var Ww=(r,e)=>e?Object.keys(r).reduce((t,n)=>(t[n]=r[n],t),e):r,Xw=r=>r.replace(/\n$/,"").split(`
`).reduce(Kw,Object.create(null)),Kw=(r,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return r;e=e.substr((t+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return r;let s=n.join("=");return r[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,r};Rp.exports=ui});var yn=E((iD,Tp)=>{"use strict";Tp.exports=r=>{let e=r.length-1,t=-1;for(;e>-1&&r.charAt(e)==="/";)t=e,e--;return t===-1?r:r.slice(0,t)}});var Ns=E((sD,xp)=>{"use strict";xp.exports=r=>class extends r{warn(e,t,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=t instanceof Error&&t.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(t instanceof Error&&(n=Object.assign(t,n),t=t.message),this.emit("warn",n.tarCode,t,n)):t instanceof Error?this.emit("error",Object.assign(t,n)):this.emit("error",Object.assign(new Error(`${e}: ${t}`),n))}}});var Lc=E((aD,Op)=>{"use strict";var As=["|","<",">","?",":"],kc=As.map(r=>String.fromCharCode(61440+r.charCodeAt(0))),Yw=new Map(As.map((r,e)=>[r,kc[e]])),Jw=new Map(kc.map((r,e)=>[r,As[e]]));Op.exports={encode:r=>As.reduce((e,t)=>e.split(t).join(Yw.get(t)),r),decode:r=>kc.reduce((e,t)=>e.split(t).join(Jw.get(t)),r)}});var Pc=E((cD,Ip)=>{"use strict";var{isAbsolute:Zw,parse:Cp}=require("path").win32;Ip.exports=r=>{let e="",t=Cp(r);for(;Zw(r)||t.root;){let n=r.charAt(0)==="/"&&r.slice(0,4)!=="//?/"?"/":t.root;r=r.substr(n.length),e+=n,t=Cp(r)}return[e,r]}});var Ap=E((uD,Np)=>{"use strict";Np.exports=(r,e,t)=>(r&=4095,t&&(r=(r|384)&-19),e&&(r&256&&(r|=64),r&32&&(r|=8),r&4&&(r|=1)),r)});var zc=E((hD,zp)=>{"use strict";var Fp=ln(),qp=Is(),Bp=mn(),St=require("fs"),Dp=require("path"),vt=dn(),Qw=yn(),jp=(r,e)=>e?(r=vt(r).replace(/^\.(\/|$)/,""),Qw(e)+"/"+r):vt(r),eR=16*1024*1024,kp=Symbol("process"),Lp=Symbol("file"),Pp=Symbol("directory"),Mc=Symbol("symlink"),Up=Symbol("hardlink"),li=Symbol("header"),Ds=Symbol("read"),Fc=Symbol("lstat"),ks=Symbol("onlstat"),qc=Symbol("onread"),Bc=Symbol("onreadlink"),jc=Symbol("openfile"),Gc=Symbol("onopenfile"),rr=Symbol("close"),Ls=Symbol("mode"),$c=Symbol("awaitDrain"),Uc=Symbol("ondrain"),wt=Symbol("prefix"),Mp=Symbol("hadError"),Gp=Ns(),tR=Lc(),$p=Pc(),Hp=Ap(),Ps=Gp(class extends Fp{constructor(e,t){if(t=t||{},super(t),typeof e!="string")throw new TypeError("path is required");this.path=vt(e),this.portable=!!t.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=t.maxReadSize||eR,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=vt(t.cwd||process.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?vt(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=$p(this.path);i&&(this.path=s,n=i)}this.win32=!!t.win32||process.platform==="win32",this.win32&&(this.path=tR.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=vt(t.absolute||Dp.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[ks](this.statCache.get(this.absolute)):this[Fc]()}emit(e,...t){return e==="error"&&(this[Mp]=!0),super.emit(e,...t)}[Fc](){St.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[ks](t)})}[ks](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=nR(e),this.emit("stat",e),this[kp]()}[kp](){switch(this.type){case"File":return this[Lp]();case"Directory":return this[Pp]();case"SymbolicLink":return this[Mc]();default:return this.end()}}[Ls](e){return Hp(e,this.type==="Directory",this.portable)}[wt](e){return jp(e,this.prefix)}[li](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new Bp({path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,mode:this[Ls](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new qp({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[Pp](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[li](),this.end()}[Mc](){St.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Bc](t)})}[Bc](e){this.linkpath=vt(e),this[li](),this.end()}[Up](e){this.type="Link",this.linkpath=vt(Dp.relative(this.cwd,e)),this.stat.size=0,this[li](),this.end()}[Lp](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let t=this.linkCache.get(e);if(t.indexOf(this.cwd)===0)return this[Up](t)}this.linkCache.set(e,this.absolute)}if(this[li](),this.stat.size===0)return this.end();this[jc]()}[jc](){St.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[Gc](t)})}[Gc](e){if(this.fd=e,this[Mp])return this[rr]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Ds]()}[Ds](){let{fd:e,buf:t,offset:n,length:i,pos:s}=this;St.read(e,t,n,i,s,(o,a)=>{if(o)return this[rr](()=>this.emit("error",o));this[qc](a)})}[rr](e){St.close(this.fd,e)}[qc](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[rr](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[rr](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[Uc]():this[$c](()=>this[Uc]())}[$c](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let t=new Error("writing more data than expected");return t.path=this.absolute,this.emit("error",t)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Uc](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[rr](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Ds]()}}),Hc=class extends Ps{[Fc](){this[ks](St.lstatSync(this.absolute))}[Mc](){this[Bc](St.readlinkSync(this.absolute))}[jc](){this[Gc](St.openSync(this.absolute,"r"))}[Ds](){let e=!0;try{let{fd:t,buf:n,offset:i,length:s,pos:o}=this,a=St.readSync(t,n,i,s,o);this[qc](a),e=!1}finally{if(e)try{this[rr](()=>{})}catch{}}}[$c](e){e()}[rr](e){St.closeSync(this.fd),e()}},rR=Gp(class extends Fp{constructor(e,t){t=t||{},super(t),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=vt(e.path),this.mode=this[Ls](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=vt(e.linkpath),typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=$p(this.path);i&&(this.path=s,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new Bp({path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new qp({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[wt](this.path),linkpath:this.type==="Link"?this[wt](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[wt](e){return jp(e,this.prefix)}[Ls](e){return Hp(e,this.type==="Directory",this.portable)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Ps.Sync=Hc;Ps.Tar=rR;var nR=r=>r.isFile()?"File":r.isDirectory()?"Directory":r.isSymbolicLink()?"SymbolicLink":"Unsupported";zp.exports=Ps});var Wp=E((dD,Vp)=>{"use strict";Vp.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Vc=E((pD,Xp)=>{"use strict";Xp.exports=Z;Z.Node=Pr;Z.create=Z;function Z(r){var e=this;if(e instanceof Z||(e=new Z),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}Z.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};Z.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};Z.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};Z.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)sR(this,arguments[r]);return this.length};Z.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)oR(this,arguments[r]);return this.length};Z.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};Z.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};Z.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};Z.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};Z.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};Z.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};Z.prototype.map=function(r,e){e=e||this;for(var t=new Z,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};Z.prototype.mapReverse=function(r,e){e=e||this;for(var t=new Z,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};Z.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};Z.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};Z.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};Z.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};Z.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Z;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};Z.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Z;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};Z.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=iR(this,i,t[n]);return s};Z.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function iR(r,e,t){var n=e===r.head?new Pr(t,null,e,r):new Pr(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function sR(r,e){r.tail=new Pr(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function oR(r,e){r.head=new Pr(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Pr(r,e,t,n){if(!(this instanceof Pr))return new Pr(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Wp()(Z)}catch{}});var Hs=E((yD,tm)=>{"use strict";var Gs=class{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},aR=ln(),cR=Rc(),uR=Os(),tu=zc(),lR=tu.Sync,fR=tu.Tar,hR=Vc(),Kp=Buffer.alloc(1024),Fs=Symbol("onStat"),Us=Symbol("ended"),Rt=Symbol("queue"),En=Symbol("current"),Ur=Symbol("process"),Ms=Symbol("processing"),Yp=Symbol("processJob"),Tt=Symbol("jobs"),Wc=Symbol("jobDone"),qs=Symbol("addFSEntry"),Jp=Symbol("addTarEntry"),Jc=Symbol("stat"),Zc=Symbol("readdir"),Bs=Symbol("onreaddir"),js=Symbol("pipe"),Zp=Symbol("entry"),Xc=Symbol("entryOpt"),Qc=Symbol("writeEntryClass"),em=Symbol("write"),Kc=Symbol("ondrain"),$s=require("fs"),Qp=require("path"),dR=Ns(),Yc=dn(),ru=dR(class extends aR{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Yc(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Qc]=tu,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new cR.Gzip(e.gzip),this.zip.on("data",t=>super.write(t)),this.zip.on("end",t=>super.end()),this.zip.on("drain",t=>this[Kc]()),this.on("resume",t=>this.zip.resume())):this.on("drain",this[Kc]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:t=>!0,this[Rt]=new hR,this[Tt]=0,this.jobs=+e.jobs||4,this[Ms]=!1,this[Us]=!1}[em](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Us]=!0,this[Ur](),this}write(e){if(this[Us])throw new Error("write after end");return e instanceof uR?this[Jp](e):this[qs](e),this.flowing}[Jp](e){let t=Yc(Qp.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Gs(e.path,t,!1);n.entry=new fR(e,this[Xc](n)),n.entry.on("end",i=>this[Wc](n)),this[Tt]+=1,this[Rt].push(n)}this[Ur]()}[qs](e){let t=Yc(Qp.resolve(this.cwd,e));this[Rt].push(new Gs(e,t)),this[Ur]()}[Jc](e){e.pending=!0,this[Tt]+=1;let t=this.follow?"stat":"lstat";$s[t](e.absolute,(n,i)=>{e.pending=!1,this[Tt]-=1,n?this.emit("error",n):this[Fs](e,i)})}[Fs](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[Ur]()}[Zc](e){e.pending=!0,this[Tt]+=1,$s.readdir(e.absolute,(t,n)=>{if(e.pending=!1,this[Tt]-=1,t)return this.emit("error",t);this[Bs](e,n)})}[Bs](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[Ur]()}[Ur](){if(!this[Ms]){this[Ms]=!0;for(let e=this[Rt].head;e!==null&&this[Tt]<this.jobs;e=e.next)if(this[Yp](e.value),e.value.ignore){let t=e.next;this[Rt].removeNode(e),e.next=t}this[Ms]=!1,this[Us]&&!this[Rt].length&&this[Tt]===0&&(this.zip?this.zip.end(Kp):(super.write(Kp),super.end()))}}get[En](){return this[Rt]&&this[Rt].head&&this[Rt].head.value}[Wc](e){this[Rt].shift(),this[Tt]-=1,this[Ur]()}[Yp](e){if(!e.pending){if(e.entry){e===this[En]&&!e.piped&&this[js](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Fs](e,this.statCache.get(e.absolute)):this[Jc](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Bs](e,this.readdirCache.get(e.absolute)):this[Zc](e),!e.readdir))){if(e.entry=this[Zp](e),!e.entry){e.ignore=!0;return}e===this[En]&&!e.piped&&this[js](e)}}}[Xc](e){return{onwarn:(t,n,i)=>this.warn(t,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Zp](e){this[Tt]+=1;try{return new this[Qc](e.path,this[Xc](e)).on("end",()=>this[Wc](e)).on("error",t=>this.emit("error",t))}catch(t){this.emit("error",t)}}[Kc](){this[En]&&this[En].entry&&this[En].entry.resume()}[js](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qs](o+i)});let t=e.entry,n=this.zip;n?t.on("data",i=>{n.write(i)||t.pause()}):t.on("data",i=>{super.write(i)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),eu=class extends ru{constructor(e){super(e),this[Qc]=lR}pause(){}resume(){}[Jc](e){let t=this.follow?"statSync":"lstatSync";this[Fs](e,$s[t](e.absolute))}[Zc](e,t){this[Bs](e,$s.readdirSync(e.absolute))}[js](e){let t=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qs](o+i)}),n?t.on("data",i=>{n.write(i)}):t.on("data",i=>{super[em](i)})}};ru.Sync=eu;tm.exports=ru});var Tn=E(hi=>{"use strict";var pR=ln(),mR=require("events").EventEmitter,ze=require("fs"),su=ze.writev;if(!su){let r=process.binding("fs"),e=r.FSReqWrap||r.FSReqCallback;su=(t,n,i,s)=>{let o=(c,l)=>s(c,l,n),a=new e;a.oncomplete=o,r.writeBuffers(t,n,i,a)}}var wn=Symbol("_autoClose"),ft=Symbol("_close"),fi=Symbol("_ended"),te=Symbol("_fd"),rm=Symbol("_finished"),ir=Symbol("_flags"),nu=Symbol("_flush"),ou=Symbol("_handleChunk"),au=Symbol("_makeBuf"),Ks=Symbol("_mode"),zs=Symbol("_needDrain"),vn=Symbol("_onerror"),Rn=Symbol("_onopen"),iu=Symbol("_onread"),_n=Symbol("_onwrite"),sr=Symbol("_open"),qt=Symbol("_path"),Mr=Symbol("_pos"),xt=Symbol("_queue"),bn=Symbol("_read"),nm=Symbol("_readSize"),nr=Symbol("_reading"),Vs=Symbol("_remain"),im=Symbol("_size"),Ws=Symbol("_write"),gn=Symbol("_writing"),Xs=Symbol("_defaultFlag"),Sn=Symbol("_errored"),Ys=class extends pR{constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Sn]=!1,this[te]=typeof t.fd=="number"?t.fd:null,this[qt]=e,this[nm]=t.readSize||16*1024*1024,this[nr]=!1,this[im]=typeof t.size=="number"?t.size:1/0,this[Vs]=this[im],this[wn]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[te]=="number"?this[bn]():this[sr]()}get fd(){return this[te]}get path(){return this[qt]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[sr](){ze.open(this[qt],"r",(e,t)=>this[Rn](e,t))}[Rn](e,t){e?this[vn](e):(this[te]=t,this.emit("open",t),this[bn]())}[au](){return Buffer.allocUnsafe(Math.min(this[nm],this[Vs]))}[bn](){if(!this[nr]){this[nr]=!0;let e=this[au]();if(e.length===0)return process.nextTick(()=>this[iu](null,0,e));ze.read(this[te],e,0,e.length,null,(t,n,i)=>this[iu](t,n,i))}}[iu](e,t,n){this[nr]=!1,e?this[vn](e):this[ou](t,n)&&this[bn]()}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[vn](e){this[nr]=!0,this[ft](),this.emit("error",e)}[ou](e,t){let n=!1;return this[Vs]-=e,e>0&&(n=super.write(e<t.length?t.slice(0,e):t)),(e===0||this[Vs]<=0)&&(n=!1,this[ft](),super.end()),n}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[te]=="number"&&this[bn]();break;case"error":return this[Sn]?void 0:(this[Sn]=!0,super.emit(e,t));default:return super.emit(e,t)}}},cu=class extends Ys{[sr](){let e=!0;try{this[Rn](null,ze.openSync(this[qt],"r")),e=!1}finally{e&&this[ft]()}}[bn](){let e=!0;try{if(!this[nr]){this[nr]=!0;do{let t=this[au](),n=t.length===0?0:ze.readSync(this[te],t,0,t.length,null);if(!this[ou](n,t))break}while(!0);this[nr]=!1}e=!1}finally{e&&this[ft]()}}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.closeSync(e),this.emit("close")}}},Js=class extends mR{constructor(e,t){t=t||{},super(t),this.readable=!1,this.writable=!0,this[Sn]=!1,this[gn]=!1,this[fi]=!1,this[zs]=!1,this[xt]=[],this[qt]=e,this[te]=typeof t.fd=="number"?t.fd:null,this[Ks]=t.mode===void 0?438:t.mode,this[Mr]=typeof t.start=="number"?t.start:null,this[wn]=typeof t.autoClose=="boolean"?t.autoClose:!0;let n=this[Mr]!==null?"r+":"w";this[Xs]=t.flags===void 0,this[ir]=this[Xs]?n:t.flags,this[te]===null&&this[sr]()}emit(e,t){if(e==="error"){if(this[Sn])return;this[Sn]=!0}return super.emit(e,t)}get fd(){return this[te]}get path(){return this[qt]}[vn](e){this[ft](),this[gn]=!0,this.emit("error",e)}[sr](){ze.open(this[qt],this[ir],this[Ks],(e,t)=>this[Rn](e,t))}[Rn](e,t){this[Xs]&&this[ir]==="r+"&&e&&e.code==="ENOENT"?(this[ir]="w",this[sr]()):e?this[vn](e):(this[te]=t,this.emit("open",t),this[nu]())}end(e,t){return e&&this.write(e,t),this[fi]=!0,!this[gn]&&!this[xt].length&&typeof this[te]=="number"&&this[_n](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[fi]?(this.emit("error",new Error("write() after end()")),!1):this[te]===null||this[gn]||this[xt].length?(this[xt].push(e),this[zs]=!0,!1):(this[gn]=!0,this[Ws](e),!0)}[Ws](e){ze.write(this[te],e,0,e.length,this[Mr],(t,n)=>this[_n](t,n))}[_n](e,t){e?this[vn](e):(this[Mr]!==null&&(this[Mr]+=t),this[xt].length?this[nu]():(this[gn]=!1,this[fi]&&!this[rm]?(this[rm]=!0,this[ft](),this.emit("finish")):this[zs]&&(this[zs]=!1,this.emit("drain"))))}[nu](){if(this[xt].length===0)this[fi]&&this[_n](null,0);else if(this[xt].length===1)this[Ws](this[xt].pop());else{let e=this[xt];this[xt]=[],su(this[te],e,this[Mr],(t,n)=>this[_n](t,n))}}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.close(e,t=>t?this.emit("error",t):this.emit("close"))}}},uu=class extends Js{[sr](){let e;if(this[Xs]&&this[ir]==="r+")try{e=ze.openSync(this[qt],this[ir],this[Ks])}catch(t){if(t.code==="ENOENT")return this[ir]="w",this[sr]();throw t}else e=ze.openSync(this[qt],this[ir],this[Ks]);this[Rn](null,e)}[ft](){if(this[wn]&&typeof this[te]=="number"){let e=this[te];this[te]=null,ze.closeSync(e),this.emit("close")}}[Ws](e){let t=!0;try{this[_n](null,ze.writeSync(this[te],e,0,e.length,this[Mr])),t=!1}finally{if(t)try{this[ft]()}catch{}}}};hi.ReadStream=Ys;hi.ReadStreamSync=cu;hi.WriteStream=Js;hi.WriteStreamSync=uu});var io=E((_D,fm)=>{"use strict";var yR=Ns(),ER=mn(),gR=require("events"),_R=Vc(),bR=1024*1024,vR=Os(),sm=Is(),SR=Rc(),lu=Buffer.from([31,139]),nt=Symbol("state"),Fr=Symbol("writeEntry"),Bt=Symbol("readEntry"),fu=Symbol("nextEntry"),om=Symbol("processEntry"),it=Symbol("extendedHeader"),di=Symbol("globalExtendedHeader"),or=Symbol("meta"),am=Symbol("emitMeta"),ae=Symbol("buffer"),jt=Symbol("queue"),qr=Symbol("ended"),cm=Symbol("emittedEnd"),Br=Symbol("emit"),Ve=Symbol("unzip"),Zs=Symbol("consumeChunk"),Qs=Symbol("consumeChunkSub"),hu=Symbol("consumeBody"),um=Symbol("consumeMeta"),lm=Symbol("consumeHeader"),eo=Symbol("consuming"),du=Symbol("bufferConcat"),pu=Symbol("maybeEnd"),pi=Symbol("writing"),ar=Symbol("aborted"),to=Symbol("onDone"),jr=Symbol("sawValidEntry"),ro=Symbol("sawNullBlock"),no=Symbol("sawEOF"),wR=r=>!0;fm.exports=yR(class extends gR{constructor(e){e=e||{},super(e),this.file=e.file||"",this[jr]=null,this.on(to,t=>{(this[nt]==="begin"||this[jr]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(to,e.ondone):this.on(to,t=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||bR,this.filter=typeof e.filter=="function"?e.filter:wR,this.writable=!0,this.readable=!1,this[jt]=new _R,this[ae]=null,this[Bt]=null,this[Fr]=null,this[nt]="begin",this[or]="",this[it]=null,this[di]=null,this[qr]=!1,this[Ve]=null,this[ar]=!1,this[ro]=!1,this[no]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[lm](e,t){this[jr]===null&&(this[jr]=!1);let n;try{n=new ER(e,t,this[it],this[di])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[ro]?(this[no]=!0,this[nt]==="begin"&&(this[nt]="header"),this[Br]("eof")):(this[ro]=!0,this[Br]("nullBlock"));else if(this[ro]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[Fr]=new vR(n,this[it],this[di]);if(!this[jr])if(s.remain){let o=()=>{s.invalid||(this[jr]=!0)};s.on("end",o)}else this[jr]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[Br]("ignoredEntry",s),this[nt]="ignore",s.resume()):s.size>0&&(this[or]="",s.on("data",o=>this[or]+=o),this[nt]="meta"):(this[it]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[Br]("ignoredEntry",s),this[nt]=s.remain?"ignore":"header",s.resume()):(s.remain?this[nt]="body":(this[nt]="header",s.end()),this[Bt]?this[jt].push(s):(this[jt].push(s),this[fu]())))}}}[om](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Bt]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[fu]()),t=!1)):(this[Bt]=null,t=!1),t}[fu](){do;while(this[om](this[jt].shift()));if(!this[jt].length){let e=this[Bt];!e||e.flowing||e.size===e.remain?this[pi]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[hu](e,t){let n=this[Fr],i=n.blockRemain,s=i>=e.length&&t===0?e:e.slice(t,t+i);return n.write(s),n.blockRemain||(this[nt]="header",this[Fr]=null,n.end()),s.length}[um](e,t){let n=this[Fr],i=this[hu](e,t);return this[Fr]||this[am](n),i}[Br](e,t,n){!this[jt].length&&!this[Bt]?this.emit(e,t,n):this[jt].push([e,t,n])}[am](e){switch(this[Br]("meta",this[or]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[it]=sm.parse(this[or],this[it],!1);break;case"GlobalExtendedHeader":this[di]=sm.parse(this[or],this[di],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[it]=this[it]||Object.create(null),this[it].path=this[or].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[it]=this[it]||Object.create(null),this[it].linkpath=this[or].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[ar]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[ar])return;if(this[Ve]===null&&e){if(this[ae]&&(e=Buffer.concat([this[ae],e]),this[ae]=null),e.length<lu.length)return this[ae]=e,!0;for(let n=0;this[Ve]===null&&n<lu.length;n++)e[n]!==lu[n]&&(this[Ve]=!1);if(this[Ve]===null){let n=this[qr];this[qr]=!1,this[Ve]=new SR.Unzip,this[Ve].on("data",s=>this[Zs](s)),this[Ve].on("error",s=>this.abort(s)),this[Ve].on("end",s=>{this[qr]=!0,this[Zs]()}),this[pi]=!0;let i=this[Ve][n?"end":"write"](e);return this[pi]=!1,i}}this[pi]=!0,this[Ve]?this[Ve].write(e):this[Zs](e),this[pi]=!1;let t=this[jt].length?!1:this[Bt]?this[Bt].flowing:!0;return!t&&!this[jt].length&&this[Bt].once("drain",n=>this.emit("drain")),t}[du](e){e&&!this[ar]&&(this[ae]=this[ae]?Buffer.concat([this[ae],e]):e)}[pu](){if(this[qr]&&!this[cm]&&!this[ar]&&!this[eo]){this[cm]=!0;let e=this[Fr];if(e&&e.blockRemain){let t=this[ae]?this[ae].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[ae]&&e.write(this[ae]),e.end()}this[Br](to)}}[Zs](e){if(this[eo])this[du](e);else if(!e&&!this[ae])this[pu]();else{if(this[eo]=!0,this[ae]){this[du](e);let t=this[ae];this[ae]=null,this[Qs](t)}else this[Qs](e);for(;this[ae]&&this[ae].length>=512&&!this[ar]&&!this[no];){let t=this[ae];this[ae]=null,this[Qs](t)}this[eo]=!1}(!this[ae]||this[qr])&&this[pu]()}[Qs](e){let t=0,n=e.length;for(;t+512<=n&&!this[ar]&&!this[no];)switch(this[nt]){case"begin":case"header":this[lm](e,t),t+=512;break;case"ignore":case"body":t+=this[hu](e,t);break;case"meta":t+=this[um](e,t);break;default:throw new Error("invalid state: "+this[nt])}t<n&&(this[ae]?this[ae]=Buffer.concat([e.slice(t),this[ae]]):this[ae]=e.slice(t))}end(e){this[ar]||(this[Ve]?this[Ve].end(e):(this[qr]=!0,this.write(e)))}})});var so=E((bD,mm)=>{"use strict";var RR=cn(),dm=io(),xn=require("fs"),TR=Tn(),hm=require("path"),mu=yn();mm.exports=(r,e,t)=>{typeof r=="function"?(t=r,e=null,r={}):Array.isArray(r)&&(e=r,r={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let n=RR(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&OR(n,e),n.noResume||xR(n),n.file&&n.sync?CR(n):n.file?IR(n,t):pm(n)};var xR=r=>{let e=r.onentry;r.onentry=e?t=>{e(t),t.resume()}:t=>t.resume()},OR=(r,e)=>{let t=new Map(e.map(s=>[mu(s),!0])),n=r.filter,i=(s,o)=>{let a=o||hm.parse(s).root||".",c=s===a?!1:t.has(s)?t.get(s):i(hm.dirname(s),a);return t.set(s,c),c};r.filter=n?(s,o)=>n(s,o)&&i(mu(s)):s=>i(mu(s))},CR=r=>{let e=pm(r),t=r.file,n=!0,i;try{let s=xn.statSync(t),o=r.maxReadSize||16*1024*1024;if(s.size<o)e.end(xn.readFileSync(t));else{let a=0,c=Buffer.allocUnsafe(o);for(i=xn.openSync(t,"r");a<s.size;){let l=xn.readSync(i,c,0,o,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{xn.closeSync(i)}catch{}}},IR=(r,e)=>{let t=new dm(r),n=r.maxReadSize||16*1024*1024,i=r.file,s=new Promise((o,a)=>{t.on("error",a),t.on("end",o),xn.stat(i,(c,l)=>{if(c)a(c);else{let u=new TR.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(t)}})});return e?s.then(e,e):s},pm=r=>new dm(r)});var vm=E((vD,bm)=>{"use strict";var NR=cn(),oo=Hs(),ym=Tn(),Em=so(),gm=require("path");bm.exports=(r,e,t)=>{if(typeof e=="function"&&(t=e),Array.isArray(r)&&(e=r,r={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=NR(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?AR(n,e):n.file?DR(n,e,t):n.sync?kR(n,e):LR(n,e)};var AR=(r,e)=>{let t=new oo.Sync(r),n=new ym.WriteStreamSync(r.file,{mode:r.mode||438});t.pipe(n),_m(t,e)},DR=(r,e,t)=>{let n=new oo(r),i=new ym.WriteStream(r.file,{mode:r.mode||438});n.pipe(i);let s=new Promise((o,a)=>{i.on("error",a),i.on("close",o),n.on("error",a)});return yu(n,e),t?s.then(t,t):s},_m=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?Em({file:gm.resolve(r.cwd,t.substr(1)),sync:!0,noResume:!0,onentry:n=>r.add(n)}):r.add(t)}),r.end()},yu=(r,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return Em({file:gm.resolve(r.cwd,t.substr(1)),noResume:!0,onentry:n=>r.add(n)}).then(n=>yu(r,e));r.add(t)}r.end()},kR=(r,e)=>{let t=new oo.Sync(r);return _m(t,e),t},LR=(r,e)=>{let t=new oo(r);return yu(t,e),t}});var Eu=E((SD,Cm)=>{"use strict";var PR=cn(),Sm=Hs(),Ze=require("fs"),wm=Tn(),Rm=so(),Tm=require("path"),xm=mn();Cm.exports=(r,e,t)=>{let n=PR(r);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?UR(n,e):FR(n,e,t)};var UR=(r,e)=>{let t=new Sm.Sync(r),n=!0,i,s;try{try{i=Ze.openSync(r.file,"r+")}catch(c){if(c.code==="ENOENT")i=Ze.openSync(r.file,"w+");else throw c}let o=Ze.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,f=0;u<512;u+=f){if(f=Ze.readSync(i,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new xm(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(s+l+512>o.size)break;s+=l,r.mtimeCache&&r.mtimeCache.set(c.path,c.mtime)}n=!1,MR(r,t,s,i,e)}finally{if(n)try{Ze.closeSync(i)}catch{}}},MR=(r,e,t,n,i)=>{let s=new wm.WriteStreamSync(r.file,{fd:n,start:t});e.pipe(s),qR(e,i)},FR=(r,e,t)=>{e=Array.from(e);let n=new Sm(r),i=(o,a,c)=>{let l=(m,b)=>{m?Ze.close(o,p=>c(m)):c(null,b)},u=0;if(a===0)return l(null,0);let f=0,h=Buffer.alloc(512),d=(m,b)=>{if(m)return l(m);if(f+=b,f<512&&b)return Ze.read(o,h,f,h.length-f,u+f,d);if(u===0&&h[0]===31&&h[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let p=new xm(h);if(!p.cksumValid)return l(null,u);let w=512*Math.ceil(p.size/512);if(u+w+512>a||(u+=w+512,u>=a))return l(null,u);r.mtimeCache&&r.mtimeCache.set(p.path,p.mtime),f=0,Ze.read(o,h,0,512,u,d)};Ze.read(o,h,0,512,u,d)},s=new Promise((o,a)=>{n.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",Ze.open(r.file,c,l);if(u)return a(u);Ze.fstat(f,(h,d)=>{if(h)return Ze.close(f,()=>a(h));i(f,d.size,(m,b)=>{if(m)return a(m);let p=new wm.WriteStream(r.file,{fd:f,start:b});n.pipe(p),p.on("error",a),p.on("close",o),Om(n,e)})})};Ze.open(r.file,c,l)});return t?s.then(t,t):s},qR=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?Rm({file:Tm.resolve(r.cwd,t.substr(1)),sync:!0,noResume:!0,onentry:n=>r.add(n)}):r.add(t)}),r.end()},Om=(r,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return Rm({file:Tm.resolve(r.cwd,t.substr(1)),noResume:!0,onentry:n=>r.add(n)}).then(n=>Om(r,e));r.add(t)}r.end()}});var Nm=E((wD,Im)=>{"use strict";var BR=cn(),jR=Eu();Im.exports=(r,e,t)=>{let n=BR(r);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),GR(n),jR(n,e,t)};var GR=r=>{let e=r.filter;r.mtimeCache||(r.mtimeCache=new Map),r.filter=e?(t,n)=>e(t,n)&&!(r.mtimeCache.get(t)>n.mtime):(t,n)=>!(r.mtimeCache.get(t)>n.mtime)}});var km=E((RD,Dm)=>{"use strict";var{promisify:Am}=require("util"),cr=require("fs"),$R=r=>{if(!r)r={mode:511,fs:cr};else if(typeof r=="object")r={mode:511,fs:cr,...r};else if(typeof r=="number")r={mode:r,fs:cr};else if(typeof r=="string")r={mode:parseInt(r,8),fs:cr};else throw new TypeError("invalid options argument");return r.mkdir=r.mkdir||r.fs.mkdir||cr.mkdir,r.mkdirAsync=Am(r.mkdir),r.stat=r.stat||r.fs.stat||cr.stat,r.statAsync=Am(r.stat),r.statSync=r.statSync||r.fs.statSync||cr.statSync,r.mkdirSync=r.mkdirSync||r.fs.mkdirSync||cr.mkdirSync,r};Dm.exports=$R});var Pm=E((TD,Lm)=>{"use strict";var HR=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:zR,parse:VR}=require("path"),WR=r=>{if(/\0/.test(r))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:r,code:"ERR_INVALID_ARG_VALUE"});if(r=zR(r),HR==="win32"){let e=/[*|"<>?:]/,{root:t}=VR(r);if(e.test(r.substr(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:r,code:"EINVAL"})}return r};Lm.exports=WR});var Bm=E((xD,qm)=>{"use strict";var{dirname:Um}=require("path"),Mm=(r,e,t=void 0)=>t===e?Promise.resolve():r.statAsync(e).then(n=>n.isDirectory()?t:void 0,n=>n.code==="ENOENT"?Mm(r,Um(e),e):void 0),Fm=(r,e,t=void 0)=>{if(t!==e)try{return r.statSync(e).isDirectory()?t:void 0}catch(n){return n.code==="ENOENT"?Fm(r,Um(e),e):void 0}};qm.exports={findMade:Mm,findMadeSync:Fm}});var bu=E((OD,Gm)=>{"use strict";var{dirname:jm}=require("path"),gu=(r,e,t)=>{e.recursive=!1;let n=jm(r);return n===r?e.mkdirAsync(r,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(r,e).then(()=>t||r,i=>{if(i.code==="ENOENT")return gu(n,e).then(s=>gu(r,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(r).then(s=>{if(s.isDirectory())return t;throw i},()=>{throw i})})},_u=(r,e,t)=>{let n=jm(r);if(e.recursive=!1,n===r)try{return e.mkdirSync(r,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(r,e),t||r}catch(i){if(i.code==="ENOENT")return _u(r,e,_u(n,e,t));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(r).isDirectory())throw i}catch{throw i}}};Gm.exports={mkdirpManual:gu,mkdirpManualSync:_u}});var zm=E((CD,Hm)=>{"use strict";var{dirname:$m}=require("path"),{findMade:XR,findMadeSync:KR}=Bm(),{mkdirpManual:YR,mkdirpManualSync:JR}=bu(),ZR=(r,e)=>(e.recursive=!0,$m(r)===r?e.mkdirAsync(r,e):XR(e,r).then(n=>e.mkdirAsync(r,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return YR(r,e);throw i}))),QR=(r,e)=>{if(e.recursive=!0,$m(r)===r)return e.mkdirSync(r,e);let n=KR(e,r);try{return e.mkdirSync(r,e),n}catch(i){if(i.code==="ENOENT")return JR(r,e);throw i}};Hm.exports={mkdirpNative:ZR,mkdirpNativeSync:QR}});var Km=E((ID,Xm)=>{"use strict";var Vm=require("fs"),eT=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,vu=eT.replace(/^v/,"").split("."),Wm=+vu[0]>10||+vu[0]==10&&+vu[1]>=12,tT=Wm?r=>r.mkdir===Vm.mkdir:()=>!1,rT=Wm?r=>r.mkdirSync===Vm.mkdirSync:()=>!1;Xm.exports={useNative:tT,useNativeSync:rT}});var ty=E((ND,ey)=>{"use strict";var On=km(),Cn=Pm(),{mkdirpNative:Ym,mkdirpNativeSync:Jm}=zm(),{mkdirpManual:Zm,mkdirpManualSync:Qm}=bu(),{useNative:nT,useNativeSync:iT}=Km(),In=(r,e)=>(r=Cn(r),e=On(e),nT(e)?Ym(r,e):Zm(r,e)),sT=(r,e)=>(r=Cn(r),e=On(e),iT(e)?Jm(r,e):Qm(r,e));In.sync=sT;In.native=(r,e)=>Ym(Cn(r),On(e));In.manual=(r,e)=>Zm(Cn(r),On(e));In.nativeSync=(r,e)=>Jm(Cn(r),On(e));In.manualSync=(r,e)=>Qm(Cn(r),On(e));ey.exports=In});var cy=E((AD,ay)=>{"use strict";var st=require("fs"),Gr=require("path"),oT=st.lchown?"lchown":"chown",aT=st.lchownSync?"lchownSync":"chownSync",ny=st.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),ry=(r,e,t)=>{try{return st[aT](r,e,t)}catch(n){if(n.code!=="ENOENT")throw n}},cT=(r,e,t)=>{try{return st.chownSync(r,e,t)}catch(n){if(n.code!=="ENOENT")throw n}},uT=ny?(r,e,t,n)=>i=>{!i||i.code!=="EISDIR"?n(i):st.chown(r,e,t,n)}:(r,e,t,n)=>n,Su=ny?(r,e,t)=>{try{return ry(r,e,t)}catch(n){if(n.code!=="EISDIR")throw n;cT(r,e,t)}}:(r,e,t)=>ry(r,e,t),lT=process.version,iy=(r,e,t)=>st.readdir(r,e,t),fT=(r,e)=>st.readdirSync(r,e);/^v4\./.test(lT)&&(iy=(r,e,t)=>st.readdir(r,t));var ao=(r,e,t,n)=>{st[oT](r,e,t,uT(r,e,t,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},sy=(r,e,t,n,i)=>{if(typeof e=="string")return st.lstat(Gr.resolve(r,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,sy(r,o,t,n,i)});if(e.isDirectory())wu(Gr.resolve(r,e.name),t,n,s=>{if(s)return i(s);let o=Gr.resolve(r,e.name);ao(o,t,n,i)});else{let s=Gr.resolve(r,e.name);ao(s,t,n,i)}},wu=(r,e,t,n)=>{iy(r,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return ao(r,e,t,n);let o=s.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--o===0)return ao(r,e,t,n)}};s.forEach(l=>sy(r,l,e,t,c))})},hT=(r,e,t,n)=>{if(typeof e=="string")try{let i=st.lstatSync(Gr.resolve(r,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&oy(Gr.resolve(r,e.name),t,n),Su(Gr.resolve(r,e.name),t,n)},oy=(r,e,t)=>{let n;try{n=fT(r,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return Su(r,e,t);throw i}return n&&n.length&&n.forEach(i=>hT(r,i,e,t)),Su(r,e,t)};ay.exports=wu;wu.sync=oy});var hy=E((DD,Ru)=>{"use strict";var uy=ty(),ot=require("fs"),co=require("path"),ly=cy(),ht=dn(),uo=class extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}},lo=class extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}},fo=(r,e)=>r.get(ht(e)),mi=(r,e,t)=>r.set(ht(e),t),dT=(r,e)=>{ot.stat(r,(t,n)=>{(t||!n.isDirectory())&&(t=new lo(r,t&&t.code||"ENOTDIR")),e(t)})};Ru.exports=(r,e,t)=>{r=ht(r);let n=e.umask,i=e.mode|448,s=(i&n)!==0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,h=ht(e.cwd),d=(p,w)=>{p?t(p):(mi(f,r,!0),w&&c?ly(w,o,a,k=>d(k)):s?ot.chmod(r,i,t):t())};if(f&&fo(f,r)===!0)return d();if(r===h)return dT(r,d);if(l)return uy(r,{mode:i}).then(p=>d(null,p),d);let b=ht(co.relative(h,r)).split("/");ho(h,b,i,f,u,h,null,d)};var ho=(r,e,t,n,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),l=ht(co.resolve(r+"/"+c));if(fo(n,l))return ho(l,e,t,n,i,s,o,a);ot.mkdir(l,t,fy(l,e,t,n,i,s,o,a))},fy=(r,e,t,n,i,s,o,a)=>c=>{c?ot.lstat(r,(l,u)=>{if(l)l.path=l.path&&ht(l.path),a(l);else if(u.isDirectory())ho(r,e,t,n,i,s,o,a);else if(i)ot.unlink(r,f=>{if(f)return a(f);ot.mkdir(r,t,fy(r,e,t,n,i,s,o,a))});else{if(u.isSymbolicLink())return a(new uo(r,r+"/"+e.join("/")));a(c)}}):(o=o||r,ho(r,e,t,n,i,s,o,a))},pT=r=>{let e=!1,t="ENOTDIR";try{e=ot.statSync(r).isDirectory()}catch(n){t=n.code}finally{if(!e)throw new lo(r,t)}};Ru.exports.sync=(r,e)=>{r=ht(r);let t=e.umask,n=e.mode|448,i=(n&t)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=ht(e.cwd),h=p=>{mi(u,r,!0),p&&a&&ly.sync(p,s,o),i&&ot.chmodSync(r,n)};if(u&&fo(u,r)===!0)return h();if(r===f)return pT(f),h();if(c)return h(uy.sync(r,n));let m=ht(co.relative(f,r)).split("/"),b=null;for(let p=m.shift(),w=f;p&&(w+="/"+p);p=m.shift())if(w=ht(co.resolve(w)),!fo(u,w))try{ot.mkdirSync(w,n),b=b||w,mi(u,w,!0)}catch{let x=ot.lstatSync(w);if(x.isDirectory()){mi(u,w,!0);continue}else if(l){ot.unlinkSync(w),ot.mkdirSync(w,n),b=b||w,mi(u,w,!0);continue}else if(x.isSymbolicLink())return new uo(w,w+"/"+m.join("/"))}return h(b)}});var xu=E((kD,dy)=>{"use strict";var Tu=Object.create(null),{hasOwnProperty:mT}=Object.prototype;dy.exports=r=>(mT.call(Tu,r)||(Tu[r]=r.normalize("NFKD")),Tu[r])});var Ey=E((LD,yy)=>{"use strict";var py=require("assert"),yT=xu(),ET=yn(),{join:my}=require("path"),gT=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,_T=gT==="win32";yy.exports=()=>{let r=new Map,e=new Map,t=l=>l.split("/").slice(0,-1).reduce((f,h)=>(f.length&&(h=my(f[f.length-1],h)),f.push(h||"/"),f),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>r.get(f)),dirs:[...u.dirs].map(f=>r.get(f))}},s=l=>{let{paths:u,dirs:f}=i(l);return u.every(h=>h[0]===l)&&f.every(h=>h[0]instanceof Set&&h[0].has(l))},o=l=>n.has(l)||!s(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:f}=e.get(l),h=new Set;return u.forEach(d=>{let m=r.get(d);py.equal(m[0],l),m.length===1?r.delete(d):(m.shift(),typeof m[0]=="function"?h.add(m[0]):m[0].forEach(b=>h.add(b)))}),f.forEach(d=>{let m=r.get(d);py(m[0]instanceof Set),m[0].size===1&&m.length===1?r.delete(d):m[0].size===1?(m.shift(),h.add(m[0])):m[0].delete(l)}),n.delete(l),h.forEach(d=>o(d)),!0};return{check:s,reserve:(l,u)=>{l=_T?["win32 parallelization disabled"]:l.map(h=>yT(ET(my(h))).toLowerCase());let f=new Set(l.map(h=>t(h)).reduce((h,d)=>h.concat(d)));return e.set(u,{dirs:f,paths:l}),l.forEach(h=>{let d=r.get(h);d?d.push(u):r.set(h,[u])}),f.forEach(h=>{let d=r.get(h);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):r.set(h,[new Set([u])])}),o(u)}}}});var by=E((PD,_y)=>{"use strict";var bT=process.env.__FAKE_PLATFORM__||process.platform,vT=bT==="win32",ST=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:wT,O_TRUNC:RT,O_WRONLY:TT,UV_FS_O_FILEMAP:gy=0}=ST.constants,xT=vT&&!!gy,OT=512*1024,CT=gy|RT|wT|TT;_y.exports=xT?r=>r<OT?CT:"w":()=>"w"});var Pu=E((UD,Ly)=>{"use strict";var IT=require("assert"),NT=io(),Q=require("fs"),AT=Tn(),Gt=require("path"),Ay=hy(),vy=Lc(),DT=Ey(),kT=Pc(),Qe=dn(),LT=yn(),PT=xu(),Sy=Symbol("onEntry"),Iu=Symbol("checkFs"),wy=Symbol("checkFs2"),yo=Symbol("pruneCache"),Nu=Symbol("isReusable"),at=Symbol("makeFs"),Au=Symbol("file"),Du=Symbol("directory"),Eo=Symbol("link"),Ry=Symbol("symlink"),Ty=Symbol("hardlink"),xy=Symbol("unsupported"),Oy=Symbol("checkPath"),ur=Symbol("mkdir"),De=Symbol("onError"),po=Symbol("pending"),Cy=Symbol("pend"),Nn=Symbol("unpend"),Ou=Symbol("ended"),Cu=Symbol("maybeClose"),ku=Symbol("skip"),yi=Symbol("doChown"),Ei=Symbol("uid"),gi=Symbol("gid"),_i=Symbol("checkedCwd"),Dy=require("crypto"),ky=by(),UT=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,bi=UT==="win32",MT=(r,e)=>{if(!bi)return Q.unlink(r,e);let t=r+".DELETE."+Dy.randomBytes(16).toString("hex");Q.rename(r,t,n=>{if(n)return e(n);Q.unlink(t,e)})},FT=r=>{if(!bi)return Q.unlinkSync(r);let e=r+".DELETE."+Dy.randomBytes(16).toString("hex");Q.renameSync(r,e),Q.unlinkSync(e)},Iy=(r,e,t)=>r===r>>>0?r:e===e>>>0?e:t,Ny=r=>PT(LT(Qe(r))).toLowerCase(),qT=(r,e)=>{e=Ny(e);for(let t of r.keys()){let n=Ny(t);(n===e||n.indexOf(e+"/")===0)&&r.delete(t)}},BT=r=>{for(let e of r.keys())r.delete(e)},vi=class extends NT{constructor(e){if(e||(e={}),e.ondone=t=>{this[Ou]=!0,this[Cu]()},super(e),this[_i]=!1,this.reservations=DT(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[po]=0,this[Ou]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||bi,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Qe(Gt.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[Sy](t))}warn(e,t,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,t,n)}[Cu](){this[Ou]&&this[po]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[Oy](e){if(this.strip){let t=Qe(e.path).split("/");if(t.length<this.strip)return!1;if(e.path=t.slice(this.strip).join("/"),e.type==="Link"){let n=Qe(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let t=Qe(e.path),n=t.split("/");if(n.includes("..")||bi&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[i,s]=kT(t);i&&(e.path=s,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:t}))}if(Gt.isAbsolute(e.path)?e.absolute=Qe(Gt.resolve(e.path)):e.absolute=Qe(Gt.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Qe(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:t}=Gt.win32.parse(e.absolute);e.absolute=t+vy.encode(e.absolute.substr(t.length));let{root:n}=Gt.win32.parse(e.path);e.path=n+vy.encode(e.path.substr(n.length))}return!0}[Sy](e){if(!this[Oy](e))return e.resume();switch(IT.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Iu](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[xy](e)}}[De](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[Nn](),t.resume())}[ur](e,t,n){Ay(Qe(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},n)}[yi](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Ei](e){return Iy(this.uid,e.uid,this.processUid)}[gi](e){return Iy(this.gid,e.gid,this.processGid)}[Au](e,t){let n=e.mode&4095||this.fmode,i=new AT.WriteStream(e.absolute,{flags:ky(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Q.close(i.fd,()=>{}),i.write=()=>!0,this[De](c,e),t()});let s=1,o=c=>{if(c){i.fd&&Q.close(i.fd,()=>{}),this[De](c,e),t();return}--s===0&&Q.close(i.fd,l=>{l?this[De](l,e):this[Nn](),t()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,h=e.mtime;Q.futimes(u,f,h,d=>d?Q.utimes(l,f,h,m=>o(m&&d)):o())}if(this[yi](e)){s++;let f=this[Ei](e),h=this[gi](e);Q.fchown(u,f,h,d=>d?Q.chown(l,f,h,m=>o(m&&d)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[De](c,e),t()}),e.pipe(a)),a.pipe(i)}[Du](e,t){let n=e.mode&4095||this.dmode;this[ur](e.absolute,n,i=>{if(i){this[De](i,e),t();return}let s=1,o=a=>{--s===0&&(t(),this[Nn](),e.resume())};e.mtime&&!this.noMtime&&(s++,Q.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[yi](e)&&(s++,Q.chown(e.absolute,this[Ei](e),this[gi](e),o)),o()})}[xy](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Ry](e,t){this[Eo](e,e.linkpath,"symlink",t)}[Ty](e,t){let n=Qe(Gt.resolve(this.cwd,e.linkpath));this[Eo](e,n,"link",t)}[Cy](){this[po]++}[Nn](){this[po]--,this[Cu]()}[ku](e){this[Nn](),e.resume()}[Nu](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!bi}[Iu](e){this[Cy]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,n=>this[wy](e,n))}[yo](e){e.type==="SymbolicLink"?BT(this.dirCache):e.type!=="Directory"&&qT(this.dirCache,e.absolute)}[wy](e,t){this[yo](e);let n=a=>{this[yo](e),t(a)},i=()=>{this[ur](this.cwd,this.dmode,a=>{if(a){this[De](a,e),n();return}this[_i]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=Qe(Gt.dirname(e.absolute));if(a!==this.cwd)return this[ur](a,this.dmode,c=>{if(c){this[De](c,e),n();return}o()})}o()},o=()=>{Q.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[ku](e),n();return}if(a||this[Nu](e,c))return this[at](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[at](f,e,n);return l?Q.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return Q.rmdir(e.absolute,l=>this[at](l,e,n))}if(e.absolute===this.cwd)return this[at](null,e,n);MT(e.absolute,l=>this[at](l,e,n))})};this[_i]?s():i()}[at](e,t,n){if(e){this[De](e,t),n();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[Au](t,n);case"Link":return this[Ty](t,n);case"SymbolicLink":return this[Ry](t,n);case"Directory":case"GNUDumpDir":return this[Du](t,n)}}[Eo](e,t,n,i){Q[n](t,e.absolute,s=>{s?this[De](s,e):(this[Nn](),e.resume()),i()})}},mo=r=>{try{return[null,r()]}catch(e){return[e,null]}},Lu=class extends vi{[at](e,t){return super[at](e,t,()=>{})}[Iu](e){if(this[yo](e),!this[_i]){let s=this[ur](this.cwd,this.dmode);if(s)return this[De](s,e);this[_i]=!0}if(e.absolute!==this.cwd){let s=Qe(Gt.dirname(e.absolute));if(s!==this.cwd){let o=this[ur](s,this.dmode);if(o)return this[De](o,e)}}let[t,n]=mo(()=>Q.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[ku](e);if(t||this[Nu](e,n))return this[at](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?mo(()=>{Q.chmodSync(e.absolute,e.mode)}):[];return this[at](a,e)}let[s]=mo(()=>Q.rmdirSync(e.absolute));this[at](s,e)}let[i]=e.absolute===this.cwd?[]:mo(()=>FT(e.absolute));this[at](i,e)}[Au](e,t){let n=e.mode&4095||this.fmode,i=a=>{let c;try{Q.closeSync(s)}catch(l){c=l}(a||c)&&this[De](a||c,e),t()},s;try{s=Q.openSync(e.absolute,ky(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[De](a,e)),e.pipe(o)),o.on("data",a=>{try{Q.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{Q.futimesSync(s,l,u)}catch(f){try{Q.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[yi](e)){let l=this[Ei](e),u=this[gi](e);try{Q.fchownSync(s,l,u)}catch(f){try{Q.chownSync(e.absolute,l,u)}catch{c=c||f}}}i(c)})}[Du](e,t){let n=e.mode&4095||this.dmode,i=this[ur](e.absolute,n);if(i){this[De](i,e),t();return}if(e.mtime&&!this.noMtime)try{Q.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[yi](e))try{Q.chownSync(e.absolute,this[Ei](e),this[gi](e))}catch{}t(),e.resume()}[ur](e,t){try{return Ay.sync(Qe(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(n){return n}}[Eo](e,t,n,i){try{Q[n+"Sync"](t,e.absolute),i(),e.resume()}catch(s){return this[De](s,e)}}};vi.Sync=Lu;Ly.exports=vi});var qy=E((MD,Fy)=>{"use strict";var jT=cn(),go=Pu(),Uy=require("fs"),My=Tn(),Py=require("path"),Uu=yn();Fy.exports=(r,e,t)=>{typeof r=="function"?(t=r,e=null,r={}):Array.isArray(r)&&(e=r,r={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let n=jT(r);if(n.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&GT(n,e),n.file&&n.sync?$T(n):n.file?HT(n,t):n.sync?zT(n):VT(n)};var GT=(r,e)=>{let t=new Map(e.map(s=>[Uu(s),!0])),n=r.filter,i=(s,o)=>{let a=o||Py.parse(s).root||".",c=s===a?!1:t.has(s)?t.get(s):i(Py.dirname(s),a);return t.set(s,c),c};r.filter=n?(s,o)=>n(s,o)&&i(Uu(s)):s=>i(Uu(s))},$T=r=>{let e=new go.Sync(r),t=r.file,n=Uy.statSync(t),i=r.maxReadSize||16*1024*1024;new My.ReadStreamSync(t,{readSize:i,size:n.size}).pipe(e)},HT=(r,e)=>{let t=new go(r),n=r.maxReadSize||16*1024*1024,i=r.file,s=new Promise((o,a)=>{t.on("error",a),t.on("close",o),Uy.stat(i,(c,l)=>{if(c)a(c);else{let u=new My.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(t)}})});return e?s.then(e,e):s},zT=r=>new go.Sync(r),VT=r=>new go(r)});var By=E(fe=>{"use strict";fe.c=fe.create=vm();fe.r=fe.replace=Eu();fe.t=fe.list=so();fe.u=fe.update=Nm();fe.x=fe.extract=qy();fe.Pack=Hs();fe.Unpack=Pu();fe.Parse=io();fe.ReadEntry=Os();fe.WriteEntry=zc();fe.Header=mn();fe.Pax=Is();fe.types=Oc()});var Gy,ke,$r,$y,jy,_o,lr,fr,bo=q(()=>{"use strict";Gy=require("crypto"),ke=require("fs"),$r=Sr(require("path")),$y=require("path");_t();re();kt();Zr();jy=Ja(),_o=By(),{output:lr}=Y(),fr=class{constructor(e,t,n,i){this.encryption=e;this.errorReporter=t;this.context=i;this.storedHashes=[];this.axiosConfigBuilder=e=>e;if(n.customProxyConfigPath){let{fileServerProxyConfig:s}=require((0,$y.join)(process.cwd(),n.customProxyConfigPath));this.axiosConfigBuilder=s??this.axiosConfigBuilder}}async retrieve(e,t,n){process.env.NX_CLOUD_DEBUG_URLS=="true"&&lr.note({title:`Nx Cloud: Downloading ${e}`,bodyLines:[`RETRIEVAL URL: ${t}`]});let i=this.createFileName(e,n),s=this.createCommitFilePath(e,n);try{await this.downloadFile(t,i,s),this.createCommitFile(s),P&&lr.note({title:`Nx Cloud: Downloaded ${e}`})}catch(o){let a=o.message||o.toString(),c;throw a.includes("zlib")||a.includes("gzip")||a.includes("TAR_BAD_ARCHIVE")?c=`Failed to untar cached artifacts. The artifact may be corrupted. (Reference hash: ${e})`:a.includes("decrypt")?c=`Failed to decrypt artifact. Please review your encryption key. (Reference hash: ${e})`:c=`Failed to download cached artifacts. Enable NX_VERBOSE_LOGGING for more details. (Reference hash: ${e})`,P&&lr.note({title:`${c}`,bodyLines:[`- ${o.message}`,`- Affected artifact: ${e} in context ${this.context}.`]}),(this.context==="dte-agent"||this.context==="dte-main")&&(lr.note({title:`An error occurred while trying to retrieve artifacts in the ${this.context} context. Hash: ${e}.`,bodyLines:["- Please update the nx-cloud package to the latest version.","- Please update the nx package to 15.8.9 or higher. You can do it without updating the plugins.","- If you are not able to update the nx package, and you are passing --configuration to a run-many or an affected command, define that configuration for all the projects."]}),process.env.NX_CLOUD_DEBUG_URLS=="true"&&lr.note({title:`URL: ${e}`})),await this.errorReporter.reportError(c),new Error(c)}}async store(e,t,n){process.env.NX_CLOUD_DEBUG_URLS=="true"&&lr.note({title:`Nx Cloud: Storing ${e}`,bodyLines:[`STORAGE URL: ${t}`]});let i;if(process.env.NRWL_INTERNAL_TAR_DEBUG){let o=1,a=!1,c=[];for(;o<=3&&!a;){i=await this.createFile(e,n);let l=`/tmp/${e}/attempt${o}`;(0,ke.mkdirSync)(l,{recursive:!0});try{let u=(0,ke.createReadStream)(i).pipe(_o.x({cwd:l}));await this.convertStreamIntoPromise(u),a=!0}catch(u){console.error(u),await Ge(5e3)}c.push({attempt:o,success:a}),o++}if(c.some(l=>!l.success)){console.error(JSON.stringify(c,null,2));let l=c.filter(u=>!u.success).map(u=>u.attempt).join(", ");throw new Error(`Untar failed for hash ${e} in attempts ${l} out of ${c.length}`)}}else i=await this.createFile(e,n);await this.uploadFile(t,i),this.storedHashes.push(e),P&&lr.note({title:`Nx Cloud: Stored ${e}`})}createFileName(e,t){return $r.join(t,`${e}.tar.gz`)}async downloadFile(e,t,n){var o;let i=Ce("retrieveFile"),s;try{let a=new URL(e),c=a.origin+a.pathname,l={};for(let[u,f]of a.searchParams.entries())l[u]=f;s=await ce(()=>jy(c,this.axiosConfigBuilder({method:"GET",responseType:"stream",maxContentLength:gt?Jn:Zn,maxBodyLength:gt?Jn:Zn,timeout:gt?Yn:6e4,params:l}))),i.recordMetric({...ne(s),payloadSize:s.data.headers["content-length"]})}catch(a){throw i.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),a}if((0,ke.existsSync)(t)){let a=0;for(;a++<50;){if((0,ke.existsSync)(n))return;await Ge(500)}}if(this.encryption.hasEncryption()){await new Promise(c=>{s.data.pipe((0,ke.createWriteStream)(t)).on("close",()=>c(null))}),this.encryption.decryptFile(t);let a=(0,ke.createReadStream)(t).pipe(_o.x({cwd:$r.dirname(t)}));return this.convertStreamIntoPromise(a)}else{let a=s.data.pipe(_o.x({cwd:$r.dirname(t)}));return this.convertStreamIntoPromise(a)}}convertStreamIntoPromise(e){return new Promise((t,n)=>{e.on("error",i=>{i.tarCode==="TAR_ABORT"&&i.message.indexOf("incorrect header check")>-1?(console.warn("FileStorage: Decompression OK, Trailing garbage ignored."),t(null)):n(i)}),e.on("finish",()=>t(null))})}createCommitFile(e){(0,ke.writeFileSync)(e,"true")}createCommitFilePath(e,t){return $r.join(t,`${e}.commit`)}async createFile(e,t){let n=this.createFileName(e,t);try{(0,ke.unlinkSync)($r.join(t,e,"source"))}catch{}return await _o.c({gzip:!0,file:n,cwd:t},[e]),this.encryption.hasEncryption()&&this.encryption.encryptFile(n),n}async uploadFile(e,t){var a;process.env.NX_CLOUD_ECONNABORTED_LOGGING=="true"&&lr.note({title:`Attempting to upload file with path: ${t}`});let n=Ce("storeFile"),i=(0,ke.readFileSync)(t),s=this.generateMD5(i),o=this.getFileUploadHeaders(e,s);try{let c=await ce(()=>jy(e,this.axiosConfigBuilder({method:"PUT",data:i,headers:o,maxContentLength:gt?Jn:Zn,maxBodyLength:gt?Jn:Zn,timeout:gt?Yn:12e4})));n.recordMetric({...ne(c),payloadSize:c.config.headers["Content-Length"]})}catch(c){if(c.message&&c.message.includes("RetentionPolicyNotMet"))return;throw n.recordMetric((a=c==null?void 0:c.axiosException)!=null&&a.response?ne(c.axiosException.response):Ie),c}}generateMD5(e){let t=(0,Gy.createHash)("md5");return t.update(e),t.digest("base64")}getFileUploadHeaders(e,t){let n=e.includes("/file/"),i={"Content-Type":"application/octet-stream","x-ms-blob-type":"BlockBlob"};return n&&(i["Content-MD5"]=t),i}}});var vo,Hy=q(()=>{"use strict";re();ii();vo=class{constructor(e,t,n){this.runContext=e;this.taskExecutions=t;this.distributedExecutionId=n}printCacheHitsMessage(){if(ut(this.distributedExecutionId)||!this.runContext.runUrl)return;let e=!!this.taskExecutions.find(s=>s.status!==0),t=!!this.taskExecutions.find(s=>s.cacheStatus==="cache-miss"),n=this.taskExecutions.filter(s=>this.runContext.statuses[s.hash]==="remote-cache-hit").map(s=>s.projectName),i=[];if(e)i.push(`View structured, searchable error logs at ${this.runContext.runUrl}`);else if(t)i.push(`View logs and investigate cache misses at ${this.runContext.runUrl}`);else if(n.length>0){let s=n.length===1?n[0]:`${n.length} tasks`;i.push(`Nx Cloud made it possible to reuse ${s}: ${this.runContext.runUrl}`)}else this.runContext.runUrl&&i.push(`View logs and run details at ${this.runContext.runUrl}`);i.length>0&&Kt(i.join(" "))}}});var WT,An,Mu=q(()=>{"use strict";ii();({output:WT}=Y()),An=class{constructor(e){this.options=e;this.cacheError=null;this.apiError=null;this.message=null}get anyErrors(){return this.cacheError||this.apiError}printMessages(){if(this.anyErrors){let e=[];this.cacheError&&e.push(`- ${this.cacheError}`),this.apiError&&this.apiError!==this.cacheError&&e.push(`- ${this.apiError}`),WT.warn({title:"Nx Cloud Problems",bodyLines:e})}this.message&&Kt(this.message)}extractErrorMessage(e,t){if(e.code==="ECONNABORTED")return process.env.NX_CLOUD_ECONNABORTED_LOGGING=="true"&&(console.log("[NX CLOUD DEBUG] Request config without `data`"),delete e.config.data,console.log(JSON.stringify(e.config,null,2))),`Cannot connect to Nx Cloud (scope: ${t}, code: ${e.code}). Try invoking the command with the NX_CLOUD_NO_TIMEOUTS env variable set to 'true'.`;if(e.code==="ECONNREFUSED"||e.code==="EAI_AGAIN"||e.code==="ENOTFOUND"||e.code==="EPROTO")return`Cannot connect to Nx Cloud (scope: ${t}, code: ${e.code}).`;if(e.response&&e.response.status===401)return e.response.data.message?e.response.data.message:e.response.data;if(e.response&&e.response.status===402)return this.options.showUsageWarnings===!1||this.options.showUsageWarnings===void 0?null:e.response.data.message?e.response.data.message:e.response.data;{let n="";e.response&&e.response.data&&e.response.data.message?n=`. ${e.response.data.message}`:e.response&&e.response.data&&(n=`. ${e.response.data}`);let i=e.code?` (code: ${e.code})`:"";return`${e.message}${n}${i}`}}}});var hr,So=q(()=>{"use strict";hr=class{constructor(e=[]){this.normalizedMaskedProperties=[];this.normalizedMaskedProperties=Array.from(new Set(e)).map(this.toCamelCase)}obfuscate(e){return this.normalizedMaskedProperties.length&&(this.normalizedMaskedProperties.forEach(n=>{let i=new RegExp(`(--${n}=)[\\S]*`);e=e.replace(i,"$1********")}),this.normalizedMaskedProperties.filter(n=>n in process.env).map(n=>process.env[n]).forEach(n=>{e=e.replace(n,"********")})),e}toCamelCase(e){return e.indexOf("-")>1?e.toLowerCase().replace(/-(.)/g,(t,n)=>n.toUpperCase()):e}}});function Dn(r){return r.overrides.__overrides_unparsed__?r.overrides.__overrides_unparsed__.join(" "):Fu(r.overrides).join(" ")}function Fu(r){let e=[];for(let t of Object.keys(r)){let n=r[t];zy(t,n,e)}return e}function zy(r,e,t){if(r==="_")t.push(...e);else if(e===!0)t.push(`--${r}`);else if(e===!1)t.push(`--no-${r}`);else if(Array.isArray(e))e.forEach(n=>zy(r,n,t));else if(typeof e=="string"&&XT(e)){let n=e.replace(/"/g,String.raw`\"`);t.push(`--${r}="${n}"`)}else e!=null&&t.push(`--${r}=${e}`)}function XT(r){return r.includes(" ")||r.includes("{")||r.includes('"')}var Si=q(()=>{"use strict"});function wo(r,e,t,n,i){let s;r?r.startsWith("./")?s=(0,ju.join)(Vy,r):s=r:s=(0,ju.join)(Vy,"node_modules",".cache","nx");try{let o=ZT(s,t),a=e.obfuscate(o);if(ph)return a;let c=n==="cache-miss"?i===0?YT:KT:JT;return a.length>c?`TRUNCATED

${a.slice(a.length-c)}`:a}catch(o){return process.env.NX_VERBOSE_LOGGING==="true"&&console.error(o),""}}function ZT(r,e){try{return(0,qu.readFileSync)(Bu.join(r,"terminalOutputs",e)).toString()}catch{try{return(0,qu.readFileSync)(Bu.join(r,e,"terminalOutput")).toString()}catch{return""}}}var qu,Bu,ju,Vy,KT,YT,JT,Gu=q(()=>{"use strict";qu=require("fs"),Bu=Sr(require("path")),ju=require("path");re();({workspaceRoot:Vy}=Y()),KT=2e5,YT=2e4,JT=2e4});var Wy,Ro,Xy=q(()=>{"use strict";Wy=require("crypto");Si();Gu();Ro=class{constructor(e,t,n,i,s,o){this.runContext=e;this.cacheDirectory=t;this.collectTerminalOutput=n;this.cacheableOperations=i;this.outputObfuscator=s;this.tasks=o}scheduleTask(e){this.runContext.scheduledTasks.push(e)}startTask(e){this.tasks.push({taskId:e.id,startTime:new Date().toISOString(),target:e.target.target,projectName:e.target.project,hash:e.hash,hashDetails:this.cleanUpHashDetails(e.hashDetails),params:Dn(e),uploadedToStorage:!1})}endTasks(e){for(let t of e){let n,i=t.status==="remote-cache",s=t.status==="cache",o=t.status==="local-cache"||t.status==="local-cache-kept-existing"||s;this.runContext.statuses[t.task.hash]?n=this.runContext.statuses[t.task.hash]:i?n="remote-cache-hit":o?n="local-cache-hit":n="cache-miss",this.updateStartedTask(t,n)}}endCommand(){}updateStartedTask(e,t){let n=this.tasks.find(i=>i.taskId===e.task.id);if(!n)throw new Error(`Cannot find task ${e.task.id}`);e!=null&&e.startTime&&(e!=null&&e.endTime)?(n.startTime=new Date(e.startTime).toISOString(),n.endTime=new Date(e.endTime).toISOString()):n.endTime=new Date().toISOString(),n.status=e.code,n.params=this.outputObfuscator.obfuscate(n.params),n.cacheStatus=t,this.collectTerminalOutput&&(n.terminalOutput=this.getTerminalOutput(e.task.hash,n.cacheStatus,e.code))}getTerminalOutput(e,t,n){return wo(this.cacheDirectory,this.outputObfuscator,e,t,n)}cleanUpHashDetails(e){let t={},n=[];for(let i of Object.keys(e.nodes))i.startsWith("npm:")?n.push(e.nodes[i]):t[i]=e.nodes[i];if(n.sort(),n.length>0){let i=(0,Wy.createHash)("md5");i.update(n.join("|")),t.npmDependencies=i.digest("base64")}return{nodes:t,runtime:e.runtime,implicitDeps:e.implicitDeps}}}});var $u,To,Ky=q(()=>{"use strict";re();({output:$u}=Y()),To=class{constructor(e,t,n,i,s,o){this.messages=e;this.api=t;this.runContext=n;this.fileStorage=i;this.distributedExecutionId=s;this.storeInCurrentProcess=o;this.storeRequests=[];this.delayedStoreRequests=[]}async retrieve(e,t){if(this.messages.cacheError)return!1;let n=await this.hashUrls(e);if(!n||!n.get)return P&&$u.note({title:`Nx Cloud: Cache miss ${e}.`}),this.runContext.statuses[e]="cache-miss",!1;try{return await this.fileStorage.retrieve(e,n.get,t),this.runContext.statuses[e]="remote-cache-hit",!0}catch(i){let s=i.axiosException??i;return s.response&&s.response.status===404?P&&$u.note({title:`Nx Cloud: Cache miss ${e}. Status 404.`}):this.messages.cacheError=this.messages.extractErrorMessage(s,"storage"),this.runContext.statuses[e]="cache-miss",!1}}async store(e,t){if(this.messages.cacheError)return!1;let n=Promise.resolve().then(async()=>{let i=await this.hashUrls(e);if(!i)return!1;if(!i.put)return P&&$u.note({title:`Nx Cloud: Skipping storing ${e}.`,bodyLines:["There are several reasons why this can happen.","Maybe you are using a read-only token or the artifact has already being uploaded."]}),!0;if(!this.storeInCurrentProcess)return this.delayedStoreRequests.push({hash:e,url:i.put}),!0;try{return await this.fileStorage.store(e,i.put,t),!0}catch(s){let o=s.axiosException??s;return this.messages.cacheError=this.messages.extractErrorMessage(o,"storage"),!1}});return this.storeRequests.push(n),n}async hashUrls(e){if(e in this.runContext.requests){let t=(await this.runContext.requests[e])[e];return this.setTaskArtifactIdOnRunContext(e,t==null?void 0:t.artifactId),t==null?void 0:t.artifactUrls}else{let t=this.runContext.scheduledTasks.filter(s=>!this.runContext.requests[s.hash]).map(s=>s.hash);t.indexOf(e)===-1&&t.push(e);let n=this.api.startRun(this.distributedExecutionId,t);t.forEach(s=>{this.runContext.requests[s]=n});let i=(await n)[e];return this.setTaskArtifactIdOnRunContext(e,i==null?void 0:i.artifactId),i==null?void 0:i.artifactUrls}}async waitForStoreRequestsToComplete(){if(!await Promise.all(this.storeRequests).then(t=>t.reduce((n,i)=>n&&i,!0)))throw new Error("Error when storing artifacts")}setTaskArtifactIdOnRunContext(e,t){let n=this.runContext.allTasks.find(i=>i.hash===e);if(n===void 0)throw Error("Could not find task with hash $hash");n.artifactId=t}}});function dr(){for(let r of Object.values(QT))if(r.detectorFn(process.env)){let e=r.contextRetrieverFn(process.env);return P&&console.log(JSON.stringify(e,null,2)),e}return P&&console.log("[Nx Cloud] Did not identify a VCS platform."),null}function ex(r){return r.CIRCLECI==="true"}function tx(r){P&&console.log("[Nx Cloud] Detected Env: CircleCI");let e=n=>{if(n.CIRCLE_PR_NUMBER!==void 0)return n.CIRCLE_PR_NUMBER;if(n.CIRCLE_PULL_REQUEST!==void 0){let i=n.CIRCLE_PULL_REQUEST.split("/");return i[i.length-1]}return n.CIRCLE_BRANCH!==void 0?n.CIRCLE_BRANCH:"unknown"},t=n=>n.CIRCLE_USERNAME!==void 0?n.CIRCLE_USERNAME:n.CIRCLE_PR_USERNAME?n.CIRCLE_PR_USERNAME:null;return{branch:e(r),ref:r.CIRCLE_BRANCH??null,title:zu(),headSha:r.CIRCLE_SHA1??"unknown",baseSha:null,commitLink:r.CIRCLE_PULL_REQUEST??null,author:t(r),authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.CIRCLE_REPOSITORY_URL??null}}function rx(r){return r.TRAVIS==="true"}function nx(r){return P&&console.log("[Nx Cloud] Detected Env: TravisCI"),{branch:(t=>t.TRAVIS_EVENT_TYPE==="pull_request"?t.TRAVIS_PULL_REQUEST:t.TRAVIS_BRANCH)(r),ref:null,title:r.TRAVIS_COMMIT_MESSAGE,headSha:r.TRAVIS_COMMIT??"unknown",baseSha:null,commitLink:null,author:Yy(),authorUrl:null,authorAvatarUrl:null,repositoryUrl:null}}function ix(r){return r.GITHUB_ACTIONS==="true"}function sx(r){P&&console.log("[Nx Cloud] Detected Env: GitHub Actions");let e=i=>{if(i.GITHUB_REF){let s=i.GITHUB_REF.match(/refs\/pull\/(\d+)\/merge/);if(s)return s[1]}return i.GITHUB_HEAD_REF?i.GITHUB_HEAD_REF:i.GITHUB_REF_NAME?i.GITHUB_REF_NAME:"unknown"},t=i=>{let s=`${i.GITHUB_SERVER_URL}/${i.GITHUB_REPOSITORY}`;return i.GITHUB_EVENT_NAME==="pull_request"?`${s}/pull/${e(i)}`:`${s}/commit/${i.GITHUB_SHA}`},n=i=>i.GITHUB_HEAD_REF?i.GITHUB_HEAD_REF:i.GITHUB_REF?i.GITHUB_REF:null;return{branch:e(r),ref:n(r),title:zu(),headSha:r.GITHUB_SHA??"unknown",baseSha:null,commitLink:t(r),author:r.GITHUB_ACTOR??null,authorUrl:`https://github.com/${r.GITHUB_ACTOR}`,authorAvatarUrl:`https://avatars.githubusercontent.com/u/${r.GITHUB_ACTOR_ID}`,repositoryUrl:`${r.GITHUB_SERVER_URL}/${r.GITHUB_REPOSITORY}`}}function ox(r){return r.BITBUCKET_BUILD_NUMBER!=null}function ax(r){return P&&console.log("[Nx Cloud] Detected Env: BitBucket Pipelines"),{branch:r.BITBUCKET_PR_ID??r.BITBUCKET_BRANCH??"unknown",ref:null,title:zu(),headSha:r.BITBUCKET_COMMIT??"unknown",baseSha:null,commitLink:null,author:Yy(),authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.BITBUCKET_GIT_HTTP_ORIGIN??null}}function cx(r){return r.BUILD_BUILDID!==void 0&&r.AGENT_NAME!==void 0}function ux(r){return P&&console.log("[Nx Cloud] Detected Env: Azure DevOps"),{branch:r.SYSTEM_PULLREQUEST_PULLREQUESTNUMBER??r.BUILD_SOURCEBRANCHNAME??"unknown",ref:null,title:r.BUILD_SOURCEVERSIONMESSAGE??null,headSha:tt()??"unknown",baseSha:null,commitLink:null,author:r.BUILD_REQUESTEDFOR??null,authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.SYSTEM_PULLREQUEST_SOURCEREPOSITORYURI??r.BUILD_REPOSITORY_URI??null}}function lx(r){return r.GITLAB_CI==="true"}function fx(r){return P&&console.log("[Nx Cloud] Detected Env: GitLab Pipelines"),{branch:(t=>t.CI_MERGE_REQUEST_IID?t.CI_MERGE_REQUEST_IID:t.CI_COMMIT_BRANCH?t.CI_COMMIT_BRANCH:"unknown")(r),ref:r.CI_COMMIT_REF_NAME??null,title:r.CI_COMMIT_MESSAGE??null,headSha:tt()??"unknown",baseSha:null,commitLink:null,author:r.GITLAB_USER_NAME??null,authorUrl:null,authorAvatarUrl:null,repositoryUrl:r.CI_REPOSITORY_URL??null}}function zu(){try{return(0,Hu.execSync)("git log -1 --pretty=%B",{encoding:"utf-8"}).trim()}catch{return null}}function Yy(){try{return(0,Hu.execSync)("git log -1 --pretty=%aN",{encoding:"utf-8"}).trim()}catch{return null}}var Hu,QT,xo=q(()=>{"use strict";Hu=require("child_process");re();QT={CIRCLE_CI:{detectorFn:ex,contextRetrieverFn:tx},TRAVIS_CI:{detectorFn:rx,contextRetrieverFn:nx},GITHUB_ACTIONS:{detectorFn:ix,contextRetrieverFn:sx},BITBUCKET_PIPELINES:{detectorFn:ox,contextRetrieverFn:ax},AZURE_DEVOPS:{detectorFn:cx,contextRetrieverFn:ux},GITLAB_PIPELINES:{detectorFn:lx,contextRetrieverFn:fx}}});var Jy,Zy,Qy,Oo,kn,Vu=q(()=>{"use strict";Jy=require("fs"),Zy=require("util"),Qy=require("zlib");_t();re();xo();kt();({output:Oo}=Y()),kn=class{constructor(e,t,n,i){this.messages=e;this.runContext=t;this.machineInfo=i;this.apiAxiosInstance=Oe(n)}async startRun(e,t){var i;if(this.messages.apiError)return{};let n=Ce("startRun");try{let s={meta:{nxCloudVersion:this.nxCloudVersion()},branch:me(),runGroup:ve(),ciExecutionId:je(),ciExecutionEnv:Te(),distributedExecutionId:e,hashes:t,machineInfo:this.machineInfo,vcsContext:dr()};P&&Oo.note({title:"RunStart",bodyLines:[`
`+JSON.stringify(s,null,2)]});let o=await ec("RunStart duration",()=>ce(()=>this.apiAxiosInstance.post("/nx-cloud/v2/runs/start",s)));return n.recordMetric(ne(o)),o.data&&o.data.message&&(this.messages.message=o.data.message),!o.data||!o.data.artifacts?(this.messages.apiError=`Invalid Nx Cloud response: ${JSON.stringify(o.data)}`,{}):o.data.artifacts}catch(s){return n.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),this.messages.apiError=this.messages.extractErrorMessage(s,"api"),{}}}createReqBody(e,t,n,i){let s={meta:{nxCloudVersion:this.nxCloudVersion()},tasks:t,run:e,linkId:i,...n,machineInfo:this.machineInfo,vcsContext:dr()};return JSON.stringify(s)}async endRun(e,t,n,i){var l;if(this.messages.apiError)return!1;e.runGroup=null,e.branch=null;let s=this.createReqBody(e,t,n,i);s.length>20*1e3*1e3&&(s=this.createReqBody(e,t.map(u=>({...u,hashDetails:void 0})),n,i));let o=Buffer.from(s),a=await(0,Zy.promisify)(Qy.gzip)(o),c=Ce("endRun");try{if(P){let f=t.map(h=>({...h,terminalOutput:h.terminalOutput?`${h.terminalOutput.slice(0,20)}...`:void 0}));Oo.note({title:"RunEnd. Completed tasks",bodyLines:[`
`+JSON.stringify(f,null,2)]})}let u=await ec("RunEnd duration",()=>ce(()=>this.apiAxiosInstance.post("/nx-cloud/runs/end",a,{headers:{...this.apiAxiosInstance.defaults.headers,"Content-Encoding":"gzip","Content-Type":"application/octet-stream"}})));if(u){if(c.recordMetric(ne(u)),u.data&&u.data.runUrl&&u.data.status==="success")return this.runContext.runUrl=u.data.runUrl,!0;u.data&&u.data.status?this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data.message)}`:u.data&&typeof u.data=="string"?u.data!=="success"&&(this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data)}`):this.messages.apiError=`Invalid end run response: ${JSON.stringify(u.data)}`,P&&Oo.note({title:"Invalid end run response",bodyLines:[JSON.stringify(u.data,null,2)]})}else Oo.error({title:"Nx Cloud: Unknown Error Occurred",bodyLines:["Run completion responded with `undefined`.","Run Details:",JSON.stringify(e,null,2),"Stack Trace:",JSON.stringify(new Error().stack,null,2)]});return!1}catch(u){c.recordMetric((l=u==null?void 0:u.axiosException)!=null&&l.response?ne(u.axiosException.response):Ie);let f=u.axiosException??u;return this.messages.apiError=this.messages.extractErrorMessage(f,"api"),!1}}nxCloudVersion(){try{let e=JSON.parse((0,Jy.readFileSync)("package.json").toString());return e.devDependencies["nx-cloud"]||e.devDependencies["@nrwl/nx-cloud"]}catch{return"unknown"}}}});function Co(){let r="";for(let e=0;e<10;++e)r+=eE[Math.floor(Math.random()*eE.length)];return r}var tE,hx,dx,eE,Wu=q(()=>{"use strict";tE="ABCDEFGHIJKLMNOPQRSTUVWXYZ",hx="0123456789",dx=tE.toLowerCase(),eE=tE+dx+hx});var dt=E(qe=>{"use strict";var Xu=require("path");Rr();try{try{let r;try{r=ie("nx/src/utils/app-root").workspaceRoot}catch{r=ie("nx/src/utils/workspace-root").workspaceRoot}let{getDependencyConfigs:e}=ie("nx/src/tasks-runner/utils"),t=ie("nx/tasks-runners/default").default,{CompositeLifeCycle:n}=ie("nx/src/tasks-runner/life-cycle"),i=null;try{i=ie("nx/src/index").initTasksRunner}catch{}let s;try{s=ie("nx/src/devkit-exports").cacheDir}catch{try{s=ie("nx/src/utils/cache-directory").cacheDir}catch{s=(0,Xu.join)(r,"./node_modules/.cache/nx")}}let o=ie("nx/src/tasks-runner/utils").isCacheableTask;qe.cacheDirectory=s,qe.runnerReturnsPromise=!0,qe.tasksRunner=t,qe.CompositeLifeCycle=n,qe.getDependencyConfigs=e,qe.initTasksRunner=i,qe.isCacheableTask=o}catch{let{appRootPath:e}=ie("@nrwl/tao/src/utils/app-root"),{getDependencyConfigs:t}=ie("@nrwl/workspace/src/tasks-runner/utils"),{tasksRunnerV2:n}=ie("@nrwl/workspace/src/tasks-runner/tasks-runner-v2"),i;try{i=ie("@nrwl/workspace/src/tasks-runner/life-cycle").CompositeLifeCycle}catch{}let s=ie("@nrwl/workspace/src/tasks-runner/utils").isCacheableTask;qe.cacheDirectory=(0,Xu.join)(e,"./node_modules/.cache/nx"),qe.runnerReturnsPromise=!1,qe.tasksRunner=n,qe.CompositeLifeCycle=i,qe.getDependencyConfigs=t,qe.initTasksRunner=null,qe.isCacheableTask=s}}catch(r){process.env.NX_VERBOSE_LOGGING==="true"&&console.log(r),console.error("NX CLOUD ERROR"),console.error("---------------------------------------"),console.error("This version of Nx Cloud is incompatible with the @nrwl/* and @nx/* packages in your workspace, or Nx was not installed properly."),console.error(""),console.error("Verify your install step was successful, and if it was,"),console.error("match your @nrwl/nx-cloud version to the same major version of your @nx/* and @nrwl/* packages and try again."),console.error("---------------------------------------"),process.exit(1)}});var We=E(Ku=>{"use strict";Ku.fromCallback=function(r){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")r.apply(this,arguments);else return new Promise((e,t)=>{arguments[arguments.length]=(n,i)=>{if(n)return t(n);e(i)},arguments.length++,r.apply(this,arguments)})},"name",{value:r.name})};Ku.fromPromise=function(r){return Object.defineProperty(function(){let e=arguments[arguments.length-1];if(typeof e!="function")return r.apply(this,arguments);r.apply(this,arguments).then(t=>e(null,t),e)},"name",{value:r.name})}});var nE=E((mk,rE)=>{"use strict";var pr=require("constants"),px=process.cwd,Io=null,mx=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Io||(Io=px.call(process)),Io};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Yu=process.chdir,process.chdir=function(r){Io=null,Yu.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Yu));var Yu;rE.exports=yx;function yx(r){pr.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=n(r.chmod),r.fchmod=n(r.fchmod),r.lchmod=n(r.lchmod),r.chownSync=o(r.chownSync),r.fchownSync=o(r.fchownSync),r.lchownSync=o(r.lchownSync),r.chmodSync=i(r.chmodSync),r.fchmodSync=i(r.fchmodSync),r.lchmodSync=i(r.lchmodSync),r.stat=a(r.stat),r.fstat=a(r.fstat),r.lstat=a(r.lstat),r.statSync=c(r.statSync),r.fstatSync=c(r.fstatSync),r.lstatSync=c(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(u,f,h){h&&process.nextTick(h)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(u,f,h,d){d&&process.nextTick(d)},r.lchownSync=function(){}),mx==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:function(u){function f(h,d,m){var b=Date.now(),p=0;u(h,d,function w(k){if(k&&(k.code==="EACCES"||k.code==="EPERM"||k.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){r.stat(d,function(x,C){x&&x.code==="ENOENT"?u(h,d,w):m(k)})},p),p<100&&(p+=10);return}m&&m(k)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(r.rename)),r.read=typeof r.read!="function"?r.read:function(u){function f(h,d,m,b,p,w){var k;if(w&&typeof w=="function"){var x=0;k=function(C,L,O){if(C&&C.code==="EAGAIN"&&x<10)return x++,u.call(r,h,d,m,b,p,k);w.apply(this,arguments)}}return u.call(r,h,d,m,b,p,k)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:function(u){return function(f,h,d,m,b){for(var p=0;;)try{return u.call(r,f,h,d,m,b)}catch(w){if(w.code==="EAGAIN"&&p<10){p++;continue}throw w}}}(r.readSync);function e(u){u.lchmod=function(f,h,d){u.open(f,pr.O_WRONLY|pr.O_SYMLINK,h,function(m,b){if(m){d&&d(m);return}u.fchmod(b,h,function(p){u.close(b,function(w){d&&d(p||w)})})})},u.lchmodSync=function(f,h){var d=u.openSync(f,pr.O_WRONLY|pr.O_SYMLINK,h),m=!0,b;try{b=u.fchmodSync(d,h),m=!1}finally{if(m)try{u.closeSync(d)}catch{}else u.closeSync(d)}return b}}function t(u){pr.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,h,d,m){u.open(f,pr.O_SYMLINK,function(b,p){if(b){m&&m(b);return}u.futimes(p,h,d,function(w){u.close(p,function(k){m&&m(w||k)})})})},u.lutimesSync=function(f,h,d){var m=u.openSync(f,pr.O_SYMLINK),b,p=!0;try{b=u.futimesSync(m,h,d),p=!1}finally{if(p)try{u.closeSync(m)}catch{}else u.closeSync(m)}return b}):u.futimes&&(u.lutimes=function(f,h,d,m){m&&process.nextTick(m)},u.lutimesSync=function(){})}function n(u){return u&&function(f,h,d){return u.call(r,f,h,function(m){l(m)&&(m=null),d&&d.apply(this,arguments)})}}function i(u){return u&&function(f,h){try{return u.call(r,f,h)}catch(d){if(!l(d))throw d}}}function s(u){return u&&function(f,h,d,m){return u.call(r,f,h,d,function(b){l(b)&&(b=null),m&&m.apply(this,arguments)})}}function o(u){return u&&function(f,h,d){try{return u.call(r,f,h,d)}catch(m){if(!l(m))throw m}}}function a(u){return u&&function(f,h,d){typeof h=="function"&&(d=h,h=null);function m(b,p){p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),d&&d.apply(this,arguments)}return h?u.call(r,f,h,m):u.call(r,f,m)}}function c(u){return u&&function(f,h){var d=h?u.call(r,f,h):u.call(r,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(u){if(!u||u.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var oE=E((yk,sE)=>{"use strict";var iE=require("stream").Stream;sE.exports=Ex;function Ex(r){return{ReadStream:e,WriteStream:t};function e(n,i){if(!(this instanceof e))return new e(n,i);iE.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,c=o.length;a<c;a++){var l=o[a];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(u,f){if(u){s.emit("error",u),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read()})}function t(n,i){if(!(this instanceof t))return new t(n,i);iE.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var c=s[o];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var cE=E((Ek,aE)=>{"use strict";aE.exports=_x;var gx=Object.getPrototypeOf||function(r){return r.__proto__};function _x(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:gx(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}});var ge=E((gk,Qu)=>{"use strict";var ue=require("fs"),bx=nE(),vx=oE(),Sx=cE(),No=require("util"),we,Do;typeof Symbol=="function"&&typeof Symbol.for=="function"?(we=Symbol.for("graceful-fs.queue"),Do=Symbol.for("graceful-fs.previous")):(we="___graceful-fs.queue",Do="___graceful-fs.previous");function wx(){}function fE(r,e){Object.defineProperty(r,we,{get:function(){return e}})}var Hr=wx;No.debuglog?Hr=No.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Hr=function(){var r=No.format.apply(No,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)});ue[we]||(uE=global[we]||[],fE(ue,uE),ue.close=function(r){function e(t,n){return r.call(ue,t,function(i){i||lE(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,Do,{value:r}),e}(ue.close),ue.closeSync=function(r){function e(t){r.apply(ue,arguments),lE()}return Object.defineProperty(e,Do,{value:r}),e}(ue.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Hr(ue[we]),require("assert").equal(ue[we].length,0)}));var uE;global[we]||fE(global,ue[we]);Qu.exports=Ju(Sx(ue));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ue.__patched&&(Qu.exports=Ju(ue),ue.__patched=!0);function Ju(r){bx(r),r.gracefulify=Ju,r.createReadStream=L,r.createWriteStream=O;var e=r.readFile;r.readFile=t;function t(I,N,j){return typeof N=="function"&&(j=N,N=null),X(I,N,j);function X(V,J,B,K){return e(V,J,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Ln([X,[V,J,B],$,K||Date.now(),Date.now()]):typeof B=="function"&&B.apply(this,arguments)})}}var n=r.writeFile;r.writeFile=i;function i(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return n(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var s=r.appendFile;s&&(r.appendFile=o);function o(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return s(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var a=r.copyFile;a&&(r.copyFile=c);function c(I,N,j,X){return typeof j=="function"&&(X=j,j=0),V(I,N,j,X);function V(J,B,K,$,U){return a(J,B,K,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var l=r.readdir;r.readdir=f;var u=/^v[0-5]\./;function f(I,N,j){typeof N=="function"&&(j=N,N=null);var X=u.test(process.version)?function(B,K,$,U){return l(B,V(B,K,$,U))}:function(B,K,$,U){return l(B,K,V(B,K,$,U))};return X(I,N,j);function V(J,B,K,$){return function(U,H){U&&(U.code==="EMFILE"||U.code==="ENFILE")?Ln([X,[J,B,K],U,$||Date.now(),Date.now()]):(H&&H.sort&&H.sort(),typeof K=="function"&&K.call(this,U,H))}}}if(process.version.substr(0,4)==="v0.8"){var h=vx(r);w=h.ReadStream,x=h.WriteStream}var d=r.ReadStream;d&&(w.prototype=Object.create(d.prototype),w.prototype.open=k);var m=r.WriteStream;m&&(x.prototype=Object.create(m.prototype),x.prototype.open=C),Object.defineProperty(r,"ReadStream",{get:function(){return w},set:function(I){w=I},enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:function(){return x},set:function(I){x=I},enumerable:!0,configurable:!0});var b=w;Object.defineProperty(r,"FileReadStream",{get:function(){return b},set:function(I){b=I},enumerable:!0,configurable:!0});var p=x;Object.defineProperty(r,"FileWriteStream",{get:function(){return p},set:function(I){p=I},enumerable:!0,configurable:!0});function w(I,N){return this instanceof w?(d.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function k(){var I=this;G(I.path,I.flags,I.mode,function(N,j){N?(I.autoClose&&I.destroy(),I.emit("error",N)):(I.fd=j,I.emit("open",j),I.read())})}function x(I,N){return this instanceof x?(m.apply(this,arguments),this):x.apply(Object.create(x.prototype),arguments)}function C(){var I=this;G(I.path,I.flags,I.mode,function(N,j){N?(I.destroy(),I.emit("error",N)):(I.fd=j,I.emit("open",j))})}function L(I,N){return new r.ReadStream(I,N)}function O(I,N){return new r.WriteStream(I,N)}var z=r.open;r.open=G;function G(I,N,j,X){return typeof j=="function"&&(X=j,j=null),V(I,N,j,X);function V(J,B,K,$,U){return z(J,B,K,function(H,le){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ln([V,[J,B,K,$],H,U||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}return r}function Ln(r){Hr("ENQUEUE",r[0].name,r[1]),ue[we].push(r),Zu()}var Ao;function lE(){for(var r=Date.now(),e=0;e<ue[we].length;++e)ue[we][e].length>2&&(ue[we][e][3]=r,ue[we][e][4]=r);Zu()}function Zu(){if(clearTimeout(Ao),Ao=void 0,ue[we].length!==0){var r=ue[we].shift(),e=r[0],t=r[1],n=r[2],i=r[3],s=r[4];if(i===void 0)Hr("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-i>=6e4){Hr("TIMEOUT",e.name,t);var o=t.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,c=Math.max(s-i,1),l=Math.min(c*1.2,100);a>=l?(Hr("RETRY",e.name,t),e.apply(null,t.concat([i]))):ue[we].push(r)}Ao===void 0&&(Ao=setTimeout(Zu,0))}}});var el=E(Pn=>{"use strict";var Rx=We().fromCallback,Ot=ge(),Tx=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof Ot[r]=="function");Object.keys(Ot).forEach(r=>{r!=="promises"&&(Pn[r]=Ot[r])});Tx.forEach(r=>{Pn[r]=Rx(Ot[r])});Pn.exists=function(r,e){return typeof e=="function"?Ot.exists(r,e):new Promise(t=>Ot.exists(r,t))};Pn.read=function(r,e,t,n,i,s){return typeof s=="function"?Ot.read(r,e,t,n,i,s):new Promise((o,a)=>{Ot.read(r,e,t,n,i,(c,l,u)=>{if(c)return a(c);o({bytesRead:l,buffer:u})})})};Pn.write=function(r,e,...t){return typeof t[t.length-1]=="function"?Ot.write(r,e,...t):new Promise((n,i)=>{Ot.write(r,e,...t,(s,o,a)=>{if(s)return i(s);n({bytesWritten:o,buffer:a})})})}});var rl=E((bk,dE)=>{"use strict";var tl=require("path");function hE(r){return r=tl.normalize(tl.resolve(r)).split(tl.sep),r.length>0?r[0]:null}var xx=/[<>:"|?*]/;function Ox(r){let e=hE(r);return r=r.replace(e,""),xx.test(r)}dE.exports={getRootPath:hE,invalidWin32Path:Ox}});var mE=E((vk,pE)=>{"use strict";var Cx=ge(),nl=require("path"),Ix=rl().invalidWin32Path,Nx=parseInt("0777",8);function il(r,e,t,n){if(typeof e=="function"?(t=e,e={}):(!e||typeof e!="object")&&(e={mode:e}),process.platform==="win32"&&Ix(r)){let o=new Error(r+" contains invalid WIN32 path characters.");return o.code="EINVAL",t(o)}let i=e.mode,s=e.fs||Cx;i===void 0&&(i=Nx&~process.umask()),n||(n=null),t=t||function(){},r=nl.resolve(r),s.mkdir(r,i,o=>{if(!o)return n=n||r,t(null,n);switch(o.code){case"ENOENT":if(nl.dirname(r)===r)return t(o);il(nl.dirname(r),e,(a,c)=>{a?t(a,c):il(r,e,t,c)});break;default:s.stat(r,(a,c)=>{a||!c.isDirectory()?t(o,n):t(null,n)});break}})}pE.exports=il});var EE=E((Sk,yE)=>{"use strict";var Ax=ge(),sl=require("path"),Dx=rl().invalidWin32Path,kx=parseInt("0777",8);function ol(r,e,t){(!e||typeof e!="object")&&(e={mode:e});let n=e.mode,i=e.fs||Ax;if(process.platform==="win32"&&Dx(r)){let s=new Error(r+" contains invalid WIN32 path characters.");throw s.code="EINVAL",s}n===void 0&&(n=kx&~process.umask()),t||(t=null),r=sl.resolve(r);try{i.mkdirSync(r,n),t=t||r}catch(s){if(s.code==="ENOENT"){if(sl.dirname(r)===r)throw s;t=ol(sl.dirname(r),e,t),ol(r,e,t)}else{let o;try{o=i.statSync(r)}catch{throw s}if(!o.isDirectory())throw s}}return t}yE.exports=ol});var et=E((wk,gE)=>{"use strict";var Lx=We().fromCallback,al=Lx(mE()),cl=EE();gE.exports={mkdirs:al,mkdirsSync:cl,mkdirp:al,mkdirpSync:cl,ensureDir:al,ensureDirSync:cl}});var ul=E((Rk,bE)=>{"use strict";var Le=ge(),_E=require("os"),ko=require("path");function Px(){let r=ko.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));r=ko.join(_E.tmpdir(),r);let e=new Date(1435410243862);Le.writeFileSync(r,"https://github.com/jprichardson/node-fs-extra/pull/141");let t=Le.openSync(r,"r+");return Le.futimesSync(t,e,e),Le.closeSync(t),Le.statSync(r).mtime>1435410243e3}function Ux(r){let e=ko.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));e=ko.join(_E.tmpdir(),e);let t=new Date(1435410243862);Le.writeFile(e,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return r(n);Le.open(e,"r+",(i,s)=>{if(i)return r(i);Le.futimes(s,t,t,o=>{if(o)return r(o);Le.close(s,a=>{if(a)return r(a);Le.stat(e,(c,l)=>{if(c)return r(c);r(null,l.mtime>1435410243e3)})})})})})}function Mx(r){if(typeof r=="number")return Math.floor(r/1e3)*1e3;if(r instanceof Date)return new Date(Math.floor(r.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function Fx(r,e,t,n){Le.open(r,"r+",(i,s)=>{if(i)return n(i);Le.futimes(s,e,t,o=>{Le.close(s,a=>{n&&n(o||a)})})})}function qx(r,e,t){let n=Le.openSync(r,"r+");return Le.futimesSync(n,e,t),Le.closeSync(n)}bE.exports={hasMillisRes:Ux,hasMillisResSync:Px,timeRemoveMillis:Mx,utimesMillis:Fx,utimesMillisSync:qx}});var ll=E((Tk,vE)=>{"use strict";vE.exports=function(r){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(r)}catch{return new Buffer(r)}return new Buffer(r)}});var OE=E((xk,xE)=>{"use strict";var oe=ge(),$t=require("path"),Bx=et().mkdirsSync,jx=ul().utimesMillisSync,Lo=Symbol("notExist");function Gx(r,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let n=TE(r,e);if(t.filter&&!t.filter(r,e))return;let i=$t.dirname(e);return oe.existsSync(i)||Bx(i),SE(n,r,e,t)}function SE(r,e,t,n){if(!(n.filter&&!n.filter(e,t)))return $x(r,e,t,n)}function $x(r,e,t,n){let s=(n.dereference?oe.statSync:oe.lstatSync)(e);if(s.isDirectory())return Wx(s,r,e,t,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Hx(s,r,e,t,n);if(s.isSymbolicLink())return Yx(r,e,t,n)}function Hx(r,e,t,n,i){return e===Lo?wE(r,t,n,i):zx(r,t,n,i)}function zx(r,e,t,n){if(n.overwrite)return oe.unlinkSync(t),wE(r,e,t,n);if(n.errorOnExist)throw new Error(`'${t}' already exists`)}function wE(r,e,t,n){return typeof oe.copyFileSync=="function"?(oe.copyFileSync(e,t),oe.chmodSync(t,r.mode),n.preserveTimestamps?jx(t,r.atime,r.mtime):void 0):Vx(r,e,t,n)}function Vx(r,e,t,n){let s=ll()(65536),o=oe.openSync(e,"r"),a=oe.openSync(t,"w",r.mode),c=0;for(;c<r.size;){let l=oe.readSync(o,s,0,65536,c);oe.writeSync(a,s,0,l),c+=l}n.preserveTimestamps&&oe.futimesSync(a,r.atime,r.mtime),oe.closeSync(o),oe.closeSync(a)}function Wx(r,e,t,n,i){if(e===Lo)return Xx(r,t,n,i);if(e&&!e.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`);return RE(t,n,i)}function Xx(r,e,t,n){return oe.mkdirSync(t),RE(e,t,n),oe.chmodSync(t,r.mode)}function RE(r,e,t){oe.readdirSync(r).forEach(n=>Kx(n,r,e,t))}function Kx(r,e,t,n){let i=$t.join(e,r),s=$t.join(t,r),o=TE(i,s);return SE(o,i,s,n)}function Yx(r,e,t,n){let i=oe.readlinkSync(e);if(n.dereference&&(i=$t.resolve(process.cwd(),i)),r===Lo)return oe.symlinkSync(i,t);{let s;try{s=oe.readlinkSync(t)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return oe.symlinkSync(i,t);throw o}if(n.dereference&&(s=$t.resolve(process.cwd(),s)),fl(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(oe.statSync(t).isDirectory()&&fl(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return Jx(i,t)}}function Jx(r,e){return oe.unlinkSync(e),oe.symlinkSync(r,e)}function fl(r,e){let t=$t.resolve(r).split($t.sep),n=$t.resolve(e).split($t.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}function Zx(r,e){let t=oe.statSync(r),n;try{n=oe.statSync(e)}catch(i){if(i.code==="ENOENT")return{srcStat:t,destStat:Lo};throw i}return{srcStat:t,destStat:n}}function TE(r,e){let{srcStat:t,destStat:n}=Zx(r,e);if(n.ino&&n.ino===t.ino)throw new Error("Source and destination must not be the same.");if(t.isDirectory()&&fl(r,e))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${e}'.`);return n}xE.exports=Gx});var hl=E((Ok,CE)=>{"use strict";CE.exports={copySync:OE()}});var Ct=E((Ck,NE)=>{"use strict";var Qx=We().fromPromise,IE=el();function eO(r){return IE.access(r).then(()=>!0).catch(()=>!1)}NE.exports={pathExists:Qx(eO),pathExistsSync:IE.existsSync}});var BE=E((Ik,qE)=>{"use strict";var he=ge(),Ht=require("path"),tO=et().mkdirs,rO=Ct().pathExists,nO=ul().utimesMillis,Po=Symbol("notExist");function iO(r,e,t,n){typeof t=="function"&&!n?(n=t,t={}):typeof t=="function"&&(t={filter:t}),n=n||function(){},t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),FE(r,e,(i,s)=>i?n(i):t.filter?kE(AE,s,r,e,t,n):AE(s,r,e,t,n))}function AE(r,e,t,n,i){let s=Ht.dirname(t);rO(s,(o,a)=>{if(o)return i(o);if(a)return dl(r,e,t,n,i);tO(s,c=>c?i(c):dl(r,e,t,n,i))})}function kE(r,e,t,n,i,s){Promise.resolve(i.filter(t,n)).then(o=>o?e?r(e,t,n,i,s):r(t,n,i,s):s(),o=>s(o))}function dl(r,e,t,n,i){return n.filter?kE(DE,r,e,t,n,i):DE(r,e,t,n,i)}function DE(r,e,t,n,i){(n.dereference?he.stat:he.lstat)(e,(o,a)=>{if(o)return i(o);if(a.isDirectory())return cO(a,r,e,t,n,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return sO(a,r,e,t,n,i);if(a.isSymbolicLink())return fO(r,e,t,n,i)})}function sO(r,e,t,n,i,s){return e===Po?LE(r,t,n,i,s):oO(r,t,n,i,s)}function oO(r,e,t,n,i){if(n.overwrite)he.unlink(t,s=>s?i(s):LE(r,e,t,n,i));else return n.errorOnExist?i(new Error(`'${t}' already exists`)):i()}function LE(r,e,t,n,i){return typeof he.copyFile=="function"?he.copyFile(e,t,s=>s?i(s):PE(r,t,n,i)):aO(r,e,t,n,i)}function aO(r,e,t,n,i){let s=he.createReadStream(e);s.on("error",o=>i(o)).once("open",()=>{let o=he.createWriteStream(t,{mode:r.mode});o.on("error",a=>i(a)).on("open",()=>s.pipe(o)).once("close",()=>PE(r,t,n,i))})}function PE(r,e,t,n){he.chmod(e,r.mode,i=>i?n(i):t.preserveTimestamps?nO(e,r.atime,r.mtime,n):n())}function cO(r,e,t,n,i,s){return e===Po?uO(r,t,n,i,s):e&&!e.isDirectory()?s(new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`)):UE(t,n,i,s)}function uO(r,e,t,n,i){he.mkdir(t,s=>{if(s)return i(s);UE(e,t,n,o=>o?i(o):he.chmod(t,r.mode,i))})}function UE(r,e,t,n){he.readdir(r,(i,s)=>i?n(i):ME(s,r,e,t,n))}function ME(r,e,t,n,i){let s=r.pop();return s?lO(r,s,e,t,n,i):i()}function lO(r,e,t,n,i,s){let o=Ht.join(t,e),a=Ht.join(n,e);FE(o,a,(c,l)=>{if(c)return s(c);dl(l,o,a,i,u=>u?s(u):ME(r,t,n,i,s))})}function fO(r,e,t,n,i){he.readlink(e,(s,o)=>{if(s)return i(s);if(n.dereference&&(o=Ht.resolve(process.cwd(),o)),r===Po)return he.symlink(o,t,i);he.readlink(t,(a,c)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?he.symlink(o,t,i):i(a):(n.dereference&&(c=Ht.resolve(process.cwd(),c)),pl(o,c)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${c}'.`)):r.isDirectory()&&pl(c,o)?i(new Error(`Cannot overwrite '${c}' with '${o}'.`)):hO(o,t,i)))})}function hO(r,e,t){he.unlink(e,n=>n?t(n):he.symlink(r,e,t))}function pl(r,e){let t=Ht.resolve(r).split(Ht.sep),n=Ht.resolve(e).split(Ht.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}function dO(r,e,t){he.stat(r,(n,i)=>{if(n)return t(n);he.stat(e,(s,o)=>s?s.code==="ENOENT"?t(null,{srcStat:i,destStat:Po}):t(s):t(null,{srcStat:i,destStat:o}))})}function FE(r,e,t){dO(r,e,(n,i)=>{if(n)return t(n);let{srcStat:s,destStat:o}=i;return o.ino&&o.ino===s.ino?t(new Error("Source and destination must not be the same.")):s.isDirectory()&&pl(r,e)?t(new Error(`Cannot copy '${r}' to a subdirectory of itself, '${e}'.`)):t(null,o)})}qE.exports=iO});var ml=E((Nk,jE)=>{"use strict";var pO=We().fromCallback;jE.exports={copy:pO(BE())}});var YE=E((Ak,KE)=>{"use strict";var GE=ge(),VE=require("path"),ee=require("assert"),wi=process.platform==="win32";function WE(r){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{r[t]=r[t]||GE[t],t=t+"Sync",r[t]=r[t]||GE[t]}),r.maxBusyTries=r.maxBusyTries||3}function yl(r,e,t){let n=0;typeof e=="function"&&(t=e,e={}),ee(r,"rimraf: missing path"),ee.strictEqual(typeof r,"string","rimraf: path should be a string"),ee.strictEqual(typeof t,"function","rimraf: callback function required"),ee(e,"rimraf: invalid options argument provided"),ee.strictEqual(typeof e,"object","rimraf: options should be object"),WE(e),$E(r,e,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&n<e.maxBusyTries){n++;let o=n*100;return setTimeout(()=>$E(r,e,i),o)}s.code==="ENOENT"&&(s=null)}t(s)})}function $E(r,e,t){ee(r),ee(e),ee(typeof t=="function"),e.lstat(r,(n,i)=>{if(n&&n.code==="ENOENT")return t(null);if(n&&n.code==="EPERM"&&wi)return HE(r,e,n,t);if(i&&i.isDirectory())return Uo(r,e,n,t);e.unlink(r,s=>{if(s){if(s.code==="ENOENT")return t(null);if(s.code==="EPERM")return wi?HE(r,e,s,t):Uo(r,e,s,t);if(s.code==="EISDIR")return Uo(r,e,s,t)}return t(s)})})}function HE(r,e,t,n){ee(r),ee(e),ee(typeof n=="function"),t&&ee(t instanceof Error),e.chmod(r,438,i=>{i?n(i.code==="ENOENT"?null:t):e.stat(r,(s,o)=>{s?n(s.code==="ENOENT"?null:t):o.isDirectory()?Uo(r,e,t,n):e.unlink(r,n)})})}function zE(r,e,t){let n;ee(r),ee(e),t&&ee(t instanceof Error);try{e.chmodSync(r,438)}catch(i){if(i.code==="ENOENT")return;throw t}try{n=e.statSync(r)}catch(i){if(i.code==="ENOENT")return;throw t}n.isDirectory()?Mo(r,e,t):e.unlinkSync(r)}function Uo(r,e,t,n){ee(r),ee(e),t&&ee(t instanceof Error),ee(typeof n=="function"),e.rmdir(r,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?mO(r,e,n):i&&i.code==="ENOTDIR"?n(t):n(i)})}function mO(r,e,t){ee(r),ee(e),ee(typeof t=="function"),e.readdir(r,(n,i)=>{if(n)return t(n);let s=i.length,o;if(s===0)return e.rmdir(r,t);i.forEach(a=>{yl(VE.join(r,a),e,c=>{if(!o){if(c)return t(o=c);--s===0&&e.rmdir(r,t)}})})})}function XE(r,e){let t;e=e||{},WE(e),ee(r,"rimraf: missing path"),ee.strictEqual(typeof r,"string","rimraf: path should be a string"),ee(e,"rimraf: missing options"),ee.strictEqual(typeof e,"object","rimraf: options should be object");try{t=e.lstatSync(r)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&wi&&zE(r,e,n)}try{t&&t.isDirectory()?Mo(r,e,null):e.unlinkSync(r)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return wi?zE(r,e,n):Mo(r,e,n);if(n.code!=="EISDIR")throw n;Mo(r,e,n)}}function Mo(r,e,t){ee(r),ee(e),t&&ee(t instanceof Error);try{e.rmdirSync(r)}catch(n){if(n.code==="ENOTDIR")throw t;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")yO(r,e);else if(n.code!=="ENOENT")throw n}}function yO(r,e){if(ee(r),ee(e),e.readdirSync(r).forEach(t=>XE(VE.join(r,t),e)),wi){let t=Date.now();do try{return e.rmdirSync(r,e)}catch{}while(Date.now()-t<500)}else return e.rmdirSync(r,e)}KE.exports=yl;yl.sync=XE});var Ri=E((Dk,ZE)=>{"use strict";var EO=We().fromCallback,JE=YE();ZE.exports={remove:EO(JE),removeSync:JE.sync}});var og=E((kk,sg)=>{"use strict";var gO=We().fromCallback,tg=require("fs"),rg=require("path"),ng=et(),ig=Ri(),QE=gO(function(e,t){t=t||function(){},tg.readdir(e,(n,i)=>{if(n)return ng.mkdirs(e,t);i=i.map(o=>rg.join(e,o)),s();function s(){let o=i.pop();if(!o)return t();ig.remove(o,a=>{if(a)return t(a);s()})}})});function eg(r){let e;try{e=tg.readdirSync(r)}catch{return ng.mkdirsSync(r)}e.forEach(t=>{t=rg.join(r,t),ig.removeSync(t)})}sg.exports={emptyDirSync:eg,emptydirSync:eg,emptyDir:QE,emptydir:QE}});var lg=E((Lk,ug)=>{"use strict";var _O=We().fromCallback,ag=require("path"),Ti=ge(),cg=et(),bO=Ct().pathExists;function vO(r,e){function t(){Ti.writeFile(r,"",n=>{if(n)return e(n);e()})}Ti.stat(r,(n,i)=>{if(!n&&i.isFile())return e();let s=ag.dirname(r);bO(s,(o,a)=>{if(o)return e(o);if(a)return t();cg.mkdirs(s,c=>{if(c)return e(c);t()})})})}function SO(r){let e;try{e=Ti.statSync(r)}catch{}if(e&&e.isFile())return;let t=ag.dirname(r);Ti.existsSync(t)||cg.mkdirsSync(t),Ti.writeFileSync(r,"")}ug.exports={createFile:_O(vO),createFileSync:SO}});var mg=E((Pk,pg)=>{"use strict";var wO=We().fromCallback,hg=require("path"),zr=ge(),dg=et(),fg=Ct().pathExists;function RO(r,e,t){function n(i,s){zr.link(i,s,o=>{if(o)return t(o);t(null)})}fg(e,(i,s)=>{if(i)return t(i);if(s)return t(null);zr.lstat(r,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),t(o);let a=hg.dirname(e);fg(a,(c,l)=>{if(c)return t(c);if(l)return n(r,e);dg.mkdirs(a,u=>{if(u)return t(u);n(r,e)})})})})}function TO(r,e){if(zr.existsSync(e))return;try{zr.lstatSync(r)}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=hg.dirname(e);return zr.existsSync(n)||dg.mkdirsSync(n),zr.linkSync(r,e)}pg.exports={createLink:wO(RO),createLinkSync:TO}});var Eg=E((Uk,yg)=>{"use strict";var mr=require("path"),xi=ge(),xO=Ct().pathExists;function OO(r,e,t){if(mr.isAbsolute(r))return xi.lstat(r,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),t(n)):t(null,{toCwd:r,toDst:r}));{let n=mr.dirname(e),i=mr.join(n,r);return xO(i,(s,o)=>s?t(s):o?t(null,{toCwd:i,toDst:r}):xi.lstat(r,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),t(a)):t(null,{toCwd:r,toDst:mr.relative(n,r)})))}}function CO(r,e){let t;if(mr.isAbsolute(r)){if(t=xi.existsSync(r),!t)throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}else{let n=mr.dirname(e),i=mr.join(n,r);if(t=xi.existsSync(i),t)return{toCwd:i,toDst:r};if(t=xi.existsSync(r),!t)throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:mr.relative(n,r)}}}yg.exports={symlinkPaths:OO,symlinkPathsSync:CO}});var bg=E((Mk,_g)=>{"use strict";var gg=ge();function IO(r,e,t){if(t=typeof e=="function"?e:t,e=typeof e=="function"?!1:e,e)return t(null,e);gg.lstat(r,(n,i)=>{if(n)return t(null,"file");e=i&&i.isDirectory()?"dir":"file",t(null,e)})}function NO(r,e){let t;if(e)return e;try{t=gg.lstatSync(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}_g.exports={symlinkType:IO,symlinkTypeSync:NO}});var Og=E((Fk,xg)=>{"use strict";var AO=We().fromCallback,Sg=require("path"),Un=ge(),wg=et(),DO=wg.mkdirs,kO=wg.mkdirsSync,Rg=Eg(),LO=Rg.symlinkPaths,PO=Rg.symlinkPathsSync,Tg=bg(),UO=Tg.symlinkType,MO=Tg.symlinkTypeSync,vg=Ct().pathExists;function FO(r,e,t,n){n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,vg(e,(i,s)=>{if(i)return n(i);if(s)return n(null);LO(r,e,(o,a)=>{if(o)return n(o);r=a.toDst,UO(a.toCwd,t,(c,l)=>{if(c)return n(c);let u=Sg.dirname(e);vg(u,(f,h)=>{if(f)return n(f);if(h)return Un.symlink(r,e,l,n);DO(u,d=>{if(d)return n(d);Un.symlink(r,e,l,n)})})})})})}function qO(r,e,t){if(Un.existsSync(e))return;let i=PO(r,e);r=i.toDst,t=MO(i.toCwd,t);let s=Sg.dirname(e);return Un.existsSync(s)||kO(s),Un.symlinkSync(r,e,t)}xg.exports={createSymlink:AO(FO),createSymlinkSync:qO}});var Ig=E((qk,Cg)=>{"use strict";var Fo=lg(),qo=mg(),Bo=Og();Cg.exports={createFile:Fo.createFile,createFileSync:Fo.createFileSync,ensureFile:Fo.createFile,ensureFileSync:Fo.createFileSync,createLink:qo.createLink,createLinkSync:qo.createLinkSync,ensureLink:qo.createLink,ensureLinkSync:qo.createLinkSync,createSymlink:Bo.createSymlink,createSymlinkSync:Bo.createSymlinkSync,ensureSymlink:Bo.createSymlink,ensureSymlinkSync:Bo.createSymlinkSync}});var kg=E((Bk,Dg)=>{"use strict";var Mn;try{Mn=ge()}catch{Mn=require("fs")}function BO(r,e,t){t==null&&(t=e,e={}),typeof e=="string"&&(e={encoding:e}),e=e||{};var n=e.fs||Mn,i=!0;"throws"in e&&(i=e.throws),n.readFile(r,e,function(s,o){if(s)return t(s);o=Ag(o);var a;try{a=JSON.parse(o,e?e.reviver:null)}catch(c){return i?(c.message=r+": "+c.message,t(c)):t(null,null)}t(null,a)})}function jO(r,e){e=e||{},typeof e=="string"&&(e={encoding:e});var t=e.fs||Mn,n=!0;"throws"in e&&(n=e.throws);try{var i=t.readFileSync(r,e);return i=Ag(i),JSON.parse(i,e.reviver)}catch(s){if(n)throw s.message=r+": "+s.message,s;return null}}function Ng(r,e){var t,n=`
`;typeof e=="object"&&e!==null&&(e.spaces&&(t=e.spaces),e.EOL&&(n=e.EOL));var i=JSON.stringify(r,e?e.replacer:null,t);return i.replace(/\n/g,n)+n}function GO(r,e,t,n){n==null&&(n=t,t={}),t=t||{};var i=t.fs||Mn,s="";try{s=Ng(e,t)}catch(o){n&&n(o,null);return}i.writeFile(r,s,t,n)}function $O(r,e,t){t=t||{};var n=t.fs||Mn,i=Ng(e,t);return n.writeFileSync(r,i,t)}function Ag(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r=r.replace(/^\uFEFF/,""),r}var HO={readFile:BO,readFileSync:jO,writeFile:GO,writeFileSync:$O};Dg.exports=HO});var Go=E((jk,Pg)=>{"use strict";var Lg=We().fromCallback,jo=kg();Pg.exports={readJson:Lg(jo.readFile),readJsonSync:jo.readFileSync,writeJson:Lg(jo.writeFile),writeJsonSync:jo.writeFileSync}});var Fg=E((Gk,Mg)=>{"use strict";var zO=require("path"),VO=et(),WO=Ct().pathExists,Ug=Go();function XO(r,e,t,n){typeof t=="function"&&(n=t,t={});let i=zO.dirname(r);WO(i,(s,o)=>{if(s)return n(s);if(o)return Ug.writeJson(r,e,t,n);VO.mkdirs(i,a=>{if(a)return n(a);Ug.writeJson(r,e,t,n)})})}Mg.exports=XO});var Bg=E(($k,qg)=>{"use strict";var KO=ge(),YO=require("path"),JO=et(),ZO=Go();function QO(r,e,t){let n=YO.dirname(r);KO.existsSync(n)||JO.mkdirsSync(n),ZO.writeJsonSync(r,e,t)}qg.exports=QO});var Gg=E((Hk,jg)=>{"use strict";var eC=We().fromCallback,Be=Go();Be.outputJson=eC(Fg());Be.outputJsonSync=Bg();Be.outputJSON=Be.outputJson;Be.outputJSONSync=Be.outputJsonSync;Be.writeJSON=Be.writeJson;Be.writeJSONSync=Be.writeJsonSync;Be.readJSON=Be.readJson;Be.readJSONSync=Be.readJsonSync;jg.exports=Be});var Vg=E((zk,zg)=>{"use strict";var Xe=ge(),Vr=require("path"),tC=hl().copySync,El=Ri().removeSync,rC=et().mkdirsSync,nC=ll();function Hg(r,e,t){t=t||{};let n=t.overwrite||t.clobber||!1;if(r=Vr.resolve(r),e=Vr.resolve(e),r===e)return Xe.accessSync(r);if(oC(r,e))throw new Error(`Cannot move '${r}' into itself '${e}'.`);rC(Vr.dirname(e)),i();function i(){if(n)try{return Xe.renameSync(r,e)}catch(s){if(s.code==="ENOTEMPTY"||s.code==="EEXIST"||s.code==="EPERM")return El(e),t.overwrite=!1,Hg(r,e,t);if(s.code!=="EXDEV")throw s;return $g(r,e,n)}else try{return Xe.linkSync(r,e),Xe.unlinkSync(r)}catch(s){if(s.code==="EXDEV"||s.code==="EISDIR"||s.code==="EPERM"||s.code==="ENOTSUP")return $g(r,e,n);throw s}}}function $g(r,e,t){return Xe.statSync(r).isDirectory()?sC(r,e,t):iC(r,e,t)}function iC(r,e,t){let i=nC(65536),s=t?"w":"wx",o=Xe.openSync(r,"r"),a=Xe.fstatSync(o),c=Xe.openSync(e,s,a.mode),l=0;for(;l<a.size;){let u=Xe.readSync(o,i,0,65536,l);Xe.writeSync(c,i,0,u),l+=u}return Xe.closeSync(o),Xe.closeSync(c),Xe.unlinkSync(r)}function sC(r,e,t){let n={overwrite:!1};t&&El(e),i();function i(){return tC(r,e,n),El(r)}}function oC(r,e){try{return Xe.statSync(r).isDirectory()&&r!==e&&e.indexOf(r)>-1&&e.split(Vr.dirname(r)+Vr.sep)[1].split(Vr.sep)[0]===Vr.basename(r)}catch{return!1}}zg.exports={moveSync:Hg}});var Yg=E((Vk,Kg)=>{"use strict";var aC=We().fromCallback,gl=ge(),Oi=require("path"),cC=ml().copy,Xg=Ri().remove,uC=et().mkdirp,lC=Ct().pathExists;function fC(r,e,t,n){typeof t=="function"&&(n=t,t={});let i=t.overwrite||t.clobber||!1;if(r=Oi.resolve(r),e=Oi.resolve(e),r===e)return gl.access(r,n);gl.stat(r,(s,o)=>{if(s)return n(s);if(o.isDirectory()&&pC(r,e))return n(new Error(`Cannot move '${r}' to a subdirectory of itself, '${e}'.`));uC(Oi.dirname(e),a=>a?n(a):hC(r,e,i,n))})}function hC(r,e,t,n){if(t)return Xg(e,i=>i?n(i):Wg(r,e,t,n));lC(e,(i,s)=>i?n(i):s?n(new Error("dest already exists.")):Wg(r,e,t,n))}function Wg(r,e,t,n){gl.rename(r,e,i=>i?i.code!=="EXDEV"?n(i):dC(r,e,t,n):n())}function dC(r,e,t,n){cC(r,e,{overwrite:t,errorOnExist:!0},s=>s?n(s):Xg(r,n))}function pC(r,e){let t=r.split(Oi.sep),n=e.split(Oi.sep);return t.reduce((i,s,o)=>i&&n[o]===s,!0)}Kg.exports={move:aC(fC)}});var e_=E((Wk,Qg)=>{"use strict";var mC=We().fromCallback,Ci=ge(),Jg=require("path"),Zg=et(),yC=Ct().pathExists;function EC(r,e,t,n){typeof t=="function"&&(n=t,t="utf8");let i=Jg.dirname(r);yC(i,(s,o)=>{if(s)return n(s);if(o)return Ci.writeFile(r,e,t,n);Zg.mkdirs(i,a=>{if(a)return n(a);Ci.writeFile(r,e,t,n)})})}function gC(r,...e){let t=Jg.dirname(r);if(Ci.existsSync(t))return Ci.writeFileSync(r,...e);Zg.mkdirsSync(t),Ci.writeFileSync(r,...e)}Qg.exports={outputFile:mC(EC),outputFileSync:gC}});var bl=E((Xk,_l)=>{"use strict";_l.exports=Object.assign({},el(),hl(),ml(),og(),Ig(),Gg(),et(),Vg(),Yg(),e_(),Ct(),Ri());var t_=require("fs");Object.getOwnPropertyDescriptor(t_,"promises")&&Object.defineProperty(_l.exports,"promises",{get(){return t_.promises}})});var Sl=E(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});function _C(r){return typeof r=="function"}vl.isFunction=_C});var $o=E(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});var wl=!1;Rl.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var e=new Error;console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+e.stack)}else wl&&console.log("RxJS: Back to a better error behavior. Thank you. <3");wl=r},get useDeprecatedSynchronousErrorHandling(){return wl}}});var Ho=E(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});function bC(r){setTimeout(function(){throw r},0)}Tl.hostReportError=bC});var Ol=E(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var vC=$o(),SC=Ho();xl.empty={closed:!0,next:function(r){},error:function(r){if(vC.config.useDeprecatedSynchronousErrorHandling)throw r;SC.hostReportError(r)},complete:function(){}}});var r_=E(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}()});var Nl=E(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});function wC(r){return r!==null&&typeof r=="object"}Il.isObject=wC});var n_=E(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var RC=function(){function r(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return r.prototype=Object.create(Error.prototype),r}();Al.UnsubscriptionError=RC});var yr=E(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var TC=r_(),xC=Nl(),OC=Sl(),zo=n_(),CC=function(){function r(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,n=t._parentOrParents,i=t._unsubscribe,s=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var o=0;o<n.length;++o){var a=n[o];a.remove(this)}if(OC.isFunction(i))try{i.call(this)}catch(u){e=u instanceof zo.UnsubscriptionError?i_(u.errors):[u]}if(TC.isArray(s))for(var o=-1,c=s.length;++o<c;){var l=s[o];if(xC.isObject(l))try{l.unsubscribe()}catch(f){e=e||[],f instanceof zo.UnsubscriptionError?e=e.concat(i_(f.errors)):e.push(f)}}if(e)throw new zo.UnsubscriptionError(e)}},r.prototype.add=function(e){var t=e;if(!e)return r.EMPTY;switch(typeof e){case"function":t=new r(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof r)){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=t._parentOrParents;if(i===null)t._parentOrParents=this;else if(i instanceof r){if(i===this)return t;t._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return t;var s=this._subscriptions;return s===null?this._subscriptions=[t]:s.push(t),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();Dl.Subscription=CC;function i_(r){return r.reduce(function(e,t){return e.concat(t instanceof zo.UnsubscriptionError?t.errors:t)},[])}});var Vo=E(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();Ii.$$rxSubscriber=Ii.rxSubscriber});var Wr=E(qn=>{"use strict";var o_=qn&&qn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qn,"__esModule",{value:!0});var s_=Sl(),kl=Ol(),IC=yr(),NC=Vo(),Fn=$o(),Wo=Ho(),a_=function(r){o_(e,r);function e(t,n,i){var s=r.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=kl.empty;break;case 1:if(!t){s.destination=kl.empty;break}if(typeof t=="object"){t instanceof e?(s.syncErrorThrowable=t.syncErrorThrowable,s.destination=t,t.add(s)):(s.syncErrorThrowable=!0,s.destination=new Ll(s,t));break}default:s.syncErrorThrowable=!0,s.destination=new Ll(s,t,n,i);break}return s}return e.prototype[NC.rxSubscriber]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(IC.Subscription);qn.Subscriber=a_;var Ll=function(r){o_(e,r);function e(t,n,i,s){var o=r.call(this)||this;o._parentSubscriber=t;var a,c=o;return s_.isFunction(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==kl.empty&&(c=Object.create(n),s_.isFunction(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Fn.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(n,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,i=Fn.config.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(n,this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=t,n.syncErrorThrown=!0):Wo.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;Wo.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};!Fn.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(i){if(this.unsubscribe(),Fn.config.useDeprecatedSynchronousErrorHandling)throw i;Wo.hostReportError(i)}},e.prototype.__tryOrSetError=function(t,n,i){if(!Fn.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return Fn.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=s,t.syncErrorThrown=!0,!0):(Wo.hostReportError(s),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(a_);qn.SafeSubscriber=Ll});var c_=E(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var AC=Wr();function DC(r){for(;r;){var e=r,t=e.closed,n=e.destination,i=e.isStopped;if(t||i)return!1;n&&n instanceof AC.Subscriber?r=n:r=null}return!0}Pl.canReportError=DC});var l_=E(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var Ul=Wr(),u_=Vo(),kC=Ol();function LC(r,e,t){if(r){if(r instanceof Ul.Subscriber)return r;if(r[u_.rxSubscriber])return r[u_.rxSubscriber]()}return!r&&!e&&!t?new Ul.Subscriber(kC.empty):new Ul.Subscriber(r,e,t)}Ml.toSubscriber=LC});var Bn=E(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var f_=E(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});function PC(r){return r}ql.identity=PC});var d_=E(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var UC=f_();function MC(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return h_(r)}Xo.pipe=MC;function h_(r){return r.length===0?UC.identity:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}Xo.pipeFromArray=h_});var Er=E(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var FC=c_(),qC=l_(),BC=Bn(),jC=d_(),Ko=$o(),GC=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this.operator,s=qC.toSubscriber(e,t,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Ko.config.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Ko.config.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Ko.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),FC.canReportError(e)?e.error(t):console.warn(t)}},r.prototype.forEach=function(e,t){var n=this;return t=p_(t),new t(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[BC.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:jC.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=p_(e),new e(function(n,i){var s;t.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();Bl.Observable=GC;function p_(r){if(r||(r=Ko.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}});var m_=E(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var $C=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}();jl.ObjectUnsubscribedError=$C});var y_=E(Ni=>{"use strict";var HC=Ni&&Ni.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ni,"__esModule",{value:!0});var zC=yr(),VC=function(r){HC(e,r);function e(t,n){var i=r.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,!(!n||n.length===0||t.isStopped||t.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(zC.Subscription);Ni.SubjectSubscription=VC});var b_=E(Xr=>{"use strict";var Hl=Xr&&Xr.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xr,"__esModule",{value:!0});var E_=Er(),WC=Wr(),Gl=yr(),Ai=m_(),XC=y_(),KC=Vo(),g_=function(r){Hl(e,r);function e(t){var n=r.call(this,t)||this;return n.destination=t,n}return e}(WC.Subscriber);Xr.SubjectSubscriber=g_;var __=function(r){Hl(e,r);function e(){var t=r.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype[KC.rxSubscriber]=function(){return new g_(this)},e.prototype.lift=function(t){var n=new $l(this,this);return n.operator=t,n},e.prototype.next=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Ai.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new Ai.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),Gl.Subscription.EMPTY):this.isStopped?(t.complete(),Gl.Subscription.EMPTY):(this.observers.push(t),new XC.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new E_.Observable;return t.source=this,t},e.create=function(t,n){return new $l(t,n)},e}(E_.Observable);Xr.Subject=__;var $l=function(r){Hl(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},e.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var n=this.source;return n?this.source.subscribe(t):Gl.Subscription.EMPTY},e}(__);Xr.AnonymousSubject=$l});function ZC(r,e,t){let n=Jr();return new kn(r,t,e,n)}function QC(r,e,t){let n=JSON.stringify(r.map(i=>({taskId:i.taskId,hash:i.hash,code:i.status})));P&&Yo.note({title:`Executed tasks with hashes: ${n}`}),(0,v_.writeFileSync)(S_.join(e,`tasks-hashes-${t}`),n)}function eI(r,e,t){r.filter(i=>i.cacheStatus==="local-cache-hit").map(i=>i.hash).forEach(i=>e.store(i,t))}async function zl({daemon:r,options:e,fileStorage:t,remoteCache:n,api:i,outputObfuscator:s,runStartTime:o,messages:a,endOfRunMessage:c,taskExecutions:l,versionOfNxBefore133:u,inner:f,encryptionKey:h,storeInCurrentProcess:d,distributedExecutionId:m,runContext:b}){let p=new Date().toISOString(),w=me(),k={command:s.obfuscate(Ji()),startTime:o,endTime:p,distributedExecutionId:m,branch:w,runGroup:ve(),sha:w?tt():void 0,inner:f},x={branch:w,runGroup:ve(),ciExecutionId:je(),ciExecutionEnv:Te()};if(d){ut(m)&&(QC(l,Jo,m),eI(l,n,Jo));try{await n.waitForStoreRequestsToComplete()}catch{return Yo.error({title:"Nx Cloud wasn't able to store artifacts."}),a.printMessages(),!1}for(let C of t.storedHashes){let L=l.find(O=>O.hash===C);if(!L)throw new Error(`Task with hash ${C} isn't recorded`);L.uploadedToStorage=!0}l.forEach(C=>{var L;C.artifactId=(L=b.allTasks.find(O=>O.hash==C.hash))==null?void 0:L.artifactId});try{await i.endRun(k,l,x)}catch{return Yo.error({title:"Nx Cloud wasn't able to record its run."}),a.printMessages(),!1}await sn(e)}else try{let C=Dt?Dt:e.accessToken,L=Co(),O=require.resolve("./lib/daemon/process-run-end");await r.processInBackground(O,{encryptionKey:h,runnerOptions:{...e,accessToken:C},delayedStoreRequests:n.delayedStoreRequests,ciExecutionContext:x,runEnd:{runData:k,taskExecutions:l,allTasks:b.allTasks,linkId:L},lightRunnerResolutionPaths:wr}),b.runUrl=`${ys(e.url||"https://nx.app")}/runs/${L}`}catch(C){return Yo.warn({title:"Nx Cloud Problems",bodyLines:[C.message||C.toString()]}),!1}return u?setTimeout(()=>{a.printMessages(),!a.anyErrors&&!f&&c.printCacheHitsMessage()},0):(a.printMessages(),!a.anyErrors&&!f&&c.printCacheHitsMessage()),!0}function tI(r,e,t,n){let i=new Ro(r,Jo,!0,e.cacheableOperations||[],t,n);try{let{CompositeLifeCycle:s}=dt();return s?new s([e.lifeCycle,i]):i}catch{return i}}async function rI(r,e,t,n,i){if(n.skipNxCache)return;let s=t.map(c=>c.hash).filter(c=>!!c),o=await Promise.all(s.map(c=>{let l=(0,w_.join)(Jo,`${c}.commit`);return JC(l)})),a=[];for(let c=0;c<o.length;++c)o[c]||a.push(s[c]);if(a.length>0){let c=r.startRun(i,a);for(let l of a)e.requests[l]=c}}function Di(r,e,t,n=!1){var L;let i=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID,s={statuses:{},scheduledTasks:[],requests:{},allTasks:r},o=e.lifeCycle===void 0,a=[],c=new An(e),l=ZC(c,e,s),u=new vo(s,a,i),f=new hr(e.maskedProperties),h=new Date().toISOString(),d=tI(s,e,f,a),m=xr||e.encryptionKey,b=new Jt(m),p=new Yt(e),w=ut(i)||!((L=t.daemon)!=null&&L.enabled()),k=new fr(b,p,e,"cloud-enabled-runner"),x=new To(c,l,s,k,i,w);rI(l,s,r,e,i),delete process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID;let C=YC(r,{...e,remoteCache:x,lifeCycle:d},t);if(C.subscribe){let{Subject:O}=b_(),z=new O;return C.subscribe({next:G=>z.next(G),error:G=>z.error(G),complete:async()=>{!await zl({daemon:t.daemon,options:e,fileStorage:k,remoteCache:x,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),z.complete()}}),z}else return C.then(async O=>(!await zl({daemon:t.daemon,options:e,fileStorage:k,remoteCache:x,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),O)).catch(async O=>{throw!await zl({daemon:t.daemon,options:e,fileStorage:k,remoteCache:x,api:l,outputObfuscator:f,runStartTime:h,messages:c,endOfRunMessage:u,taskExecutions:a,versionOfNxBefore133:o,inner:n,encryptionKey:m,storeInCurrentProcess:w,runContext:s,distributedExecutionId:i})&&ut(i)&&process.exit(Wt),O})}var v_,S_,w_,Yo,YC,Jo,JC,R_=q(()=>{"use strict";v_=require("fs"),S_=Sr(require("path")),w_=require("path");re();Rr();kt();nc();Es();gs();bo();Hy();Mu();So();Xy();Ky();Vu();Wu();({output:Yo}=Y()),{tasksRunner:YC,cacheDirectory:Jo}=dt(),{pathExists:JC}=bl()});function ki(r){return(0,x_.join)((0,T_.tmpdir)(),`run-group-${r}-marker.lock`)}function O_(r){(0,Zo.mkdirSync)(ki(r))}function C_(r,e){if(e===void 0)return;let t=ki(r);(0,Zo.writeFileSync)(`${t}/pid`,e.toString())}var Zo,T_,x_,I_=q(()=>{"use strict";Zo=require("fs"),T_=require("os"),x_=require("path")});async function ea(){if(me()==null)return;let r=ve();P&&jn.note({title:`Trying to create heartbeat background process for run group: ${r}`});try{O_(r)}catch{let t=await iI(r);P&&(t===void 0?jn.note({title:"Heartbeat marker exists, but no process could be found."}):jn.note({title:`Heartbeat marker exists, process expected with pid ${t}`})),A_(r,t);return}await nI(r).catch(()=>{jn.error({title:"Took longer than 3 seconds to hear from heartbeat process",bodyLines:["The heartbeat process may have not started properly. This CIPE could have inconsistent status reporting."]})})}async function nI(r){let e=process.env.NX_CLOUD_HEARTBEAT_INHERIT_STDIO=="true"?"inherit":"pipe";return new Promise((t,n)=>{let i=(0,N_.spawn)(process.execPath,[require.resolve("./lib/heartbeat/heartbeat-process.js")],{detached:!0,windowsHide:!0,stdio:e,env:{...process.env,NX_CLOUD_LIGHT_CLIENT_RESOLUTION_PATHS:JSON.stringify(wr)}});e==="pipe"?(i.stdout.on("data",s=>{s=="heartbeat-ready"&&(P&&jn.note({title:`Heartbeat process started successfully with PID ${i.pid}`}),C_(r,i.pid),A_(r,i.pid),i.unref(),t())}),setTimeout(()=>n(),3e3)):t()})}async function iI(r){let e=ki(r),t=1;for(;t<=3;)try{let n=(0,Pi.readFileSync)(`${e}/pid`,{encoding:"utf-8"});return Number(n)}catch{await Ge(1e3),t+=1}}function A_(r,e){e!==void 0&&(Qo||(Qo=setInterval(()=>{if(!sI(e)){let t=ki(r),n;try{n=(0,Pi.readFileSync)(`${t}/logs`,{encoding:"utf-8"})}catch{n="Unable to find shutdown logs, likely the heartbeat process was sent a SIGKILL"}Li(),jn.error({title:"Nx Cloud Heartbeat missing",bodyLines:[`Expected to find process with PID ${e} but none was found.`,"Output:",...n.split(`
`)]}),(0,Pi.rmdirSync)(t,{recursive:!0})}},1e3),process.on("SIGINT",Li),process.on("SIGTERM",Li),process.on("uncaughtException",Li),process.on("exit",Li)))}function Li(){clearInterval(Qo),Qo=void 0}function sI(r){try{return process.kill(r,0),!0}catch{return!1}}var N_,Pi,jn,Qo,Vl=q(()=>{"use strict";N_=require("child_process"),Pi=require("fs");re();Rr();Zr();I_();({output:jn}=Y())});function L_(){(0,ta.writeFileSync)(k_,"true")}function P_(r){if(r===!0)return!0;if(r===!1)return!1;let e=process.env.NX_CLOUD_DISTRIBUTED_EXECUTION;if(e==="false"||e==="FALSE"||e==="0")return!1;if(e==="true"||e==="TRUE"||e==="1")return!0;try{return(0,ta.readFileSync)(k_),!0}catch{return!1}}var ta,D_,ra,k_,Wl=q(()=>{"use strict";ta=require("fs"),D_=require("os"),ra=require("path"),k_=(0,ra.join)((0,D_.tmpdir)(),`NX_CLOUD_DISTRIBUTED_EXECUTION-${(0,ra.basename)(process.cwd())}`)});async function Ui(r){let e=Oe(r);return await ce(()=>e.get("/nx-cloud/executions/workspace-status"))}var Xl=q(()=>{"use strict";_t()});var U_=E(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.subscribeToArray=function(r){return function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.complete()}}});var M_=E(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});var oI=Ho();Yl.subscribeToPromise=function(r){return function(e){return r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,oI.hostReportError),e}}});var Mi=E(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});function F_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Gn.getSymbolIterator=F_;Gn.iterator=F_();Gn.$$iterator=Gn.iterator});var q_=E(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var aI=Mi();Jl.subscribeToIterable=function(r){return function(e){var t=r[aI.iterator]();do{var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof t.return=="function"&&e.add(function(){t.return&&t.return()}),e}}});var B_=E(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var cI=Bn();Zl.subscribeToObservable=function(r){return function(e){var t=r[cI.observable]();if(typeof t.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}}});var ef=E(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var rf=E(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});function uI(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}tf.isPromise=uI});var sf=E(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});var lI=U_(),fI=M_(),hI=q_(),dI=B_(),pI=ef(),mI=rf(),yI=Nl(),EI=Mi(),gI=Bn();nf.subscribeTo=function(r){if(r&&typeof r[gI.observable]=="function")return dI.subscribeToObservable(r);if(pI.isArrayLike(r))return lI.subscribeToArray(r);if(mI.isPromise(r))return fI.subscribeToPromise(r);if(r&&typeof r[EI.iterator]=="function")return hI.subscribeToIterable(r);var e=yI.isObject(r)?"an invalid object":"'"+r+"'",t="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(t)}});var j_=E(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});var _I=Er(),bI=yr(),vI=Bn();function SI(r,e){return new _I.Observable(function(t){var n=new bI.Subscription;return n.add(e.schedule(function(){var i=r[vI.observable]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return t.next(s)}))},error:function(s){n.add(e.schedule(function(){return t.error(s)}))},complete:function(){n.add(e.schedule(function(){return t.complete()}))}}))})),n})}of.scheduleObservable=SI});var G_=E(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});var wI=Er(),RI=yr();function TI(r,e){return new wI.Observable(function(t){var n=new RI.Subscription;return n.add(e.schedule(function(){return r.then(function(i){n.add(e.schedule(function(){t.next(i),n.add(e.schedule(function(){return t.complete()}))}))},function(i){n.add(e.schedule(function(){return t.error(i)}))})})),n})}af.schedulePromise=TI});var $_=E(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var xI=Er(),OI=yr();function CI(r,e){return new xI.Observable(function(t){var n=new OI.Subscription,i=0;return n.add(e.schedule(function(){if(i===r.length){t.complete();return}t.next(r[i++]),t.closed||n.add(this.schedule())})),n})}cf.scheduleArray=CI});var H_=E(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var II=Er(),NI=yr(),AI=Mi();function DI(r,e){if(!r)throw new Error("Iterable cannot be null");return new II.Observable(function(t){var n=new NI.Subscription,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=r[AI.iterator](),n.add(e.schedule(function(){if(!t.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){t.error(c);return}o?t.complete():(t.next(s),this.schedule())}}))})),n})}uf.scheduleIterable=DI});var z_=E(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});var kI=Bn();function LI(r){return r&&typeof r[kI.observable]=="function"}lf.isInteropObservable=LI});var V_=E(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var PI=Mi();function UI(r){return r&&typeof r[PI.iterator]=="function"}ff.isIterable=UI});var W_=E(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});var MI=j_(),FI=G_(),qI=$_(),BI=H_(),jI=z_(),GI=rf(),$I=ef(),HI=V_();function zI(r,e){if(r!=null){if(jI.isInteropObservable(r))return MI.scheduleObservable(r,e);if(GI.isPromise(r))return FI.schedulePromise(r,e);if($I.isArrayLike(r))return qI.scheduleArray(r,e);if(HI.isIterable(r)||typeof r=="string")return BI.scheduleIterable(r,e)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}hf.scheduled=zI});var pf=E(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var X_=Er(),VI=sf(),WI=W_();function XI(r,e){return e?WI.scheduled(r,e):r instanceof X_.Observable?r:new X_.Observable(VI.subscribeTo(r))}df.from=XI});var K_=E(Fi=>{"use strict";var KI=Fi&&Fi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fi,"__esModule",{value:!0});var YI=Wr(),JI=function(r){KI(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.notifyNext=function(t,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(t,n){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(YI.Subscriber);Fi.OuterSubscriber=JI});var mf=E(qi=>{"use strict";var ZI=qi&&qi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qi,"__esModule",{value:!0});var QI=Wr(),e0=function(r){ZI(e,r);function e(t,n,i){var s=r.call(this)||this;return s.parent=t,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(QI.Subscriber);qi.InnerSubscriber=e0});var Y_=E(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});var t0=mf(),r0=sf(),n0=Er();function i0(r,e,t,n,i){if(i===void 0&&(i=new t0.InnerSubscriber(r,t,n)),!i.closed)return e instanceof n0.Observable?e.subscribe(i):r0.subscribeTo(e)(i)}yf.subscribeToResult=i0});var Z_=E($n=>{"use strict";var s0=$n&&$n.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($n,"__esModule",{value:!0});var o0=Wr();function a0(r,e){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new J_(r,e))}}$n.map=a0;var J_=function(){function r(e,t){this.project=e,this.thisArg=t}return r.prototype.call=function(e,t){return t.subscribe(new c0(e,this.project,this.thisArg))},r}();$n.MapOperator=J_;var c0=function(r){s0(e,r);function e(t,n,i){var s=r.call(this,t)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(t){var n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(o0.Subscriber)});var eb=E(Bi=>{"use strict";var u0=Bi&&Bi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bi,"__esModule",{value:!0});var l0=K_(),f0=mf(),h0=Y_(),d0=Z_(),p0=pf();function Q_(r,e){return typeof e=="function"?function(t){return t.pipe(Q_(function(n,i){return p0.from(r(n,i)).pipe(d0.map(function(s,o){return e(n,s,i,o)}))}))}:function(t){return t.lift(new m0(r))}}Bi.switchMap=Q_;var m0=function(){function r(e){this.project=e}return r.prototype.call=function(e,t){return t.subscribe(new y0(e,this.project))},r}(),y0=function(r){u0(e,r);function e(t,n){var i=r.call(this,t)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(t){var n,i=this.index++;try{n=this.project(t,i)}catch(s){this.destination.error(s);return}this._innerSub(n,t,i)},e.prototype._innerSub=function(t,n,i){var s=this.innerSubscription;s&&s.unsubscribe();var o=new f0.InnerSubscriber(this,n,i),a=this.destination;a.add(o),this.innerSubscription=h0.subscribeToResult(this,t,void 0,void 0,o),this.innerSubscription!==o&&a.add(this.innerSubscription)},e.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&r.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(t){var n=this.destination;n.remove(t),this.innerSubscription=null,this.isStopped&&r.prototype._complete.call(this)},e.prototype.notifyNext=function(t,n,i,s,o){this.destination.next(n)},e}(l0.OuterSubscriber)});var Ef,E0,g0,_0,tb,rb,Hn,gf=q(()=>{"use strict";Ef=require("path");re();({readFile:E0,copy:g0,mkdirSync:_0}=bl()),{output:tb,workspaceRoot:rb}=Y(),Hn=class{constructor(e,t){this.fileStorage=e;this.cacheDirectory=t;_0(t,{recursive:!0})}async retrieveAndExtract(e,t){process.env.NX_CLOUD_DEBUG_URLS=="true"&&tb.note({title:`Retrieving artifacts from ${t}`}),await this.fileStorage.retrieve(e,t,this.cacheDirectory);let n=(0,Ef.join)(this.cacheDirectory,e,"outputs");return P&&tb.note({title:"Extracting artifacts",bodyLines:[`from: ${n}`,`to: ${rb}`]}),await g0(n,rb),(await E0((0,Ef.join)(this.cacheDirectory,e,"terminalOutput"))).toString()}}});function gr(r,e){return!!r||!!e}function _r(){b0.error({title:"Unable to determine the context for running Nx in CI",bodyLines:["- Nx tried to determine the context automatically but wasn't able to do it.","- Use the NX_CI_EXECUTION_ID env variable to set it manually.","- NX_CI_EXECUTION_ID must be a unique value for every CI execution/run."]})}var b0,ji=q(()=>{"use strict";({output:b0}=Y())});function nb(r,e,t,n,i,s,o){let a=i.map(l=>l.map(u=>({taskId:u.id,hash:u.hash,projectName:u.target.project,target:u.target.target,configuration:u.target.configuration||null,params:Dn(u),projectRoot:u.projectRoot,cache:u.cache}))),c={command:Ji(),branch:r,runGroup:e,ciExecutionId:t,ciExecutionEnv:n,tasks:a,maxParallel:v0(s),commitSha:o};return _a&&(c.agentCount=_a),mh||(c.stopAgentsOnFailure=!1),c}function v0(r){return r.parallel==="false"||r.parallel===!1?1:r.parallel==="true"||r.parallel===!0?Number(r.maxParallel||3):r.parallel===void 0?r.maxParallel?Number(r.maxParallel):3:Number(r.parallel)||3}var _f,zn,bf=q(()=>{"use strict";_t();re();xo();kt();Si();({output:_f}=Y()),zn=class{constructor(e){this.apiAxiosInstance=Oe(e,6e4)}async start(e){var i;let t=Ce("dteStart"),n;P&&_f.note({title:"Starting a distributed execution",bodyLines:[JSON.stringify(e,null,2)]});try{n=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/start",e)),t.recordMetric(ne(n))}catch(s){throw t.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),s}if(!n.data.enabled)throw new Error("Workspace is disabled. Cannot perform distributed task executions.");if(n.data.error)throw new Error(n.data.error);return n.data.id}async status(e,t){var i;let n=Ce("dteStatus");try{let s=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/status",{id:e,prevUpdatedAt:t}));return n.recordMetric(ne(s)),s.data}catch(s){n.recordMetric((i=s==null?void 0:s.axiosException)!=null&&i.response?ne(s.axiosException.response):Ie),_f.error({title:s.message}),process.exit(1)}}async completeRunGroupWithError(e,t,n,i,s){var a;let o=Ce("completeRunGroup");P&&_f.note({title:"Completing with an error",bodyLines:[`ciExecutionId: ${n}`,`ciExecutionEnv: ${i}`,`runGroup: ${t}`,`error: ${s}`]});try{let c=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,criticalErrorMessage:s,vcsContext:dr()}),3);o.recordMetric(ne(c))}catch(c){o.recordMetric((a=c==null?void 0:c.axiosException)!=null&&a.response?ne(c.axiosException.response):Ie)}}}});function na(r){let e=new Object,t;return n=>{e!==n?(e=n,t=new Date):new Date().getTime()-t.getTime()>r.timeout&&(S0.error({title:r.title}),process.exit(1))}}var S0,vf=q(()=>{"use strict";({output:S0}=Y())});async function ib(r,e,t){P&&Sf.note({title:`Processing task ${t.taskId}`});let n=e.find(s=>t.taskId===s.id);if(!n)throw new Error(`Found unknown task: ${t.taskId}`);let i=await r.retrieveAndExtract(t.hash,t.url);Sf.logCommand(w0(n)),process.stdout.write(i),Sf.addVerticalSeparator()}function w0(r){let e=r.target.configuration?`:${r.target.configuration}`:"";return["nx","run",`${r.target.project}:${r.target.target}${e}`,Dn(r)].join(" ")}var Sf,sb=q(()=>{"use strict";re();Si();({output:Sf}=Y())});async function ob(r,e,t,n){let i=null,s={},o=na({title:`No new completed tasks after ${ga/1e3} seconds.`,timeout:ga});for(await Ge(1e3);;){P&&wf.note({title:"Waiting..."});let a=await r.status(t,i);P&&wf.note({title:"Status update",bodyLines:[`executionId: ${t}`,`executionStatus: ${a.executionStatus}`,`number of completed tasks: ${a.completedTasks.length}`,`error: ${a.criticalErrorMessage}`]}),a.criticalErrorMessage&&(wf.error({title:"Distributed Execution Terminated",bodyLines:["Error:",a.criticalErrorMessage]}),process.exit(1)),a.updatedAt||await Ge(5e3),i=a.updatedAt,o(a.completedTasks.length);for(let c of a.completedTasks)s[c.taskId]||(await ib(e,n,c),s[c.taskId]=!0);if(a.executionStatus==="COMPLETED")return{commandStatus:a.commandStatus,runUrl:a.runUrl}}}var wf,ab=q(()=>{"use strict";vf();re();Zr();sb();({output:wf}=Y())});function cb(r){let e=[],t=new Set(Object.values(r.tasks).map(i=>i.id)),n=0;for(;t.size>0;){let i=e[n]=[];for(let s of t){let o=!0;for(let c of r.dependencies[s])if(t.has(c)){o=!1;break}if(!o)continue;let a=r.tasks[s];i.push(a)}for(let s of i)t.delete(s.id);n++}return e}var ub=q(()=>{"use strict"});var ia=E((R1,fb)=>{"use strict";var Rf=Symbol("singleComment"),lb=Symbol("multiComment"),R0=()=>"",T0=(r,e,t)=>r.slice(e,t).replace(/\S/g," "),x0=(r,e)=>{let t=e-1,n=0;for(;r[t]==="\\";)t-=1,n+=1;return!!(n%2)};fb.exports=(r,e={})=>{if(typeof r!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof r}\``);let t=e.whitespace===!1?R0:T0,n=!1,i=!1,s=0,o="";for(let a=0;a<r.length;a++){let c=r[a],l=r[a+1];if(!i&&c==='"'&&(x0(r,a)||(n=!n)),!n){if(!i&&c+l==="//")o+=r.slice(s,a),s=a,i=Rf,a++;else if(i===Rf&&c+l===`\r
`){a++,i=!1,o+=t(r,s,a),s=a;continue}else if(i===Rf&&c===`
`)i=!1,o+=t(r,s,a),s=a;else if(!i&&c+l==="/*"){o+=r.slice(s,a),s=a,i=lb,a++;continue}else if(i===lb&&c+l==="*/"){a++,i=!1,o+=t(r,s,a+1),s=a+1;continue}}}return o+(i?t(r.slice(s)):r.slice(s))}});function db(r,e,t){let n=JSON.parse(I0((0,hb.readFileSync)(`${O0}/nx.json`).toString()));return new Tf(e,N0(n,r)).createTaskGraph(t)}function N0(r,e){let t=r.targetDependencies??{},n=e?e.strictlyOrderedTargets??["build"]:[];for(let i of n)t[i]=t[i]||[],t[i].push({target:i,projects:"dependencies"});return t}var hb,O0,C0,I0,Tf,pb=q(()=>{"use strict";hb=require("fs"),{workspaceRoot:O0}=Y(),{getDependencyConfigs:C0}=dt(),I0=ia();Tf=class{constructor(e,t){this.projectGraph=e;this.defaultTargetDependencies=t}createTaskGraph(e){let t={roots:[],tasks:{},dependencies:{}};for(let n of e){this.addTaskToGraph(n,t);let i=C0(n.target,this.defaultTargetDependencies,this.projectGraph);i&&this.addTaskDependencies(n,i,e,t)}return t.roots=Object.keys(t.dependencies).filter(n=>t.dependencies[n].length===0),t}addTaskDependencies(e,t,n,i){for(let s of t)if(s.projects==="self")for(let o of n)o.target.project===e.target.project&&o.target.target===s.target&&i.dependencies[e.id].push(o.id);else if(s.projects==="dependencies"){let o=new Set;this.addDependencies(e.target.project,s.target,n,i,e.id,o)}}addDependencies(e,t,n,i,s,o){o.add(e);let a=this.projectGraph.dependencies[e];if(a){let c=a.map(l=>l.target);for(let l of c){if(o.has(l))continue;let u=this.findTask({project:l,target:t},n);u?i.dependencies[s].indexOf(u.id)===-1&&i.dependencies[s].push(u.id):this.addDependencies(l,t,n,i,s,o)}}}findTask({project:e,target:t},n){return n.find(i=>i.target.project===e&&i.target.target===t)}addTaskToGraph(e,t){t.tasks[e.id]=e,t.dependencies[e.id]=[]}}});var Of={};At(Of,{nxCloudDistributedTasksRunner:()=>D0});function k0(r,e,t){return r.taskGraph?r.taskGraph:db(t,r.projectGraph,e)}function L0(r,e,t,n,i){process.on("SIGINT",async()=>{await r.completeRunGroupWithError(e,t,n,i,"Main job was terminated via SIGINT"),process.exit(1)}),process.on("SIGTERM",async()=>{await r.completeRunGroupWithError(e,t,n,i,"Main job was terminated via SIGTERM"),process.exit(1)})}async function P0(r,e,t,n,i,s,o,a,c,l){let u=await r.start(nb(n,i,s,o,cb(a),e,c));return await ob(r,t,u,Object.values(a.tasks))}var Gi,A0,xf,D0,Cf=q(()=>{"use strict";gf();re();kt();Es();ji();gs();bo();bf();ab();ub();pb();({output:Gi}=Y()),{cacheDirectory:A0}=dt(),xf=class{scheduleTask(e){}startTask(e){}endTasks(e){}},D0=async(r,e,t)=>{e.skipNxCache&&Gi.warn({title:"--skip-nx-cache is ignored when using distributed tasks execution (DTE).",bodyLine:["DTE needs the cache to share files between agents."]}),P&&Gi.note({title:"Starting distributed command execution"}),e.lifeCycle=new xf;let n=me(),i=ve(),s=je(),o=Te(),a=tt(),c=Yi();gr(i,s)||(_r(),process.exit(1));let l=new Jt(xr||e.encryptionKey),u=new Yt(e),f=new Hn(new fr(l,u,e,"dte-main"),A0),h=new zn(e);L0(h,n,i,s,o);try{let d=k0(t,r,e),m=await P0(h,e,f,n,i,s,o,d,a,c);m.commandStatus===0?Gi.success({title:"Successfully completed running the command.",bodyLines:[`See run details at ${m.runUrl}`]}):Gi.error({title:"Command execution failed.",bodyLines:[`See run details at ${m.runUrl}`]}),await sn(e),process.exit(m.commandStatus)}catch(d){Gi.error({title:"Unable to complete a run.",bodyLines:[d.message]}),d.axiosException?console.log(d.axiosException):console.log(d);try{await h.completeRunGroupWithError(n,i,s,o,`Main job terminated with an error: "${d.message}"`)}finally{process.exit(1)}}}});var yb={};At(yb,{default:()=>$0});function F0(r,e,t){let{from:n}=pf(),{switchMap:i}=eb();return n(Ui(e)).pipe(i(s=>s.data.enabled?(Cf(),be(Of)).nxCloudDistributedTasksRunner(r,e,t):(Kr.warn({title:"Nx Cloud: Workspace Disabled",bodyLines:["This run and following runs will not use distributed task execution until","the outstanding balance is paid or additional coupons are added for this","workspace. If you believe you are receiving this message in error, please","contact support at cloud-support@nrwl.io.","","Execution will now continue using this machine only."]}),process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t))))}async function q0(r,e,t){return(await Ui(e)).data.enabled?(Cf(),be(Of)).nxCloudDistributedTasksRunner(r,e,t):(Kr.warn({title:"Nx Cloud: Workspace Disabled",bodyLines:["This run and following runs will not use distributed task execution until","the outstanding balance is paid.","","If you believe you are receiving this message in error, please","contact support at cloud-support@nrwl.io.","","Execution will now continue using this machine only."]}),process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t))}function B0(r,e){let t=e.cacheableOperations||[];return r.some(n=>If(n,{cacheableOperations:t}))}function j0(r,e){let t=e.cacheableOperations||[];for(let n of r)If(n,{cacheableOperations:t})||(Kr.error({title:"Distributed task execution only works for cacheable targets",bodyLines:[`Target '${n.target.project}:${n.target.target}' cannot be executed.`,"To be able to replay the output of the target, distributed task execution only supports cacheable targets.",`You can verify that '${n.target.target}' is part of the list of cacheable targets in the 'nx.json' file.`,'You can invoke this command without distribution by doing "NX_CLOUD_DISTRIBUTED_EXECUTION=false nx ...".']}),process.exit(1))}function G0(r,e){let t=e.cacheableOperations||[];for(let n of r)If(n,{cacheableOperations:t})||(Kr.error({title:"Distributed task execution only works for cacheable targets",bodyLines:[`Target ${n.target.project}:${n.target.target} cannot be executed.`,"To be able to replay the output of the target, distributed task execution only supports cacheable targets.",`You can still invoke "nx ${n.target.target} ${n.target.project}" from within a cacheable target when using "nx:run-commands".`]}),process.exit(Wt))}var Kr,mb,U0,If,M0,$0,Eb=q(()=>{"use strict";R_();Vl();Wl();re();Xl();({output:Kr}=Y()),{tasksRunner:mb,runnerReturnsPromise:U0,isCacheableTask:If}=dt(),M0=async(r,e,t={})=>{let n=t.nxArgs||{},i=!Dt&&!e.accessToken,s=n.cloud===!1||Eh;return i||s||e.skipNxCache?(i&&Kr.warn({title:"No access token found",bodyLines:["Nx will continue running, but nothing will be written or read from the remote cache.","Run details will also not be available in the Nx Cloud UI."]}),s&&Kr.warn({title:"Nx Cloud Manually Disabled",bodyLines:["Nx will continue running, but nothing will be written or read from the remote cache.","Run details will also not be available in the Nx Cloud UI.","","If this wasn't intentional, check for the NX_NO_CLOUD environment variable, the --no-cloud flag"]}),e.skipNxCache&&Kr.warn({title:"--skip-nx-cache disables the connection to Nx Cloud for the current run.",bodyLines:["The remote cache will not be read from or written to during this run."]}),mb(r,e,t)):gh()?B0(r,e)?Di(r,e,t,!0):mb(r,e,t):(ut(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID)?G0(r,e):await ea(),P_(n.dte)&&!ut(process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID)?(j0(r,e),U0?q0(r,e,t):F0(r,e,t)):(process.env.NX_INVOKED_BY_RUNNER="true",Di(r,e,t)))};$0=M0});var Nf={};At(Nf,{cleanUpAgents:()=>V0});async function V0(){let r=`${z0}/lockfiles`;return P&&H0.note({title:"Cleaning up agent metadata for this workspace."}),(0,gb.rm)(r,{recursive:!0,force:!0},e=>{if(e)throw e})}var gb,H0,z0,Af=q(()=>{"use strict";gb=require("fs");re();({output:H0}=Y()),{cacheDirectory:z0}=dt()});function It(){var n,i;let r=JSON.parse(W0((0,_b.readFileSync)(`${X0}/nx.json`).toString())),e={},t=[];for(let s in r.targetDefaults)r.targetDefaults[s].cache&&t.push(s);return r.nxCloudAccessToken&&(e.accessToken??(e.accessToken=r.nxCloudAccessToken)),r.nxCloudUrl&&(e.url??(e.url=r.nxCloudUrl)),r.nxCloudEncryptionKey&&(e.encryptionKey=r.nxCloudEncryptionKey),r.parallel&&(e.parallel??(e.parallel=r.parallel)),r.cacheDirectory&&(e.cacheDirectory??(e.cacheDirectory=r.cacheDirectory)),t.length&&(e.cacheableOperations??(e.cacheableOperations=t)),{nxJson:r,nxCloudOptions:{...e,...(i=(n=r.tasksRunnerOptions)==null?void 0:n.default)==null?void 0:i.options}}}var _b,W0,X0,Vn=q(()=>{"use strict";_b=require("fs"),W0=ia(),{workspaceRoot:X0}=Y()});var Df={};At(Df,{runCommandAndStoreInCloud:()=>K0});async function K0(){let{nxCloudOptions:r}=It(),e=Oe(r),t=new zn(r),n=new hr(r.maskedProperties),i=me(),s=ve(),o=je(),a=Te(),c=Y0(process.argv),[l,...u]=c,f=new Date().toISOString(),{statusCode:h,terminalOutput:d}=await J0(l,u),m=new Date().toISOString(),b={statusCode:h,terminalOutput:d,userCommandAndArgsString:c.join(" "),startTime:f,endTime:m,branch:i,runGroup:s,ciExecutionId:o,ciExecutionEnv:a};await Q0(e,n,r,b,t),process.exit(h)}function Y0(r){let e=r.findIndex(n=>n==="record")+1,t;if(e<process.argv.length){let n=process.argv[e]==="--"?1:0;t=process.argv.slice(e+n)}else console.log("Invalid command. Use `nx-cloud record [my command] [my arg1] [my arg...]`"),process.exit(1);return t}function J0(r,e){return new Promise((t,n)=>{try{let i=Sb.spawn(r,e,{stdio:["inherit","pipe","pipe","ipc"]}),s=[];i.stdout.on("data",o=>{process.stdout.write(o),s.push(o.toString())}),i.stderr.on("data",o=>{process.stderr.write(o),s.push(o.toString())}),i.on("exit",(o,a)=>{let c=o??tN(a||""),l=s.join("");t({statusCode:c,terminalOutput:l})})}catch(i){n(i)}})}function Z0(r,e){let t=r.obfuscate(e.terminalOutput),n=t.length>vb?`TRUNCATED

${t.slice(t.length-vb)}`:t;return{taskId:"nx-cloud-tasks-runner:record-command",target:"record-command",projectName:"nx-cloud-tasks-runner",hash:"",startTime:e.startTime,endTime:e.endTime,hashDetails:{},params:e.userCommandAndArgsString,cacheStatus:"n/a",status:e.statusCode,terminalOutput:n}}async function Q0(r,e,t,n,i){let s=`nx-cloud record -- ${n.userCommandAndArgsString}`,o={meta:{nxCloudVersion:"0.0.0"},tasks:[Z0(e,n)],run:{command:s,startTime:n.startTime,endTime:n.endTime,branch:n.branch,runGroup:n.runGroup,sha:n.branch?tt():void 0},branch:n.branch,runGroup:n.runGroup,ciExecutionId:n.ciExecutionId,ciExecutionEnv:n.ciExecutionEnv,machineInfo:Jr()},a=Buffer.from(JSON.stringify(o)),c=await(0,wb.promisify)(Rb.gzip)(a),l=await ce(()=>r.post("/nx-cloud/runs/end",c,{headers:{...r.defaults.headers,"Content-Encoding":"gzip","Content-Type":"application/octet-stream"}}));process.env.NX_CLOUD_SILENT_RECORD!=="true"&&eN(l.data.runUrl),n.statusCode!==0&&(n.ciExecutionId||n.runGroup)&&await i.completeRunGroupWithError(n.branch,n.runGroup,n.ciExecutionId,n.ciExecutionEnv,null)}function eN(r){bb.addVerticalSeparator(),bb.note({title:"Nx Cloud: Successfully recorded command output"}),Kt(`You can view or share your output by visiting ${r}`)}function tN(r){return r==="SIGHUP"?129:r==="SIGINT"?130:r==="SIGTERM"?143:128}var Sb,wb,Rb,bb,vb,kf=q(()=>{"use strict";Sb=Sr(require("child_process")),wb=require("util"),Rb=require("zlib");_t();re();Vn();ii();bf();So();({output:bb}=Y()),vb=2e5});function Tb(){rN.error({title:"Invalid Task Runner Configuration",bodyLines:["To use Distributed Task Execution, your default task runner configuration must",'use the "nx-cloud" task runner.',"",'This can be adjusted in "nx.json".']})}var rN,xb=q(()=>{"use strict";({output:rN}=Y())});var Ob,sa,Cb=q(()=>{"use strict";_t();re();kt();({output:Ob}=Y()),sa=class{constructor(e,t,n,i,s,o){this.branch=t;this.runGroup=n;this.ciExecutionId=i;this.ciExecutionEnv=s;this.agentName=o;this.apiAxiosInstance=Oe(e,6e4)}async tasks(e,t,n,i){var o;let s=Ce("dtePollTasks");try{let a=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/tasks",{runGroup:this.runGroup,ciExecutionId:this.ciExecutionId,ciExecutionEnv:this.ciExecutionEnv,agentName:this.agentName,executionId:e,statusCode:t,completedTasks:n,targets:i}));return s.recordMetric(ne(a)),a.data}catch(a){throw s.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),a}}async completeRunGroupWithError(e){var n;P&&Ob.note({title:"Completing with an error",bodyLines:[`ciExecutionId: ${this.ciExecutionId}`,`ciExecutionEnv: ${this.ciExecutionEnv}`,`runGroup: ${this.runGroup}`,`error: ${e}`]});let t=Ce("completeRunGroup");try{let i=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:this.branch,runGroup:this.runGroup,ciExecutionId:this.ciExecutionId,ciExecutionEnv:this.ciExecutionEnv,agentName:this.agentName,criticalErrorMessage:e}));P&&Ob.note({title:"Completed run group with an error"}),t.recordMetric(ne(i))}catch(i){t.recordMetric((n=i==null?void 0:i.axiosException)!=null&&n.response?ne(i.axiosException.response):Ie),console.error(i)}}}});async function Ib(r,e,t,n,i){let s=0,o=null,a=na({title:`No new messages received after ${Ea/1e3} seconds`,timeout:Ea}),c=[],l=new Date,u=!1,f={};for(;;){if(P&&$i.note({title:`${r} fetching tasks...`}),o=await e.tasks(o?o.executionId:null,s,c,i),P&&$i.note({title:`${r} received an API Response`,bodyLines:[`completed: ${o.completed}`,`status: ${o.status}`,`retryDuring: ${o.retryDuring}`,`executionId: ${o.executionId}`,`number of tasks: ${o.tasks.length}`,`error: ${o.criticalErrorMessage}`,`maxParallel: ${o.maxParallel}`]}),o.criticalErrorMessage&&($i.error({title:"Distributed Execution Terminated",bodyLines:["Error:",o.criticalErrorMessage]}),process.exit(1)),o!=null&&o.retryDuring&&(o==null?void 0:o.retryDuring)!==0&&!u&&new Date().getTime()-l.getTime()>o.retryDuring){await Ge(2e4);continue}if((o==null?void 0:o.status)!==void 0){if(o.status==="RUN_GROUP_COMPLETED"||o.status==="NO_FURTHER_TASKS_TO_RUN")return}else if(o.completed)return;if(a(o.tasks.map(d=>d.taskId).join("")),!o.executionId){P&&$i.note({title:`${r} waiting...`}),await Ge(5e3),s=0,c=[];continue}if(u=!0,o.completedTasks)for(let d of o.completedTasks)f[d.taskId]||($i.note({title:`${r} downloading artifacts for ${d.taskId} Hash: ${d.hash}}`}),await t.retrieveAndExtract(d.hash,d.url),f[d.taskId]=!0);let h=await n(o.executionId,o.tasks,o.maxParallel);for(let d of h.completedTasks)f[d.taskId]=!0;s=h.completedStatusCode,c=h.completedTasks}}var $i,Nb=q(()=>{"use strict";vf();re();Zr();({output:$i}=Y())});var oa=E((sP,Fb)=>{"use strict";var nN=require("util"),Ab=require("path"),iN=require("fs");function Hi(r){if(r!==r.toLowerCase()&&r!==r.toUpperCase()||(r=r.toLowerCase()),r.indexOf("-")===-1&&r.indexOf("_")===-1)return r;{let t="",n=!1,i=r.match(/^-+/);for(let s=i?i[0].length:0;s<r.length;s++){let o=r.charAt(s);n&&(n=!1,o=o.toUpperCase()),s!==0&&(o==="-"||o==="_")?n=!0:o!=="-"&&o!=="_"&&(t+=o)}return t}}function Pb(r,e){let t=r.toLowerCase();e=e||"-";let n="";for(let i=0;i<r.length;i++){let s=t.charAt(i),o=r.charAt(i);s!==o&&i>0?n+=`${e}${t.charAt(i)}`:n+=o}return n}function Ub(r){return r==null?!1:typeof r=="number"||/^0x[0-9a-f]+$/i.test(r)?!0:/^0[^.]/.test(r)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(r)}function sN(r){if(Array.isArray(r))return r.map(o=>typeof o!="string"?o+"":o);r=r.trim();let e=0,t=null,n=null,i=null,s=[];for(let o=0;o<r.length;o++){if(t=n,n=r.charAt(o),n===" "&&!i){t!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),s[e]||(s[e]=""),s[e]+=n}return s}var pt;(function(r){r.BOOLEAN="boolean",r.STRING="string",r.NUMBER="number",r.ARRAY="array"})(pt||(pt={}));var zt,Ff=class{constructor(e){zt=e}parse(e,t){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},t),i=sN(e),s=typeof e=="string",o=oN(Object.assign(Object.create(null),n.alias)),a=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),c=Object.assign(Object.create(null),n.default),l=n.configObjects||[],u=n.envPrefix,f=a["populate--"],h=f?"--":"_",d=Object.create(null),m=Object.create(null),b=n.__||zt.format,p={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},w=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,k=new RegExp("^--"+a["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(y){let _=typeof y=="object"?y.key:y,T=Object.keys(y).map(function(v){return{boolean:"bools",string:"strings",number:"numbers"}[v]}).filter(Boolean).pop();T&&(p[T][_]=!0),p.arrays[_]=!0,p.keys.push(_)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(y){p.bools[y]=!0,p.keys.push(y)}),[].concat(n.string||[]).filter(Boolean).forEach(function(y){p.strings[y]=!0,p.keys.push(y)}),[].concat(n.number||[]).filter(Boolean).forEach(function(y){p.numbers[y]=!0,p.keys.push(y)}),[].concat(n.count||[]).filter(Boolean).forEach(function(y){p.counts[y]=!0,p.keys.push(y)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(y){p.normalize[y]=!0,p.keys.push(y)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([y,_])=>{typeof _=="number"&&(p.nargs[y]=_,p.keys.push(y))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([y,_])=>{typeof _=="function"&&(p.coercions[y]=_,p.keys.push(y))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(y){p.configs[y]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([y,_])=>{(typeof _=="boolean"||typeof _=="function")&&(p.configs[y]=_)})),A(n.key,o,n.default,p.arrays),Object.keys(c).forEach(function(y){(p.aliases[y]||[]).forEach(function(_){c[_]=c[y]})});let x=null;Vt();let C=[],L=Object.assign(Object.create(null),{_:[]}),O={};for(let y=0;y<i.length;y++){let _=i[y],T=_.replace(/^-{3,}/,"---"),v,g,M,D,F,pe;if(_!=="--"&&/^-/.test(_)&&ct(_))z(_);else if(T.match(/^---+(=|$)/)){z(_);continue}else if(_.match(/^--.+=/)||!a["short-option-groups"]&&_.match(/^-.+=/))D=_.match(/^--?([^=]+)=([\s\S]*)$/),D!==null&&Array.isArray(D)&&D.length>=3&&(S(D[1],p.arrays)?y=I(y,D[1],i,D[2]):S(D[1],p.nargs)!==!1?y=G(y,D[1],i,D[2]):N(D[1],D[2],!0));else if(_.match(k)&&a["boolean-negation"])D=_.match(k),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],N(g,S(g,p.arrays)?[!1]:!1));else if(_.match(/^--.+/)||!a["short-option-groups"]&&_.match(/^-[^-]+/))D=_.match(/^--?(.+)/),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],S(g,p.arrays)?y=I(y,g,i):S(g,p.nargs)!==!1?y=G(y,g,i):(F=i[y+1],F!==void 0&&(!F.match(/^-/)||F.match(w))&&!S(g,p.bools)&&!S(g,p.counts)||/^(true|false)$/.test(F)?(N(g,F),y++):N(g,_e(g))));else if(_.match(/^-.\..+=/))D=_.match(/^-([^=]+)=([\s\S]*)$/),D!==null&&Array.isArray(D)&&D.length>=3&&N(D[1],D[2]);else if(_.match(/^-.\..+/)&&!_.match(w))F=i[y+1],D=_.match(/^-(.\..+)/),D!==null&&Array.isArray(D)&&D.length>=2&&(g=D[1],F!==void 0&&!F.match(/^-/)&&!S(g,p.bools)&&!S(g,p.counts)?(N(g,F),y++):N(g,_e(g)));else if(_.match(/^-[^-]+/)&&!_.match(w)){M=_.slice(1,-1).split(""),v=!1;for(let Ue=0;Ue<M.length;Ue++){if(F=_.slice(Ue+2),M[Ue+1]&&M[Ue+1]==="="){pe=_.slice(Ue+3),g=M[Ue],S(g,p.arrays)?y=I(y,g,i,pe):S(g,p.nargs)!==!1?y=G(y,g,i,pe):N(g,pe),v=!0;break}if(F==="-"){N(M[Ue],F);continue}if(/[A-Za-z]/.test(M[Ue])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(F)&&S(F,p.bools)===!1){N(M[Ue],F),v=!0;break}if(M[Ue+1]&&M[Ue+1].match(/\W/)){N(M[Ue],F),v=!0;break}else N(M[Ue],_e(M[Ue]))}g=_.slice(-1)[0],!v&&g!=="-"&&(S(g,p.arrays)?y=I(y,g,i):S(g,p.nargs)!==!1?y=G(y,g,i):(F=i[y+1],F!==void 0&&(!/^(-|--)[^-]/.test(F)||F.match(w))&&!S(g,p.bools)&&!S(g,p.counts)||/^(true|false)$/.test(F)?(N(g,F),y++):N(g,_e(g))))}else if(_.match(/^-[0-9]$/)&&_.match(w)&&S(_.slice(1),p.bools))g=_.slice(1),N(g,_e(g));else if(_==="--"){C=i.slice(y+1);break}else if(a["halt-at-non-option"]){C=i.slice(y);break}else z(_)}$(L,!0),$(L,!1),J(L),K(),le(L,p.aliases,c,!0),U(L),a["set-placeholder-key"]&&H(L),Object.keys(p.counts).forEach(function(y){Re(L,y.split("."))||N(y,0)}),f&&C.length&&(L[h]=[]),C.forEach(function(y){L[h].push(y)}),a["camel-case-expansion"]&&a["strip-dashed"]&&Object.keys(L).filter(y=>y!=="--"&&y.includes("-")).forEach(y=>{delete L[y]}),a["strip-aliased"]&&[].concat(...Object.keys(o).map(y=>o[y])).forEach(y=>{a["camel-case-expansion"]&&y.includes("-")&&delete L[y.split(".").map(_=>Hi(_)).join(".")],delete L[y]});function z(y){let _=V("_",y);(typeof _=="string"||typeof _=="number")&&L._.push(_)}function G(y,_,T,v){let g,M=S(_,p.nargs);if(M=typeof M!="number"||isNaN(M)?1:M,M===0)return Pe(v)||(x=Error(b("Argument unexpected for: %s",_))),N(_,_e(_)),y;let D=Pe(v)?0:1;if(a["nargs-eats-options"])T.length-(y+1)+D<M&&(x=Error(b("Not enough arguments following: %s",_))),D=M;else{for(g=y+1;g<T.length&&(!T[g].match(/^-[^0-9]/)||T[g].match(w)||ct(T[g]));g++)D++;D<M&&(x=Error(b("Not enough arguments following: %s",_)))}let F=Math.min(D,M);for(!Pe(v)&&F>0&&(N(_,v),F--),g=y+1;g<F+y+1;g++)N(_,T[g]);return y+F}function I(y,_,T,v){let g=[],M=v||T[y+1],D=S(_,p.nargs);if(S(_,p.bools)&&!/^(true|false)$/.test(M))g.push(!0);else if(Pe(M)||Pe(v)&&/^-/.test(M)&&!w.test(M)&&!ct(M)){if(c[_]!==void 0){let F=c[_];g=Array.isArray(F)?F:[F]}}else{Pe(v)||g.push(X(_,v,!0));for(let F=y+1;F<T.length&&!(!a["greedy-arrays"]&&g.length>0||D&&typeof D=="number"&&g.length>=D||(M=T[F],/^-/.test(M)&&!w.test(M)&&!ct(M)));F++)y=F,g.push(X(_,M,s))}return typeof D=="number"&&(D&&g.length<D||isNaN(D)&&g.length===0)&&(x=Error(b("Not enough arguments following: %s",_))),N(_,g),y}function N(y,_,T=s){if(/-/.test(y)&&a["camel-case-expansion"]){let M=y.split(".").map(function(D){return Hi(D)}).join(".");j(y,M)}let v=X(y,_,T),g=y.split(".");R(L,g,v),p.aliases[y]&&p.aliases[y].forEach(function(M){let D=M.split(".");R(L,D,v)}),g.length>1&&a["dot-notation"]&&(p.aliases[g[0]]||[]).forEach(function(M){let D=M.split("."),F=[].concat(g);F.shift(),D=D.concat(F),(p.aliases[y]||[]).includes(D.join("."))||R(L,D,v)}),S(y,p.normalize)&&!S(y,p.arrays)&&[y].concat(p.aliases[y]||[]).forEach(function(D){Object.defineProperty(O,D,{enumerable:!0,get(){return _},set(F){_=typeof F=="string"?zt.normalize(F):F}})})}function j(y,_){p.aliases[y]&&p.aliases[y].length||(p.aliases[y]=[_],d[_]=!0),p.aliases[_]&&p.aliases[_].length||j(_,y)}function X(y,_,T){T&&(_=aN(_)),(S(y,p.bools)||S(y,p.counts))&&typeof _=="string"&&(_=_==="true");let v=Array.isArray(_)?_.map(function(g){return V(y,g)}):V(y,_);return S(y,p.counts)&&(Pe(v)||typeof v=="boolean")&&(v=Lf()),S(y,p.normalize)&&S(y,p.arrays)&&(Array.isArray(_)?v=_.map(g=>zt.normalize(g)):v=zt.normalize(_)),v}function V(y,_){return!a["parse-positional-numbers"]&&y==="_"||!S(y,p.strings)&&!S(y,p.bools)&&!Array.isArray(_)&&(Ub(_)&&a["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${_}`)))||!Pe(_)&&S(y,p.numbers))&&(_=Number(_)),_}function J(y){let _=Object.create(null);le(_,p.aliases,c),Object.keys(p.configs).forEach(function(T){let v=y[T]||_[T];if(v)try{let g=null,M=zt.resolve(zt.cwd(),v),D=p.configs[T];if(typeof D=="function"){try{g=D(M)}catch(F){g=F}if(g instanceof Error){x=g;return}}else g=zt.require(M);B(g)}catch(g){g.name==="PermissionDenied"?x=g:y[T]&&(x=Error(b("Invalid JSON config file: %s",v)))}})}function B(y,_){Object.keys(y).forEach(function(T){let v=y[T],g=_?_+"."+T:T;typeof v=="object"&&v!==null&&!Array.isArray(v)&&a["dot-notation"]?B(v,g):(!Re(L,g.split("."))||S(g,p.arrays)&&a["combine-arrays"])&&N(g,v)})}function K(){typeof l<"u"&&l.forEach(function(y){B(y)})}function $(y,_){if(typeof u>"u")return;let T=typeof u=="string"?u:"",v=zt.env();Object.keys(v).forEach(function(g){if(T===""||g.lastIndexOf(T,0)===0){let M=g.split("__").map(function(D,F){return F===0&&(D=D.substring(T.length)),Hi(D)});(_&&p.configs[M.join(".")]||!_)&&!Re(y,M)&&N(M.join("."),v[g])}})}function U(y){let _,T=new Set;Object.keys(y).forEach(function(v){if(!T.has(v)&&(_=S(v,p.coercions),typeof _=="function"))try{let g=V(v,_(y[v]));[].concat(p.aliases[v]||[],v).forEach(M=>{T.add(M),y[M]=g})}catch(g){x=g}})}function H(y){return p.keys.forEach(_=>{~_.indexOf(".")||typeof y[_]>"u"&&(y[_]=void 0)}),y}function le(y,_,T,v=!1){Object.keys(T).forEach(function(g){Re(y,g.split("."))||(R(y,g.split("."),T[g]),v&&(m[g]=!0),(_[g]||[]).forEach(function(M){Re(y,M.split("."))||R(y,M.split("."),T[g])}))})}function Re(y,_){let T=y;a["dot-notation"]||(_=[_.join(".")]),_.slice(0,-1).forEach(function(g){T=T[g]||{}});let v=_[_.length-1];return typeof T!="object"?!1:v in T}function R(y,_,T){let v=y;a["dot-notation"]||(_=[_.join(".")]),_.slice(0,-1).forEach(function(pe){pe=Db(pe),typeof v=="object"&&v[pe]===void 0&&(v[pe]={}),typeof v[pe]!="object"||Array.isArray(v[pe])?(Array.isArray(v[pe])?v[pe].push({}):v[pe]=[v[pe],{}],v=v[pe][v[pe].length-1]):v=v[pe]});let g=Db(_[_.length-1]),M=S(_.join("."),p.arrays),D=Array.isArray(T),F=a["duplicate-arguments-array"];!F&&S(g,p.nargs)&&(F=!0,(!Pe(v[g])&&p.nargs[g]===1||Array.isArray(v[g])&&v[g].length===p.nargs[g])&&(v[g]=void 0)),T===Lf()?v[g]=Lf(v[g]):Array.isArray(v[g])?F&&M&&D?v[g]=a["flatten-duplicate-arrays"]?v[g].concat(T):(Array.isArray(v[g][0])?v[g]:[v[g]]).concat([T]):!F&&!!M==!!D?v[g]=T:v[g]=v[g].concat([T]):v[g]===void 0&&M?v[g]=D?T:[T]:F&&!(v[g]===void 0||S(g,p.counts)||S(g,p.bools))?v[g]=[v[g],T]:v[g]=T}function A(...y){y.forEach(function(_){Object.keys(_||{}).forEach(function(T){p.aliases[T]||(p.aliases[T]=[].concat(o[T]||[]),p.aliases[T].concat(T).forEach(function(v){if(/-/.test(v)&&a["camel-case-expansion"]){let g=Hi(v);g!==T&&p.aliases[T].indexOf(g)===-1&&(p.aliases[T].push(g),d[g]=!0)}}),p.aliases[T].concat(T).forEach(function(v){if(v.length>1&&/[A-Z]/.test(v)&&a["camel-case-expansion"]){let g=Pb(v,"-");g!==T&&p.aliases[T].indexOf(g)===-1&&(p.aliases[T].push(g),d[g]=!0)}}),p.aliases[T].forEach(function(v){p.aliases[v]=[T].concat(p.aliases[T].filter(function(g){return v!==g}))}))})})}function S(y,_){let T=[].concat(p.aliases[y]||[],y),v=Object.keys(_),g=T.find(M=>v.includes(M));return g?_[g]:!1}function W(y){let _=Object.keys(p);return[].concat(_.map(v=>p[v])).some(function(v){return Array.isArray(v)?v.includes(y):v[y]})}function de(y,..._){return[].concat(..._).some(function(v){let g=y.match(v);return g&&W(g[1])})}function Nt(y){if(y.match(w)||!y.match(/^-[^-]+/))return!1;let _=!0,T,v=y.slice(1).split("");for(let g=0;g<v.length;g++){if(T=y.slice(g+2),!W(v[g])){_=!1;break}if(v[g+1]&&v[g+1]==="="||T==="-"||/[A-Za-z]/.test(v[g])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(T)||v[g+1]&&v[g+1].match(/\W/))break}return _}function ct(y){return a["unknown-options-as-args"]&&Et(y)}function Et(y){return y=y.replace(/^-{3,}/,"--"),y.match(w)||Nt(y)?!1:!de(y,/^-+([^=]+?)=[\s\S]*$/,k,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function _e(y){return!S(y,p.bools)&&!S(y,p.counts)&&`${y}`in c?c[y]:Yr(vr(y))}function Yr(y){return{[pt.BOOLEAN]:!0,[pt.STRING]:"",[pt.NUMBER]:void 0,[pt.ARRAY]:[]}[y]}function vr(y){let _=pt.BOOLEAN;return S(y,p.strings)?_=pt.STRING:S(y,p.numbers)?_=pt.NUMBER:S(y,p.bools)?_=pt.BOOLEAN:S(y,p.arrays)&&(_=pt.ARRAY),_}function Pe(y){return y===void 0}function Vt(){Object.keys(p.counts).find(y=>S(y,p.arrays)?(x=Error(b("Invalid configuration: %s, opts.count excludes opts.array.",y)),!0):S(y,p.nargs)?(x=Error(b("Invalid configuration: %s, opts.count excludes opts.narg.",y)),!0):!1)}return{aliases:Object.assign({},p.aliases),argv:Object.assign(O,L),configuration:a,defaulted:Object.assign({},m),error:x,newAliases:Object.assign({},d)}}};function oN(r){let e=[],t=Object.create(null),n=!0;for(Object.keys(r).forEach(function(i){e.push([].concat(r[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let s=i+1;s<e.length;s++)if(e[i].filter(function(a){return e[s].indexOf(a)!==-1}).length){e[i]=e[i].concat(e[s]),e.splice(s,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(o,a,c){return c.indexOf(o)===a});let s=i.pop();s!==void 0&&typeof s=="string"&&(t[s]=i)}),t}function Lf(r){return r!==void 0?r+1:1}function Db(r){return r==="__proto__"?"___proto___":r}function aN(r){return typeof r=="string"&&(r[0]==="'"||r[0]==='"')&&r[r.length-1]===r[0]?r.substring(1,r.length-1):r}var Pf,Uf,Mf,kb=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Lb=(Uf=(Pf=process==null?void 0:process.versions)===null||Pf===void 0?void 0:Pf.node)!==null&&Uf!==void 0?Uf:(Mf=process==null?void 0:process.version)===null||Mf===void 0?void 0:Mf.slice(1);if(Lb&&Number(Lb.match(/^([^.]+)/)[1])<kb)throw Error(`yargs parser supports a minimum Node.js version of ${kb}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var cN=process?process.env:{},Mb=new Ff({cwd:process.cwd,env:()=>cN,format:nN.format,normalize:Ab.normalize,resolve:Ab.resolve,require:r=>{if(typeof require<"u")return require(r);if(r.match(/\.json$/))return JSON.parse(iN.readFileSync(r,"utf8"));throw Error("only .json config files are supported in ESM")}}),zi=function(e,t){return Mb.parse(e.slice(),t).argv};zi.detailed=function(r,e){return Mb.parse(r.slice(),e)};zi.camelCase=Hi;zi.decamelize=Pb;zi.looksLikeNumber=Ub;Fb.exports=zi});async function jb(r,e){let t=await uN(r);return async(n,i,s)=>{let o=i.map(l=>{let u=lN(l.params,{configuration:{"camel-case-expansion":!1,"dot-notation":!0}}),f=Fu(u);return u._.length==0&&delete u._,{id:l.taskId,target:{project:l.projectName,target:l.target,configuration:l.configuration},overrides:{...u,__overrides_unparsed__:f},projectRoot:l.projectRoot,cache:l.cache}});process.env.NX_CACHE_FAILURES="true",process.env.NX_CLOUD_DISTRIBUTED_EXECUTION_ID=n,process.env.NX_STREAM_OUTPUT="true",process.env.NX_PREFIX_OUTPUT="true";let a=await t.invoke({tasks:o,parallel:s});return{completedTasks:Object.values(a.taskGraph.tasks).map(l=>({taskId:l.id,hash:l.hash,code:fN(e,l.hash)})),completedStatusCode:a.status}}}function fN(r,e){try{let t=(0,qb.readFileSync)((0,Bb.join)(r,e,"code"),{encoding:"utf-8"});return Number(t)}catch(t){throw console.error(`Unable to read status code for hash ${e} from cache directory ${r}`),t}}var qb,Bb,uN,lN,Gb=q(()=>{"use strict";qb=require("fs"),Bb=require("path");Si();({initTasksRunner:uN}=dt()),lN=oa()});async function Hb(){let r=mN();return async function(t,n,i){let s=0,o=[];for(let a of pN(n)){let c=a.configuration?`--configuration=${a.configuration}`:"",l=i>1?` --parallel --max-parallel=${i}`:"",u=`npx nx run-many --target=${a.target} ${c} --projects=${a.projects.join(",")} ${a.params}${l}`;P&&hN.note({title:`Executing: '${u}'`});try{(0,$b.execSync)(u,{stdio:["ignore","inherit","inherit"],env:{...process.env,NX_CACHE_FAILURES:"true",NX_CLOUD_DISTRIBUTED_EXECUTION_ID:t,NX_STREAM_OUTPUT:"true",NX_PREFIX_OUTPUT:"true"}}),o.push(...r(t))}catch(f){if(f.status===Wt)throw f;s=1,o.push(...r(t))}}return{completedStatusCode:s,completedTasks:o}}}function pN(r){let e=[];return r.forEach(t=>{let n=e.find(i=>i.target===t.target&&i.configuration===t.configuration);n?n.projects.push(t.projectName):e.push({target:t.target,projects:[t.projectName],params:t.params,configuration:t.configuration})}),e}function mN(){return r=>{let e=`Command execution failed (distributed task execution: ${r}). Tasks hashes haven't been recorded.`,t;try{let n=`${dN}/tasks-hashes-${r}`;t=JSON.parse((0,aa.readFileSync)(n).toString()),(0,aa.unlinkSync)(n)}catch{throw new Error(e)}if(t.length==0)throw new Error(e);return t}}var $b,aa,hN,dN,zb=q(()=>{"use strict";$b=require("child_process"),aa=require("fs");re();({output:hN}=Y()),{cacheDirectory:dN}=dt()});var jf={};At(jf,{startAgent:()=>gN});async function gN(){let r=me(),e=ve(),t=je(),n=Te(),i=_N();gr(e,t)||(_r(),process.exit(1)),br.targets&&br.targets.length?Vi.note({title:`Starting an agent for running Nx target(s) [${br.targets.join(", ")}]`}):Vi.note({title:`Starting Agent '${i}' for running Nx tasks`});let{nxJson:s,nxCloudOptions:o}=It();function a(){var b;let m=(b=s.tasksRunnerOptions)==null?void 0:b.default;return s.nxCloudAccessToken&&!m?!0:!(m!=null&&m.runner)&&process.env.NX_CLOUD_ACCESS_TOKEN||!(m!=null&&m.runner)&&s.nxCloudAccessToken||(m==null?void 0:m.runner)==="nx-cloud"||(m==null?void 0:m.runner)==="@nrwl/nx-cloud"}if(!a())return Tb(),process.exit(1);await Ui(o)||(Vi.error({title:"Nx Cloud: Workspace is disabled",bodyLines:["Distributed Task Execution is disabled when your workspace is disabled","","Organization administrators can find more information on the 'Billing' page in the Nx Cloud Webapp"]}),process.exit(1));let l=new sa(o,r,e,t,n,i);bN(l,o,i);let u=new Jt(xr||o.encryptionKey),f=new Yt(o),h=new Hn(new fr(u,f,o,"dte-agent"),Bf),d=EN?await jb(o,Bf):await Hb();return Ib(i,l,h,d,br.targets).then(async m=>(await sn(o),m)).catch(async m=>{throw await l.completeRunGroupWithError(`Critical Error in Agent: "${m.message}"`),m})}function _N(){return process.env.NX_AGENT_NAME!==void 0?process.env.NX_AGENT_NAME:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_STAGE?process.env.CIRCLE_STAGE:process.env.CIRCLECI!==void 0&&process.env.CIRCLE_JOB?process.env.CIRCLE_JOB:`Agent ${Math.floor(Math.random()*1e5)}`}function bN(r,e,t){let n=`${Bf}/lockfiles`,i=`${n}/${t}.lock`;(0,mt.existsSync)(n)||(0,mt.mkdirSync)(n,{recursive:!0});let s=(0,mt.readdirSync)(n);s.length&&(s.includes(`${t}.lock`)&&(Vi.error({title:"Duplicate Agent ID Detected",bodyLines:["We have detected another agent with this ID running in this workspace. This should not happen.","",'End all currently running agents, run "npx nx-cloud clean-up-agents", and try again.']}),process.exit(1)),Vi.warn({title:"Other Nx Cloud Agents Detected",bodyLines:["We have detected other agents running in this workspace. This can cause unexpected behavior.","","This can also be a false positive caused by agents that did not shut down correctly.",'If you believe this is the case, run "npx nx-cloud clean-up-agents".']})),(0,mt.writeFileSync)(i,""),process.on("exit",o=>{qf(i,o)}),process.on("SIGTERM",async()=>{await r.completeRunGroupWithError("Agent was terminated via SIGTERM"),qf(i,1)}),process.on("SIGINT",async()=>{await r.completeRunGroupWithError("Agent was terminated via SIGINT"),qf(i,1)})}function qf(r,e){(0,mt.existsSync)(r)&&((0,mt.unlinkSync)(r),process.exit(e))}var mt,yN,RP,Vi,TP,EN,Bf,br,Gf=q(()=>{"use strict";mt=require("fs");gf();re();Vn();Xl();kt();Es();xb();ji();gs();bo();Cb();Nb();Gb();zb();yN=oa(),RP=ia(),{output:Vi,workspaceRoot:TP}=Y(),{initTasksRunner:EN,cacheDirectory:Bf}=dt(),br=yN(process.argv,{array:["targets"],default:{}});br.targets&&br.targets.length===1&&(br.targets=br.targets[0].split(",").map(r=>r.trim()))});function Vb(r,e){if([".yml",".yaml"].some(i=>r==null?void 0:r.endsWith(i)))try{let i=u=>(0,$f.execSync)(`${u}`,{stdio:"pipe"}).toString().trim().split(`
`).filter(Boolean),s=process.env.NX_BASE??(0,$f.execSync)(`git rev-parse ${e}~1`,{stdio:"pipe"}).toString().trim()??e,o=i(`npx nx show projects --affected --base=${s}`),a=i("npx nx show projects"),c=o.length/a.length,l=Math.round(c*100);P&&vN.note({title:`Affected project ratio: ${l}%`})}catch(i){P&&console.error("Error calculating affected project ratio: ",i);return}}var $f,vN,Wb=q(()=>{"use strict";$f=require("child_process");re();({output:vN}=Y())});var Xb,Wn,Hf=q(()=>{"use strict";_t();xo();kt();({output:Xb}=Y()),Wn=class{constructor(e){this.apiAxiosInstance=Oe(e)}async createRunGroup(e,t,n,i,s,o,a,c,l,u,f,h,d=!1){var b;let m=Ce("createRunGroup");try{let p=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/create-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,stopAgentsOnFailure:s,agentCount:o,stopAgentsAfter:a,commitSha:l,distributesOn:c,affectedProjectRatio:f,vcsContext:dr(),envVars:h,requireExplicitCompletion:d}));m.recordMetric(ne(p))}catch(p){m.recordMetric((b=p==null?void 0:p.axiosException)!=null&&b.response?ne(p.axiosException.response):Ie),Xb.error({title:p.message}),process.exit(1)}}async completeRunGroup(e,t,n,i){var o;let s=Ce("completeRunGroup");try{let a=await ce(()=>this.apiAxiosInstance.post("/nx-cloud/executions/complete-run-group",{branch:e,runGroup:t,ciExecutionId:n,ciExecutionEnv:i,vcsContext:dr()}));s.recordMetric(ne(a))}catch(a){s.recordMetric((o=a==null?void 0:a.axiosException)!=null&&o.response?ne(a.axiosException.response):Ie),Xb.error({title:a.message}),process.exit(1)}}async sendHeartbeat(e,t){await this.apiAxiosInstance.post("/nx-cloud/heartbeat",{ciExecutionId:e,runGroup:t})}}});var zf={};At(zf,{startCiRun:()=>wN});async function wN(){var f;let{nxCloudOptions:r}=It(),e=me(),t=ve(),n=je(),i=Te(),s=tt(),o=Yi(),a=yt.distributeOn?yt.distributeOn:yt.distributesOn,c=Vb(a,((f=r.affected)==null?void 0:f.defaultBase)??"main"),l=bh(yt.withEnvVars);gr(t,n)||(_r(),process.exit(1)),P&&Kb.note({title:`Creating run group. branch: ${e}, ciExecutionId: ${n}, ciExecutionEnv: ${i}, runGroup: ${t}, commitSha: ${s}, requireExplicitCompletion: ${yt.requireExplicitCompletion}`}),yt.commandCount&&(Kb.error({title:"--command-count is deprecated. Use --stop-agents-after instead.",bodyLines:['E.g., npx nx-cloud start-ci-run --stop-agents-after="e2e"']}),process.exit(1)),await new Wn(r).createRunGroup(e,t,n,i,yt.stopAgentsOnFailure,yt.agentCount,yt.stopAgentsAfter,a,s,o,c,l,yt.requireExplicitCompletion),await ea(),yt.useDteByDefault&&L_()}var SN,Kb,qP,yt,Vf=q(()=>{"use strict";Vl();Wl();re();Wb();Vn();Hf();ji();SN=oa(),{output:Kb,workspaceRoot:qP}=Y(),yt=SN(process.argv,{boolean:["stop-agents-on-failure","use-dte-by-default","require-explicit-completion"],number:["agent-count","command-count"],string:["stop-agents-after","with-env-vars","distributes-on","distribute-on"],default:{useDteByDefault:!0}})});var ca={};At(ca,{stopAllAgents:()=>TN});async function TN(){let r=me(),e=ve(),t=je(),n=Te();gr(e,t)||(_r(),process.exit(1)),P&&RN.note({title:`Stopping all agents running tasks for run group. branch: ${r}, ciExecutionId: ${t}, ciExecutionEnv: ${n}, runGroup: ${e}`});let{nxCloudOptions:i}=It();await new Wn(i).completeRunGroup(r,e,t,n)}var RN,ua=q(()=>{"use strict";re();Vn();Hf();ji();({output:RN}=Y())});var Xf=E((HP,Jb)=>{"use strict";var Yb=require("fs"),Wf;function xN(){try{return Yb.statSync("/.dockerenv"),!0}catch{return!1}}function ON(){try{return Yb.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}Jb.exports=()=>(Wf===void 0&&(Wf=xN()||ON()),Wf)});var ev=E((zP,Kf)=>{"use strict";var CN=require("os"),IN=require("fs"),Zb=Xf(),Qb=()=>{if(process.platform!=="linux")return!1;if(CN.release().toLowerCase().includes("microsoft"))return!Zb();try{return IN.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Zb():!1}catch{return!1}};process.env.__IS_WSL_TEST__?Kf.exports=Qb:Kf.exports=Qb()});var rv=E((VP,tv)=>{"use strict";tv.exports=(r,e,t)=>{let n=i=>Object.defineProperty(r,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get(){let i=t();return n(i),i},set(i){n(i)}}),r}});var uv=E((WP,cv)=>{"use strict";var NN=require("path"),AN=require("child_process"),{promises:fa,constants:av}=require("fs"),la=ev(),DN=Xf(),Jf=rv(),nv=NN.join(__dirname,"xdg-open"),{platform:Xn,arch:iv}=process,kN=()=>{try{return fa.statSync("/run/.containerenv"),!0}catch{return!1}},Yf;function LN(){return Yf===void 0&&(Yf=kN()||DN()),Yf}var PN=(()=>{let r="/mnt/",e;return async function(){if(e)return e;let t="/etc/wsl.conf",n=!1;try{await fa.access(t,av.F_OK),n=!0}catch{}if(!n)return r;let i=await fa.readFile(t,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return s?(e=s.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):r}})(),sv=async(r,e)=>{let t;for(let n of r)try{return await e(n)}catch(i){t=i}throw t},ha=async r=>{if(r={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...r},Array.isArray(r.app))return sv(r.app,a=>ha({...r,app:a}));let{name:e,arguments:t=[]}=r.app||{};if(t=[...t],Array.isArray(e))return sv(e,a=>ha({...r,app:{name:a,arguments:t}}));let n,i=[],s={};if(Xn==="darwin")n="open",r.wait&&i.push("--wait-apps"),r.background&&i.push("--background"),r.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Xn==="win32"||la&&!LN()&&!e){let a=await PN();n=la?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),la||(s.windowsVerbatimArguments=!0);let c=["Start"];r.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`,"-ArgumentList"),r.target&&t.unshift(r.target)):r.target&&c.push(`"${r.target}"`),t.length>0&&(t=t.map(l=>`"\`"${l}\`""`),c.push(t.join(","))),r.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let a=!__dirname||__dirname==="/",c=!1;try{await fa.access(nv,av.X_OK),c=!0}catch{}n=process.versions.electron||Xn==="android"||a||!c?"xdg-open":nv}t.length>0&&i.push(...t),r.wait||(s.stdio="ignore",s.detached=!0)}r.target&&i.push(r.target),Xn==="darwin"&&t.length>0&&i.push("--args",...t);let o=AN.spawn(n,i,s);return r.wait?new Promise((a,c)=>{o.once("error",c),o.once("close",l=>{if(!r.allowNonzeroExitCode&&l>0){c(new Error(`Exited with code ${l}`));return}a(o)})}):(o.unref(),o)},Zf=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `target`");return ha({...e,target:r})},UN=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=e||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return ha({...e,app:{name:r,arguments:t}})};function ov(r){if(typeof r=="string"||Array.isArray(r))return r;let{[iv]:e}=r;if(!e)throw new Error(`${iv} is not supported`);return e}function Qf({[Xn]:r},{wsl:e}){if(e&&la)return ov(e);if(!r)throw new Error(`${Xn} is not supported`);return ov(r)}var da={};Jf(da,"chrome",()=>Qf({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Jf(da,"firefox",()=>Qf({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Jf(da,"edge",()=>Qf({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Zf.apps=da;Zf.openApp=UN;cv.exports=Zf});function lv(){let{output:r}=Y();r.error({title:"Connections to Nx Cloud are disabled for this workspace",bodyLines:["This was an intentional decision by someone on your team.","Nx Cloud cannot and will not be enabled.","","To allow connections to Nx Cloud again, remove the 'neverConnectToCloud'","property in nx.json."]})}var fv=q(()=>{"use strict"});var eh={};At(eh,{uploadAndShowRunDetails:()=>qN});async function FN(r){let e=new An(r),t={},n=Jr(),i=new kn(e,t,r,n),s=new hr(r.maskedProperties),o=JSON.parse((0,dv.readFileSync)((0,mv.join)(hv,"run.json")).toString()),a=o.tasks.map(l=>({...l,terminalOutput:wo(hv,s,l.hash,l.cacheStatus,l.status)})),c=Co();return await i.endRun(o.run,a,{branch:null,runGroup:null,ciExecutionId:null,ciExecutionEnv:null},c),`${ys(r.url||"https://nx.app")}/runs/${c}`}async function qN(){let{nxJson:r,nxCloudOptions:e}=It();r.neverConnectToCloud&&(lv(),process.exit(1));let t=await FN(e);MN.success({title:"Successfully uploaded the run details",bodyLines:[`View run details at ${t}`]}),(0,pv.default)(t)}var dv,pv,mv,MN,hv,th=q(()=>{"use strict";dv=require("fs"),pv=Sr(uv()),mv=require("path");re();Vn();fv();nc();Vu();Wu();Mu();So();Gu();({output:MN}=Y()),{cacheDirectory:hv}=dt()});exports.nxCloudTasksRunner=(...r)=>(Eb(),be(yb)).default(...r);exports.configureLightClientRequire=()=>(Rr(),be(lh)).configureLightClientRequire;var BN={"clean-up-agents":()=>(Af(),be(Nf)).cleanUpAgents(),record:()=>(kf(),be(Df)).runCommandAndStoreInCloud(),"start-agent":()=>(Gf(),be(jf)).startAgent(),"start-ci-run":()=>(Vf(),be(zf)).startCiRun(),"stop-all-agents":()=>(ua(),be(ca)).stopAllAgents(),"complete-ci-run":()=>(ua(),be(ca)).stopAllAgents(),"upload-and-show-run-details":()=>(th(),be(eh)).uploadAndShowRunDetails()};exports.commands=BN;exports.cleanUpAgents=()=>(Af(),be(Nf)).cleanUpAgents();exports.runCommandAndStoreInCloud=()=>(kf(),be(Df)).runCommandAndStoreInCloud();exports.startAgent=()=>(Gf(),be(jf)).startAgent();exports.startCiRun=()=>(Vf(),be(zf)).startCiRun();exports.stopAllAgents=()=>(ua(),be(ca)).stopAllAgents();exports.uploadAndShowRunDetails=()=>(th(),be(eh)).uploadAndShowRunDetails();
